function fm(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function od(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var ld={exports:{}},zi={},cd={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vs=Symbol.for("react.element"),pm=Symbol.for("react.portal"),gm=Symbol.for("react.fragment"),xm=Symbol.for("react.strict_mode"),ym=Symbol.for("react.profiler"),vm=Symbol.for("react.provider"),wm=Symbol.for("react.context"),jm=Symbol.for("react.forward_ref"),km=Symbol.for("react.suspense"),_m=Symbol.for("react.memo"),Nm=Symbol.for("react.lazy"),xc=Symbol.iterator;function bm(e){return e===null||typeof e!="object"?null:(e=xc&&e[xc]||e["@@iterator"],typeof e=="function"?e:null)}var ud={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dd=Object.assign,hd={};function gn(e,t,r){this.props=e,this.context=t,this.refs=hd,this.updater=r||ud}gn.prototype.isReactComponent={};gn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fd(){}fd.prototype=gn.prototype;function ul(e,t,r){this.props=e,this.context=t,this.refs=hd,this.updater=r||ud}var dl=ul.prototype=new fd;dl.constructor=ul;dd(dl,gn.prototype);dl.isPureReactComponent=!0;var yc=Array.isArray,md=Object.prototype.hasOwnProperty,hl={current:null},pd={key:!0,ref:!0,__self:!0,__source:!0};function gd(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)md.call(t,n)&&!pd.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:vs,type:e,key:i,ref:o,props:s,_owner:hl.current}}function Sm(e,t){return{$$typeof:vs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fl(e){return typeof e=="object"&&e!==null&&e.$$typeof===vs}function Em(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var vc=/\/+/g;function ga(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Em(""+e.key):t.toString(36)}function Xs(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vs:case pm:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+ga(o,0):n,yc(s)?(r="",e!=null&&(r=e.replace(vc,"$&/")+"/"),Xs(s,t,r,"",function(u){return u})):s!=null&&(fl(s)&&(s=Sm(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(vc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",yc(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+ga(i,l);o+=Xs(i,t,r,c,s)}else if(c=bm(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+ga(i,l++),o+=Xs(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ts(e,t,r){if(e==null)return e;var n=[],s=0;return Xs(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Cm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Se={current:null},Zs={transition:null},Pm={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:Zs,ReactCurrentOwner:hl};function xd(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:Ts,forEach:function(e,t,r){Ts(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ts(e,function(){t++}),t},toArray:function(e){return Ts(e,function(t){return t})||[]},only:function(e){if(!fl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};B.Component=gn;B.Fragment=gm;B.Profiler=ym;B.PureComponent=ul;B.StrictMode=xm;B.Suspense=km;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pm;B.act=xd;B.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=dd({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=hl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)md.call(t,c)&&!pd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:vs,type:e.type,key:s,ref:i,props:n,_owner:o}};B.createContext=function(e){return e={$$typeof:wm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vm,_context:e},e.Consumer=e};B.createElement=gd;B.createFactory=function(e){var t=gd.bind(null,e);return t.type=e,t};B.createRef=function(){return{current:null}};B.forwardRef=function(e){return{$$typeof:jm,render:e}};B.isValidElement=fl;B.lazy=function(e){return{$$typeof:Nm,_payload:{_status:-1,_result:e},_init:Cm}};B.memo=function(e,t){return{$$typeof:_m,type:e,compare:t===void 0?null:t}};B.startTransition=function(e){var t=Zs.transition;Zs.transition={};try{e()}finally{Zs.transition=t}};B.unstable_act=xd;B.useCallback=function(e,t){return Se.current.useCallback(e,t)};B.useContext=function(e){return Se.current.useContext(e)};B.useDebugValue=function(){};B.useDeferredValue=function(e){return Se.current.useDeferredValue(e)};B.useEffect=function(e,t){return Se.current.useEffect(e,t)};B.useId=function(){return Se.current.useId()};B.useImperativeHandle=function(e,t,r){return Se.current.useImperativeHandle(e,t,r)};B.useInsertionEffect=function(e,t){return Se.current.useInsertionEffect(e,t)};B.useLayoutEffect=function(e,t){return Se.current.useLayoutEffect(e,t)};B.useMemo=function(e,t){return Se.current.useMemo(e,t)};B.useReducer=function(e,t,r){return Se.current.useReducer(e,t,r)};B.useRef=function(e){return Se.current.useRef(e)};B.useState=function(e){return Se.current.useState(e)};B.useSyncExternalStore=function(e,t,r){return Se.current.useSyncExternalStore(e,t,r)};B.useTransition=function(){return Se.current.useTransition()};B.version="18.3.1";cd.exports=B;var _=cd.exports;const ml=od(_),Tm=fm({__proto__:null,default:ml},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm=_,Lm=Symbol.for("react.element"),Im=Symbol.for("react.fragment"),Om=Object.prototype.hasOwnProperty,Am=Rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$m={key:!0,ref:!0,__self:!0,__source:!0};function yd(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Om.call(t,n)&&!$m.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Lm,type:e,key:i,ref:o,props:s,_owner:Am.current}}zi.Fragment=Im;zi.jsx=yd;zi.jsxs=yd;ld.exports=zi;var a=ld.exports,vd={exports:{}},Be={},wd={exports:{}},jd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,$){var P=T.length;T.push($);e:for(;0<P;){var q=P-1>>>1,ne=T[q];if(0<s(ne,$))T[q]=$,T[P]=ne,P=q;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var $=T[0],P=T.pop();if(P!==$){T[0]=P;e:for(var q=0,ne=T.length,Cs=ne>>>1;q<Cs;){var or=2*(q+1)-1,pa=T[or],lr=or+1,Ps=T[lr];if(0>s(pa,P))lr<ne&&0>s(Ps,pa)?(T[q]=Ps,T[lr]=P,q=lr):(T[q]=pa,T[or]=P,q=or);else if(lr<ne&&0>s(Ps,P))T[q]=Ps,T[lr]=P,q=lr;else break e}}return $}function s(T,$){var P=T.sortIndex-$.sortIndex;return P!==0?P:T.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,v=!1,p=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(T){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=T)n(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=r(u)}}function w(T){if(y=!1,x(T),!p)if(r(c)!==null)p=!0,Ir(N);else{var $=r(u);$!==null&&_n(w,$.startTime-T)}}function N(T,$){p=!1,y&&(y=!1,m(C),C=-1),v=!0;var P=f;try{for(x($),h=r(c);h!==null&&(!(h.expirationTime>$)||T&&!b());){var q=h.callback;if(typeof q=="function"){h.callback=null,f=h.priorityLevel;var ne=q(h.expirationTime<=$);$=e.unstable_now(),typeof ne=="function"?h.callback=ne:h===r(c)&&n(c),x($)}else n(c);h=r(c)}if(h!==null)var Cs=!0;else{var or=r(u);or!==null&&_n(w,or.startTime-$),Cs=!1}return Cs}finally{h=null,f=P,v=!1}}var j=!1,S=null,C=-1,A=5,O=-1;function b(){return!(e.unstable_now()-O<A)}function ce(){if(S!==null){var T=e.unstable_now();O=T;var $=!0;try{$=S(!0,T)}finally{$?_e():(j=!1,S=null)}}else j=!1}var _e;if(typeof g=="function")_e=function(){g(ce)};else if(typeof MessageChannel<"u"){var Rt=new MessageChannel,ma=Rt.port2;Rt.port1.onmessage=ce,_e=function(){ma.postMessage(null)}}else _e=function(){k(ce,0)};function Ir(T){S=T,j||(j=!0,_e())}function _n(T,$){C=k(function(){T(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){p||v||(p=!0,Ir(N))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var P=f;f=$;try{return T()}finally{f=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,$){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var P=f;f=T;try{return $()}finally{f=P}},e.unstable_scheduleCallback=function(T,$,P){var q=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?q+P:q):P=q,T){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=P+ne,T={id:d++,callback:$,priorityLevel:T,startTime:P,expirationTime:ne,sortIndex:-1},P>q?(T.sortIndex=P,t(u,T),r(c)===null&&T===r(u)&&(y?(m(C),C=-1):y=!0,_n(w,P-q))):(T.sortIndex=ne,t(c,T),p||v||(p=!0,Ir(N))),T},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(T){var $=f;return function(){var P=f;f=$;try{return T.apply(this,arguments)}finally{f=P}}}})(jd);wd.exports=jd;var Dm=wd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm=_,Me=Dm;function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kd=new Set,Xn={};function Tr(e,t){an(e,t),an(e+"Capture",t)}function an(e,t){for(Xn[e]=t,e=0;e<t.length;e++)kd.add(t[e])}var Nt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Za=Object.prototype.hasOwnProperty,Um=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wc={},jc={};function Mm(e){return Za.call(jc,e)?!0:Za.call(wc,e)?!1:Um.test(e)?jc[e]=!0:(wc[e]=!0,!1)}function Bm(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Fm(e,t,r,n){if(t===null||typeof t>"u"||Bm(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ee(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ge[e]=new Ee(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ge[t]=new Ee(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ge[e]=new Ee(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ge[e]=new Ee(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ge[e]=new Ee(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ge[e]=new Ee(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ge[e]=new Ee(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ge[e]=new Ee(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ge[e]=new Ee(e,5,!1,e.toLowerCase(),null,!1,!1)});var pl=/[\-:]([a-z])/g;function gl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(pl,gl);ge[t]=new Ee(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(pl,gl);ge[t]=new Ee(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(pl,gl);ge[t]=new Ee(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ge[e]=new Ee(e,1,!1,e.toLowerCase(),null,!1,!1)});ge.xlinkHref=new Ee("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ge[e]=new Ee(e,1,!1,e.toLowerCase(),null,!0,!0)});function xl(e,t,r,n){var s=ge.hasOwnProperty(t)?ge[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Fm(t,r,s,n)&&(r=null),n||s===null?Mm(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ct=zm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rs=Symbol.for("react.element"),Mr=Symbol.for("react.portal"),Br=Symbol.for("react.fragment"),yl=Symbol.for("react.strict_mode"),eo=Symbol.for("react.profiler"),_d=Symbol.for("react.provider"),Nd=Symbol.for("react.context"),vl=Symbol.for("react.forward_ref"),to=Symbol.for("react.suspense"),ro=Symbol.for("react.suspense_list"),wl=Symbol.for("react.memo"),Ot=Symbol.for("react.lazy"),bd=Symbol.for("react.offscreen"),kc=Symbol.iterator;function Nn(e){return e===null||typeof e!="object"?null:(e=kc&&e[kc]||e["@@iterator"],typeof e=="function"?e:null)}var ee=Object.assign,xa;function In(e){if(xa===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);xa=t&&t[1]||""}return`
`+xa+e}var ya=!1;function va(e,t){if(!e||ya)return"";ya=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{ya=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?In(e):""}function Vm(e){switch(e.tag){case 5:return In(e.type);case 16:return In("Lazy");case 13:return In("Suspense");case 19:return In("SuspenseList");case 0:case 2:case 15:return e=va(e.type,!1),e;case 11:return e=va(e.type.render,!1),e;case 1:return e=va(e.type,!0),e;default:return""}}function no(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Br:return"Fragment";case Mr:return"Portal";case eo:return"Profiler";case yl:return"StrictMode";case to:return"Suspense";case ro:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nd:return(e.displayName||"Context")+".Consumer";case _d:return(e._context.displayName||"Context")+".Provider";case vl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wl:return t=e.displayName||null,t!==null?t:no(e.type)||"Memo";case Ot:t=e._payload,e=e._init;try{return no(e(t))}catch{}}return null}function qm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return no(t);case 8:return t===yl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wm(e){var t=Sd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ls(e){e._valueTracker||(e._valueTracker=Wm(e))}function Ed(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Sd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ui(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function so(e,t){var r=t.checked;return ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function _c(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Zt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Cd(e,t){t=t.checked,t!=null&&xl(e,"checked",t,!1)}function io(e,t){Cd(e,t);var r=Zt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ao(e,t.type,r):t.hasOwnProperty("defaultValue")&&ao(e,t.type,Zt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ao(e,t,r){(t!=="number"||ui(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var On=Array.isArray;function Zr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Zt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function oo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(E(91));return ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function bc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(E(92));if(On(r)){if(1<r.length)throw Error(E(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Zt(r)}}function Pd(e,t){var r=Zt(t.value),n=Zt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Sc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Td(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Td(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Is,Rd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Is=Is||document.createElement("div"),Is.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Is.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var zn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hm=["Webkit","ms","Moz","O"];Object.keys(zn).forEach(function(e){Hm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zn[t]=zn[e]})});function Ld(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||zn.hasOwnProperty(e)&&zn[e]?(""+t).trim():t+"px"}function Id(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Ld(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Km=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function co(e,t){if(t){if(Km[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(E(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(E(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(E(61))}if(t.style!=null&&typeof t.style!="object")throw Error(E(62))}}function uo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ho=null;function jl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fo=null,en=null,tn=null;function Ec(e){if(e=ks(e)){if(typeof fo!="function")throw Error(E(280));var t=e.stateNode;t&&(t=Vi(t),fo(e.stateNode,e.type,t))}}function Od(e){en?tn?tn.push(e):tn=[e]:en=e}function Ad(){if(en){var e=en,t=tn;if(tn=en=null,Ec(e),t)for(e=0;e<t.length;e++)Ec(t[e])}}function $d(e,t){return e(t)}function Dd(){}var wa=!1;function zd(e,t,r){if(wa)return e(t,r);wa=!0;try{return $d(e,t,r)}finally{wa=!1,(en!==null||tn!==null)&&(Dd(),Ad())}}function es(e,t){var r=e.stateNode;if(r===null)return null;var n=Vi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(E(231,t,typeof r));return r}var mo=!1;if(Nt)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){mo=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{mo=!1}function Jm(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Un=!1,di=null,hi=!1,po=null,Gm={onError:function(e){Un=!0,di=e}};function Qm(e,t,r,n,s,i,o,l,c){Un=!1,di=null,Jm.apply(Gm,arguments)}function Ym(e,t,r,n,s,i,o,l,c){if(Qm.apply(this,arguments),Un){if(Un){var u=di;Un=!1,di=null}else throw Error(E(198));hi||(hi=!0,po=u)}}function Rr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ud(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cc(e){if(Rr(e)!==e)throw Error(E(188))}function Xm(e){var t=e.alternate;if(!t){if(t=Rr(e),t===null)throw Error(E(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Cc(s),e;if(i===n)return Cc(s),t;i=i.sibling}throw Error(E(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(E(189))}}if(r.alternate!==n)throw Error(E(190))}if(r.tag!==3)throw Error(E(188));return r.stateNode.current===r?e:t}function Md(e){return e=Xm(e),e!==null?Bd(e):null}function Bd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bd(e);if(t!==null)return t;e=e.sibling}return null}var Fd=Me.unstable_scheduleCallback,Pc=Me.unstable_cancelCallback,Zm=Me.unstable_shouldYield,ep=Me.unstable_requestPaint,se=Me.unstable_now,tp=Me.unstable_getCurrentPriorityLevel,kl=Me.unstable_ImmediatePriority,Vd=Me.unstable_UserBlockingPriority,fi=Me.unstable_NormalPriority,rp=Me.unstable_LowPriority,qd=Me.unstable_IdlePriority,Ui=null,ft=null;function np(e){if(ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(Ui,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:ap,sp=Math.log,ip=Math.LN2;function ap(e){return e>>>=0,e===0?32:31-(sp(e)/ip|0)|0}var Os=64,As=4194304;function An(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=An(l):(i&=o,i!==0&&(n=An(i)))}else o=r&~s,o!==0?n=An(o):i!==0&&(n=An(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ot(t),s=1<<r,n|=e[r],t&=~s;return n}function op(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=op(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function go(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wd(){var e=Os;return Os<<=1,!(Os&4194240)&&(Os=64),e}function ja(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ws(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function cp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ot(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function _l(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var W=0;function Hd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Kd,Nl,Jd,Gd,Qd,xo=!1,$s=[],qt=null,Wt=null,Ht=null,ts=new Map,rs=new Map,zt=[],up="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tc(e,t){switch(e){case"focusin":case"focusout":qt=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":Ht=null;break;case"pointerover":case"pointerout":ts.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(t.pointerId)}}function Sn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ks(t),t!==null&&Nl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function dp(e,t,r,n,s){switch(t){case"focusin":return qt=Sn(qt,e,t,r,n,s),!0;case"dragenter":return Wt=Sn(Wt,e,t,r,n,s),!0;case"mouseover":return Ht=Sn(Ht,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return ts.set(i,Sn(ts.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,rs.set(i,Sn(rs.get(i)||null,e,t,r,n,s)),!0}return!1}function Yd(e){var t=pr(e.target);if(t!==null){var r=Rr(t);if(r!==null){if(t=r.tag,t===13){if(t=Ud(r),t!==null){e.blockedOn=t,Qd(e.priority,function(){Jd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ei(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=yo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ho=n,r.target.dispatchEvent(n),ho=null}else return t=ks(r),t!==null&&Nl(t),e.blockedOn=r,!1;t.shift()}return!0}function Rc(e,t,r){ei(e)&&r.delete(t)}function hp(){xo=!1,qt!==null&&ei(qt)&&(qt=null),Wt!==null&&ei(Wt)&&(Wt=null),Ht!==null&&ei(Ht)&&(Ht=null),ts.forEach(Rc),rs.forEach(Rc)}function En(e,t){e.blockedOn===t&&(e.blockedOn=null,xo||(xo=!0,Me.unstable_scheduleCallback(Me.unstable_NormalPriority,hp)))}function ns(e){function t(s){return En(s,e)}if(0<$s.length){En($s[0],e);for(var r=1;r<$s.length;r++){var n=$s[r];n.blockedOn===e&&(n.blockedOn=null)}}for(qt!==null&&En(qt,e),Wt!==null&&En(Wt,e),Ht!==null&&En(Ht,e),ts.forEach(t),rs.forEach(t),r=0;r<zt.length;r++)n=zt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<zt.length&&(r=zt[0],r.blockedOn===null);)Yd(r),r.blockedOn===null&&zt.shift()}var rn=Ct.ReactCurrentBatchConfig,pi=!0;function fp(e,t,r,n){var s=W,i=rn.transition;rn.transition=null;try{W=1,bl(e,t,r,n)}finally{W=s,rn.transition=i}}function mp(e,t,r,n){var s=W,i=rn.transition;rn.transition=null;try{W=4,bl(e,t,r,n)}finally{W=s,rn.transition=i}}function bl(e,t,r,n){if(pi){var s=yo(e,t,r,n);if(s===null)Ra(e,t,n,gi,r),Tc(e,n);else if(dp(s,e,t,r,n))n.stopPropagation();else if(Tc(e,n),t&4&&-1<up.indexOf(e)){for(;s!==null;){var i=ks(s);if(i!==null&&Kd(i),i=yo(e,t,r,n),i===null&&Ra(e,t,n,gi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ra(e,t,n,null,r)}}var gi=null;function yo(e,t,r,n){if(gi=null,e=jl(n),e=pr(e),e!==null)if(t=Rr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ud(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gi=e,null}function Xd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tp()){case kl:return 1;case Vd:return 4;case fi:case rp:return 16;case qd:return 536870912;default:return 16}default:return 16}}var Bt=null,Sl=null,ti=null;function Zd(){if(ti)return ti;var e,t=Sl,r=t.length,n,s="value"in Bt?Bt.value:Bt.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return ti=s.slice(e,1<n?1-n:void 0)}function ri(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ds(){return!0}function Lc(){return!1}function Fe(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ds:Lc,this.isPropagationStopped=Lc,this}return ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),t}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},El=Fe(xn),js=ee({},xn,{view:0,detail:0}),pp=Fe(js),ka,_a,Cn,Mi=ee({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cn&&(Cn&&e.type==="mousemove"?(ka=e.screenX-Cn.screenX,_a=e.screenY-Cn.screenY):_a=ka=0,Cn=e),ka)},movementY:function(e){return"movementY"in e?e.movementY:_a}}),Ic=Fe(Mi),gp=ee({},Mi,{dataTransfer:0}),xp=Fe(gp),yp=ee({},js,{relatedTarget:0}),Na=Fe(yp),vp=ee({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),wp=Fe(vp),jp=ee({},xn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kp=Fe(jp),_p=ee({},xn,{data:0}),Oc=Fe(_p),Np={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ep(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sp[e])?!!t[e]:!1}function Cl(){return Ep}var Cp=ee({},js,{key:function(e){if(e.key){var t=Np[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cl,charCode:function(e){return e.type==="keypress"?ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pp=Fe(Cp),Tp=ee({},Mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ac=Fe(Tp),Rp=ee({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cl}),Lp=Fe(Rp),Ip=ee({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Op=Fe(Ip),Ap=ee({},Mi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$p=Fe(Ap),Dp=[9,13,27,32],Pl=Nt&&"CompositionEvent"in window,Mn=null;Nt&&"documentMode"in document&&(Mn=document.documentMode);var zp=Nt&&"TextEvent"in window&&!Mn,eh=Nt&&(!Pl||Mn&&8<Mn&&11>=Mn),$c=" ",Dc=!1;function th(e,t){switch(e){case"keyup":return Dp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fr=!1;function Up(e,t){switch(e){case"compositionend":return rh(t);case"keypress":return t.which!==32?null:(Dc=!0,$c);case"textInput":return e=t.data,e===$c&&Dc?null:e;default:return null}}function Mp(e,t){if(Fr)return e==="compositionend"||!Pl&&th(e,t)?(e=Zd(),ti=Sl=Bt=null,Fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eh&&t.locale!=="ko"?null:t.data;default:return null}}var Bp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bp[e.type]:t==="textarea"}function nh(e,t,r,n){Od(n),t=xi(t,"onChange"),0<t.length&&(r=new El("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Bn=null,ss=null;function Fp(e){mh(e,0)}function Bi(e){var t=Wr(e);if(Ed(t))return e}function Vp(e,t){if(e==="change")return t}var sh=!1;if(Nt){var ba;if(Nt){var Sa="oninput"in document;if(!Sa){var Uc=document.createElement("div");Uc.setAttribute("oninput","return;"),Sa=typeof Uc.oninput=="function"}ba=Sa}else ba=!1;sh=ba&&(!document.documentMode||9<document.documentMode)}function Mc(){Bn&&(Bn.detachEvent("onpropertychange",ih),ss=Bn=null)}function ih(e){if(e.propertyName==="value"&&Bi(ss)){var t=[];nh(t,ss,e,jl(e)),zd(Fp,t)}}function qp(e,t,r){e==="focusin"?(Mc(),Bn=t,ss=r,Bn.attachEvent("onpropertychange",ih)):e==="focusout"&&Mc()}function Wp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bi(ss)}function Hp(e,t){if(e==="click")return Bi(t)}function Kp(e,t){if(e==="input"||e==="change")return Bi(t)}function Jp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ct=typeof Object.is=="function"?Object.is:Jp;function is(e,t){if(ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Za.call(t,s)||!ct(e[s],t[s]))return!1}return!0}function Bc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fc(e,t){var r=Bc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Bc(r)}}function ah(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ah(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oh(){for(var e=window,t=ui();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ui(e.document)}return t}function Tl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gp(e){var t=oh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ah(r.ownerDocument.documentElement,r)){if(n!==null&&Tl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Fc(r,i);var o=Fc(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qp=Nt&&"documentMode"in document&&11>=document.documentMode,Vr=null,vo=null,Fn=null,wo=!1;function Vc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wo||Vr==null||Vr!==ui(n)||(n=Vr,"selectionStart"in n&&Tl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fn&&is(Fn,n)||(Fn=n,n=xi(vo,"onSelect"),0<n.length&&(t=new El("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Vr)))}function zs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var qr={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionend:zs("Transition","TransitionEnd")},Ea={},lh={};Nt&&(lh=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function Fi(e){if(Ea[e])return Ea[e];if(!qr[e])return e;var t=qr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in lh)return Ea[e]=t[r];return e}var ch=Fi("animationend"),uh=Fi("animationiteration"),dh=Fi("animationstart"),hh=Fi("transitionend"),fh=new Map,qc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){fh.set(e,t),Tr(t,[e])}for(var Ca=0;Ca<qc.length;Ca++){var Pa=qc[Ca],Yp=Pa.toLowerCase(),Xp=Pa[0].toUpperCase()+Pa.slice(1);tr(Yp,"on"+Xp)}tr(ch,"onAnimationEnd");tr(uh,"onAnimationIteration");tr(dh,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(hh,"onTransitionEnd");an("onMouseEnter",["mouseout","mouseover"]);an("onMouseLeave",["mouseout","mouseover"]);an("onPointerEnter",["pointerout","pointerover"]);an("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zp=new Set("cancel close invalid load scroll toggle".split(" ").concat($n));function Wc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Ym(n,t,void 0,e),e.currentTarget=null}function mh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Wc(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Wc(s,l,u),i=c}}}if(hi)throw e=po,hi=!1,po=null,e}function J(e,t){var r=t[bo];r===void 0&&(r=t[bo]=new Set);var n=e+"__bubble";r.has(n)||(ph(t,e,2,!1),r.add(n))}function Ta(e,t,r){var n=0;t&&(n|=4),ph(r,e,n,t)}var Us="_reactListening"+Math.random().toString(36).slice(2);function as(e){if(!e[Us]){e[Us]=!0,kd.forEach(function(r){r!=="selectionchange"&&(Zp.has(r)||Ta(r,!1,e),Ta(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Us]||(t[Us]=!0,Ta("selectionchange",!1,t))}}function ph(e,t,r,n){switch(Xd(t)){case 1:var s=fp;break;case 4:s=mp;break;default:s=bl}r=s.bind(null,t,r,e),s=void 0,!mo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ra(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=pr(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}zd(function(){var u=i,d=jl(r),h=[];e:{var f=fh.get(e);if(f!==void 0){var v=El,p=e;switch(e){case"keypress":if(ri(r)===0)break e;case"keydown":case"keyup":v=Pp;break;case"focusin":p="focus",v=Na;break;case"focusout":p="blur",v=Na;break;case"beforeblur":case"afterblur":v=Na;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=xp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Lp;break;case ch:case uh:case dh:v=wp;break;case hh:v=Op;break;case"scroll":v=pp;break;case"wheel":v=$p;break;case"copy":case"cut":case"paste":v=kp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ac}var y=(t&4)!==0,k=!y&&e==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var g=u,x;g!==null;){x=g;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,m!==null&&(w=es(g,m),w!=null&&y.push(os(g,w,x)))),k)break;g=g.return}0<y.length&&(f=new v(f,p,null,r,d),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",f&&r!==ho&&(p=r.relatedTarget||r.fromElement)&&(pr(p)||p[bt]))break e;if((v||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,v?(p=r.relatedTarget||r.toElement,v=u,p=p?pr(p):null,p!==null&&(k=Rr(p),p!==k||p.tag!==5&&p.tag!==6)&&(p=null)):(v=null,p=u),v!==p)){if(y=Ic,w="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(y=Ac,w="onPointerLeave",m="onPointerEnter",g="pointer"),k=v==null?f:Wr(v),x=p==null?f:Wr(p),f=new y(w,g+"leave",v,r,d),f.target=k,f.relatedTarget=x,w=null,pr(d)===u&&(y=new y(m,g+"enter",p,r,d),y.target=x,y.relatedTarget=k,w=y),k=w,v&&p)t:{for(y=v,m=p,g=0,x=y;x;x=Or(x))g++;for(x=0,w=m;w;w=Or(w))x++;for(;0<g-x;)y=Or(y),g--;for(;0<x-g;)m=Or(m),x--;for(;g--;){if(y===m||m!==null&&y===m.alternate)break t;y=Or(y),m=Or(m)}y=null}else y=null;v!==null&&Hc(h,f,v,y,!1),p!==null&&k!==null&&Hc(h,k,p,y,!0)}}e:{if(f=u?Wr(u):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var N=Vp;else if(zc(f))if(sh)N=Kp;else{N=Wp;var j=qp}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Hp);if(N&&(N=N(e,u))){nh(h,N,r,d);break e}j&&j(e,f,u),e==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&ao(f,"number",f.value)}switch(j=u?Wr(u):window,e){case"focusin":(zc(j)||j.contentEditable==="true")&&(Vr=j,vo=u,Fn=null);break;case"focusout":Fn=vo=Vr=null;break;case"mousedown":wo=!0;break;case"contextmenu":case"mouseup":case"dragend":wo=!1,Vc(h,r,d);break;case"selectionchange":if(Qp)break;case"keydown":case"keyup":Vc(h,r,d)}var S;if(Pl)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Fr?th(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(eh&&r.locale!=="ko"&&(Fr||C!=="onCompositionStart"?C==="onCompositionEnd"&&Fr&&(S=Zd()):(Bt=d,Sl="value"in Bt?Bt.value:Bt.textContent,Fr=!0)),j=xi(u,C),0<j.length&&(C=new Oc(C,e,null,r,d),h.push({event:C,listeners:j}),S?C.data=S:(S=rh(r),S!==null&&(C.data=S)))),(S=zp?Up(e,r):Mp(e,r))&&(u=xi(u,"onBeforeInput"),0<u.length&&(d=new Oc("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=S))}mh(h,t)})}function os(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xi(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=es(e,r),i!=null&&n.unshift(os(e,i,s)),i=es(e,t),i!=null&&n.push(os(e,i,s))),e=e.return}return n}function Or(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Hc(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=es(r,i),c!=null&&o.unshift(os(r,c,l))):s||(c=es(r,i),c!=null&&o.push(os(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var e0=/\r\n?/g,t0=/\u0000|\uFFFD/g;function Kc(e){return(typeof e=="string"?e:""+e).replace(e0,`
`).replace(t0,"")}function Ms(e,t,r){if(t=Kc(t),Kc(e)!==t&&r)throw Error(E(425))}function yi(){}var jo=null,ko=null;function _o(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var No=typeof setTimeout=="function"?setTimeout:void 0,r0=typeof clearTimeout=="function"?clearTimeout:void 0,Jc=typeof Promise=="function"?Promise:void 0,n0=typeof queueMicrotask=="function"?queueMicrotask:typeof Jc<"u"?function(e){return Jc.resolve(null).then(e).catch(s0)}:No;function s0(e){setTimeout(function(){throw e})}function La(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ns(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ns(t)}function Kt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var yn=Math.random().toString(36).slice(2),ht="__reactFiber$"+yn,ls="__reactProps$"+yn,bt="__reactContainer$"+yn,bo="__reactEvents$"+yn,i0="__reactListeners$"+yn,a0="__reactHandles$"+yn;function pr(e){var t=e[ht];if(t)return t;for(var r=e.parentNode;r;){if(t=r[bt]||r[ht]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Gc(e);e!==null;){if(r=e[ht])return r;e=Gc(e)}return t}e=r,r=e.parentNode}return null}function ks(e){return e=e[ht]||e[bt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(E(33))}function Vi(e){return e[ls]||null}var So=[],Hr=-1;function rr(e){return{current:e}}function Q(e){0>Hr||(e.current=So[Hr],So[Hr]=null,Hr--)}function K(e,t){Hr++,So[Hr]=e.current,e.current=t}var er={},ke=rr(er),Le=rr(!1),kr=er;function on(e,t){var r=e.type.contextTypes;if(!r)return er;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ie(e){return e=e.childContextTypes,e!=null}function vi(){Q(Le),Q(ke)}function Qc(e,t,r){if(ke.current!==er)throw Error(E(168));K(ke,t),K(Le,r)}function gh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(E(108,qm(e)||"Unknown",s));return ee({},r,n)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,kr=ke.current,K(ke,e),K(Le,Le.current),!0}function Yc(e,t,r){var n=e.stateNode;if(!n)throw Error(E(169));r?(e=gh(e,t,kr),n.__reactInternalMemoizedMergedChildContext=e,Q(Le),Q(ke),K(ke,e)):Q(Le),K(Le,r)}var vt=null,qi=!1,Ia=!1;function xh(e){vt===null?vt=[e]:vt.push(e)}function o0(e){qi=!0,xh(e)}function nr(){if(!Ia&&vt!==null){Ia=!0;var e=0,t=W;try{var r=vt;for(W=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}vt=null,qi=!1}catch(s){throw vt!==null&&(vt=vt.slice(e+1)),Fd(kl,nr),s}finally{W=t,Ia=!1}}return null}var Kr=[],Jr=0,ji=null,ki=0,Ve=[],qe=0,_r=null,wt=1,jt="";function ur(e,t){Kr[Jr++]=ki,Kr[Jr++]=ji,ji=e,ki=t}function yh(e,t,r){Ve[qe++]=wt,Ve[qe++]=jt,Ve[qe++]=_r,_r=e;var n=wt;e=jt;var s=32-ot(n)-1;n&=~(1<<s),r+=1;var i=32-ot(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,wt=1<<32-ot(t)+s|r<<s|n,jt=i+e}else wt=1<<i|r<<s|n,jt=e}function Rl(e){e.return!==null&&(ur(e,1),yh(e,1,0))}function Ll(e){for(;e===ji;)ji=Kr[--Jr],Kr[Jr]=null,ki=Kr[--Jr],Kr[Jr]=null;for(;e===_r;)_r=Ve[--qe],Ve[qe]=null,jt=Ve[--qe],Ve[qe]=null,wt=Ve[--qe],Ve[qe]=null}var Ue=null,ze=null,Y=!1,st=null;function vh(e,t){var r=We(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Xc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ue=e,ze=Kt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ue=e,ze=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=_r!==null?{id:wt,overflow:jt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=We(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ue=e,ze=null,!0):!1;default:return!1}}function Eo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Co(e){if(Y){var t=ze;if(t){var r=t;if(!Xc(e,t)){if(Eo(e))throw Error(E(418));t=Kt(r.nextSibling);var n=Ue;t&&Xc(e,t)?vh(n,r):(e.flags=e.flags&-4097|2,Y=!1,Ue=e)}}else{if(Eo(e))throw Error(E(418));e.flags=e.flags&-4097|2,Y=!1,Ue=e}}}function Zc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ue=e}function Bs(e){if(e!==Ue)return!1;if(!Y)return Zc(e),Y=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_o(e.type,e.memoizedProps)),t&&(t=ze)){if(Eo(e))throw wh(),Error(E(418));for(;t;)vh(e,t),t=Kt(t.nextSibling)}if(Zc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ze=Kt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ze=null}}else ze=Ue?Kt(e.stateNode.nextSibling):null;return!0}function wh(){for(var e=ze;e;)e=Kt(e.nextSibling)}function ln(){ze=Ue=null,Y=!1}function Il(e){st===null?st=[e]:st.push(e)}var l0=Ct.ReactCurrentBatchConfig;function Pn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(E(309));var n=r.stateNode}if(!n)throw Error(E(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(E(284));if(!r._owner)throw Error(E(290,e))}return e}function Fs(e,t){throw e=Object.prototype.toString.call(t),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function eu(e){var t=e._init;return t(e._payload)}function jh(e){function t(m,g){if(e){var x=m.deletions;x===null?(m.deletions=[g],m.flags|=16):x.push(g)}}function r(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function n(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function s(m,g){return m=Yt(m,g),m.index=0,m.sibling=null,m}function i(m,g,x){return m.index=x,e?(x=m.alternate,x!==null?(x=x.index,x<g?(m.flags|=2,g):x):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,g,x,w){return g===null||g.tag!==6?(g=Ma(x,m.mode,w),g.return=m,g):(g=s(g,x),g.return=m,g)}function c(m,g,x,w){var N=x.type;return N===Br?d(m,g,x.props.children,w,x.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ot&&eu(N)===g.type)?(w=s(g,x.props),w.ref=Pn(m,g,x),w.return=m,w):(w=ci(x.type,x.key,x.props,null,m.mode,w),w.ref=Pn(m,g,x),w.return=m,w)}function u(m,g,x,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=Ba(x,m.mode,w),g.return=m,g):(g=s(g,x.children||[]),g.return=m,g)}function d(m,g,x,w,N){return g===null||g.tag!==7?(g=vr(x,m.mode,w,N),g.return=m,g):(g=s(g,x),g.return=m,g)}function h(m,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ma(""+g,m.mode,x),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Rs:return x=ci(g.type,g.key,g.props,null,m.mode,x),x.ref=Pn(m,null,g),x.return=m,x;case Mr:return g=Ba(g,m.mode,x),g.return=m,g;case Ot:var w=g._init;return h(m,w(g._payload),x)}if(On(g)||Nn(g))return g=vr(g,m.mode,x,null),g.return=m,g;Fs(m,g)}return null}function f(m,g,x,w){var N=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return N!==null?null:l(m,g,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Rs:return x.key===N?c(m,g,x,w):null;case Mr:return x.key===N?u(m,g,x,w):null;case Ot:return N=x._init,f(m,g,N(x._payload),w)}if(On(x)||Nn(x))return N!==null?null:d(m,g,x,w,null);Fs(m,x)}return null}function v(m,g,x,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(x)||null,l(g,m,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rs:return m=m.get(w.key===null?x:w.key)||null,c(g,m,w,N);case Mr:return m=m.get(w.key===null?x:w.key)||null,u(g,m,w,N);case Ot:var j=w._init;return v(m,g,x,j(w._payload),N)}if(On(w)||Nn(w))return m=m.get(x)||null,d(g,m,w,N,null);Fs(g,w)}return null}function p(m,g,x,w){for(var N=null,j=null,S=g,C=g=0,A=null;S!==null&&C<x.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var O=f(m,S,x[C],w);if(O===null){S===null&&(S=A);break}e&&S&&O.alternate===null&&t(m,S),g=i(O,g,C),j===null?N=O:j.sibling=O,j=O,S=A}if(C===x.length)return r(m,S),Y&&ur(m,C),N;if(S===null){for(;C<x.length;C++)S=h(m,x[C],w),S!==null&&(g=i(S,g,C),j===null?N=S:j.sibling=S,j=S);return Y&&ur(m,C),N}for(S=n(m,S);C<x.length;C++)A=v(S,m,C,x[C],w),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),g=i(A,g,C),j===null?N=A:j.sibling=A,j=A);return e&&S.forEach(function(b){return t(m,b)}),Y&&ur(m,C),N}function y(m,g,x,w){var N=Nn(x);if(typeof N!="function")throw Error(E(150));if(x=N.call(x),x==null)throw Error(E(151));for(var j=N=null,S=g,C=g=0,A=null,O=x.next();S!==null&&!O.done;C++,O=x.next()){S.index>C?(A=S,S=null):A=S.sibling;var b=f(m,S,O.value,w);if(b===null){S===null&&(S=A);break}e&&S&&b.alternate===null&&t(m,S),g=i(b,g,C),j===null?N=b:j.sibling=b,j=b,S=A}if(O.done)return r(m,S),Y&&ur(m,C),N;if(S===null){for(;!O.done;C++,O=x.next())O=h(m,O.value,w),O!==null&&(g=i(O,g,C),j===null?N=O:j.sibling=O,j=O);return Y&&ur(m,C),N}for(S=n(m,S);!O.done;C++,O=x.next())O=v(S,m,C,O.value,w),O!==null&&(e&&O.alternate!==null&&S.delete(O.key===null?C:O.key),g=i(O,g,C),j===null?N=O:j.sibling=O,j=O);return e&&S.forEach(function(ce){return t(m,ce)}),Y&&ur(m,C),N}function k(m,g,x,w){if(typeof x=="object"&&x!==null&&x.type===Br&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Rs:e:{for(var N=x.key,j=g;j!==null;){if(j.key===N){if(N=x.type,N===Br){if(j.tag===7){r(m,j.sibling),g=s(j,x.props.children),g.return=m,m=g;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ot&&eu(N)===j.type){r(m,j.sibling),g=s(j,x.props),g.ref=Pn(m,j,x),g.return=m,m=g;break e}r(m,j);break}else t(m,j);j=j.sibling}x.type===Br?(g=vr(x.props.children,m.mode,w,x.key),g.return=m,m=g):(w=ci(x.type,x.key,x.props,null,m.mode,w),w.ref=Pn(m,g,x),w.return=m,m=w)}return o(m);case Mr:e:{for(j=x.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){r(m,g.sibling),g=s(g,x.children||[]),g.return=m,m=g;break e}else{r(m,g);break}else t(m,g);g=g.sibling}g=Ba(x,m.mode,w),g.return=m,m=g}return o(m);case Ot:return j=x._init,k(m,g,j(x._payload),w)}if(On(x))return p(m,g,x,w);if(Nn(x))return y(m,g,x,w);Fs(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(r(m,g.sibling),g=s(g,x),g.return=m,m=g):(r(m,g),g=Ma(x,m.mode,w),g.return=m,m=g),o(m)):r(m,g)}return k}var cn=jh(!0),kh=jh(!1),_i=rr(null),Ni=null,Gr=null,Ol=null;function Al(){Ol=Gr=Ni=null}function $l(e){var t=_i.current;Q(_i),e._currentValue=t}function Po(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function nn(e,t){Ni=e,Ol=Gr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Re=!0),e.firstContext=null)}function Je(e){var t=e._currentValue;if(Ol!==e)if(e={context:e,memoizedValue:t,next:null},Gr===null){if(Ni===null)throw Error(E(308));Gr=e,Ni.dependencies={lanes:0,firstContext:e}}else Gr=Gr.next=e;return t}var gr=null;function Dl(e){gr===null?gr=[e]:gr.push(e)}function _h(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Dl(t)):(r.next=s.next,s.next=r),t.interleaved=r,St(e,n)}function St(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var At=!1;function zl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Jt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,V&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,St(e,r)}return s=n.interleaved,s===null?(t.next=t,Dl(n)):(t.next=s.next,s.next=t),n.interleaved=t,St(e,r)}function ni(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,_l(e,r)}}function tu(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bi(e,t,r,n){var s=e.updateQueue;At=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,v=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,y=l;switch(f=t,v=r,y.tag){case 1:if(p=y.payload,typeof p=="function"){h=p.call(v,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,f=typeof p=="function"?p.call(v,h,f):p,f==null)break e;h=ee({},h,f);break e;case 2:At=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else v={eventTime:v,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=v,c=h):d=d.next=v,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);br|=o,e.lanes=o,e.memoizedState=h}}function ru(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(E(191,s));s.call(n)}}}var _s={},mt=rr(_s),cs=rr(_s),us=rr(_s);function xr(e){if(e===_s)throw Error(E(174));return e}function Ul(e,t){switch(K(us,t),K(cs,e),K(mt,_s),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lo(t,e)}Q(mt),K(mt,t)}function un(){Q(mt),Q(cs),Q(us)}function bh(e){xr(us.current);var t=xr(mt.current),r=lo(t,e.type);t!==r&&(K(cs,e),K(mt,r))}function Ml(e){cs.current===e&&(Q(mt),Q(cs))}var X=rr(0);function Si(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oa=[];function Bl(){for(var e=0;e<Oa.length;e++)Oa[e]._workInProgressVersionPrimary=null;Oa.length=0}var si=Ct.ReactCurrentDispatcher,Aa=Ct.ReactCurrentBatchConfig,Nr=0,Z=null,oe=null,de=null,Ei=!1,Vn=!1,ds=0,c0=0;function ye(){throw Error(E(321))}function Fl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ct(e[r],t[r]))return!1;return!0}function Vl(e,t,r,n,s,i){if(Nr=i,Z=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=e===null||e.memoizedState===null?f0:m0,e=r(n,s),Vn){i=0;do{if(Vn=!1,ds=0,25<=i)throw Error(E(301));i+=1,de=oe=null,t.updateQueue=null,si.current=p0,e=r(n,s)}while(Vn)}if(si.current=Ci,t=oe!==null&&oe.next!==null,Nr=0,de=oe=Z=null,Ei=!1,t)throw Error(E(300));return e}function ql(){var e=ds!==0;return ds=0,e}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?Z.memoizedState=de=e:de=de.next=e,de}function Ge(){if(oe===null){var e=Z.alternate;e=e!==null?e.memoizedState:null}else e=oe.next;var t=de===null?Z.memoizedState:de.next;if(t!==null)de=t,oe=e;else{if(e===null)throw Error(E(310));oe=e,e={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},de===null?Z.memoizedState=de=e:de=de.next=e}return de}function hs(e,t){return typeof t=="function"?t(e):t}function $a(e){var t=Ge(),r=t.queue;if(r===null)throw Error(E(311));r.lastRenderedReducer=e;var n=oe,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Nr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Z.lanes|=d,br|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,ct(n,t.memoizedState)||(Re=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Z.lanes|=i,br|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Da(e){var t=Ge(),r=t.queue;if(r===null)throw Error(E(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);ct(i,t.memoizedState)||(Re=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Sh(){}function Eh(e,t){var r=Z,n=Ge(),s=t(),i=!ct(n.memoizedState,s);if(i&&(n.memoizedState=s,Re=!0),n=n.queue,Wl(Th.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||de!==null&&de.memoizedState.tag&1){if(r.flags|=2048,fs(9,Ph.bind(null,r,n,s,t),void 0,null),he===null)throw Error(E(349));Nr&30||Ch(r,t,s)}return s}function Ch(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Z.updateQueue,t===null?(t={lastEffect:null,stores:null},Z.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ph(e,t,r,n){t.value=r,t.getSnapshot=n,Rh(t)&&Lh(e)}function Th(e,t,r){return r(function(){Rh(t)&&Lh(e)})}function Rh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ct(e,r)}catch{return!0}}function Lh(e){var t=St(e,1);t!==null&&lt(t,e,1,-1)}function nu(e){var t=dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:e},t.queue=e,e=e.dispatch=h0.bind(null,Z,e),[t.memoizedState,e]}function fs(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Z.updateQueue,t===null?(t={lastEffect:null,stores:null},Z.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ih(){return Ge().memoizedState}function ii(e,t,r,n){var s=dt();Z.flags|=e,s.memoizedState=fs(1|t,r,void 0,n===void 0?null:n)}function Wi(e,t,r,n){var s=Ge();n=n===void 0?null:n;var i=void 0;if(oe!==null){var o=oe.memoizedState;if(i=o.destroy,n!==null&&Fl(n,o.deps)){s.memoizedState=fs(t,r,i,n);return}}Z.flags|=e,s.memoizedState=fs(1|t,r,i,n)}function su(e,t){return ii(8390656,8,e,t)}function Wl(e,t){return Wi(2048,8,e,t)}function Oh(e,t){return Wi(4,2,e,t)}function Ah(e,t){return Wi(4,4,e,t)}function $h(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dh(e,t,r){return r=r!=null?r.concat([e]):null,Wi(4,4,$h.bind(null,t,e),r)}function Hl(){}function zh(e,t){var r=Ge();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Fl(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Uh(e,t){var r=Ge();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Fl(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Mh(e,t,r){return Nr&21?(ct(r,t)||(r=Wd(),Z.lanes|=r,br|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Re=!0),e.memoizedState=r)}function u0(e,t){var r=W;W=r!==0&&4>r?r:4,e(!0);var n=Aa.transition;Aa.transition={};try{e(!1),t()}finally{W=r,Aa.transition=n}}function Bh(){return Ge().memoizedState}function d0(e,t,r){var n=Qt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Fh(e))Vh(t,r);else if(r=_h(e,t,r,n),r!==null){var s=be();lt(r,e,n,s),qh(r,t,n)}}function h0(e,t,r){var n=Qt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Fh(e))Vh(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,ct(l,o)){var c=t.interleaved;c===null?(s.next=s,Dl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=_h(e,t,s,n),r!==null&&(s=be(),lt(r,e,n,s),qh(r,t,n))}}function Fh(e){var t=e.alternate;return e===Z||t!==null&&t===Z}function Vh(e,t){Vn=Ei=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function qh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,_l(e,r)}}var Ci={readContext:Je,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},f0={readContext:Je,useCallback:function(e,t){return dt().memoizedState=[e,t===void 0?null:t],e},useContext:Je,useEffect:su,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ii(4194308,4,$h.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return ii(4,2,e,t)},useMemo:function(e,t){var r=dt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=dt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=d0.bind(null,Z,e),[n.memoizedState,e]},useRef:function(e){var t=dt();return e={current:e},t.memoizedState=e},useState:nu,useDebugValue:Hl,useDeferredValue:function(e){return dt().memoizedState=e},useTransition:function(){var e=nu(!1),t=e[0];return e=u0.bind(null,e[1]),dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Z,s=dt();if(Y){if(r===void 0)throw Error(E(407));r=r()}else{if(r=t(),he===null)throw Error(E(349));Nr&30||Ch(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,su(Th.bind(null,n,i,e),[e]),n.flags|=2048,fs(9,Ph.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=dt(),t=he.identifierPrefix;if(Y){var r=jt,n=wt;r=(n&~(1<<32-ot(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ds++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=c0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},m0={readContext:Je,useCallback:zh,useContext:Je,useEffect:Wl,useImperativeHandle:Dh,useInsertionEffect:Oh,useLayoutEffect:Ah,useMemo:Uh,useReducer:$a,useRef:Ih,useState:function(){return $a(hs)},useDebugValue:Hl,useDeferredValue:function(e){var t=Ge();return Mh(t,oe.memoizedState,e)},useTransition:function(){var e=$a(hs)[0],t=Ge().memoizedState;return[e,t]},useMutableSource:Sh,useSyncExternalStore:Eh,useId:Bh,unstable_isNewReconciler:!1},p0={readContext:Je,useCallback:zh,useContext:Je,useEffect:Wl,useImperativeHandle:Dh,useInsertionEffect:Oh,useLayoutEffect:Ah,useMemo:Uh,useReducer:Da,useRef:Ih,useState:function(){return Da(hs)},useDebugValue:Hl,useDeferredValue:function(e){var t=Ge();return oe===null?t.memoizedState=e:Mh(t,oe.memoizedState,e)},useTransition:function(){var e=Da(hs)[0],t=Ge().memoizedState;return[e,t]},useMutableSource:Sh,useSyncExternalStore:Eh,useId:Bh,unstable_isNewReconciler:!1};function tt(e,t){if(e&&e.defaultProps){t=ee({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function To(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ee({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Hi={isMounted:function(e){return(e=e._reactInternals)?Rr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=be(),s=Qt(e),i=kt(n,s);i.payload=t,r!=null&&(i.callback=r),t=Jt(e,i,s),t!==null&&(lt(t,e,s,n),ni(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=be(),s=Qt(e),i=kt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Jt(e,i,s),t!==null&&(lt(t,e,s,n),ni(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=be(),n=Qt(e),s=kt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Jt(e,s,n),t!==null&&(lt(t,e,n,r),ni(t,e,n))}};function iu(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!is(r,n)||!is(s,i):!0}function Wh(e,t,r){var n=!1,s=er,i=t.contextType;return typeof i=="object"&&i!==null?i=Je(i):(s=Ie(t)?kr:ke.current,n=t.contextTypes,i=(n=n!=null)?on(e,s):er),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hi,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function au(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Hi.enqueueReplaceState(t,t.state,null)}function Ro(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},zl(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Je(i):(i=Ie(t)?kr:ke.current,s.context=on(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(To(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Hi.enqueueReplaceState(s,s.state,null),bi(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function dn(e,t){try{var r="",n=t;do r+=Vm(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function za(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Lo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var g0=typeof WeakMap=="function"?WeakMap:Map;function Hh(e,t,r){r=kt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ti||(Ti=!0,Fo=n),Lo(e,t)},r}function Kh(e,t,r){r=kt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Lo(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Lo(e,t),typeof n!="function"&&(Gt===null?Gt=new Set([this]):Gt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function ou(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new g0;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=T0.bind(null,e,t,r),t.then(e,e))}function lu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cu(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=kt(-1,1),t.tag=2,Jt(r,t,1))),r.lanes|=1),e)}var x0=Ct.ReactCurrentOwner,Re=!1;function Ne(e,t,r,n){t.child=e===null?kh(t,null,r,n):cn(t,e.child,r,n)}function uu(e,t,r,n,s){r=r.render;var i=t.ref;return nn(t,s),n=Vl(e,t,r,n,i,s),r=ql(),e!==null&&!Re?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Et(e,t,s)):(Y&&r&&Rl(t),t.flags|=1,Ne(e,t,n,s),t.child)}function du(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!ec(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Jh(e,t,i,n,s)):(e=ci(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:is,r(o,n)&&e.ref===t.ref)return Et(e,t,s)}return t.flags|=1,e=Yt(i,n),e.ref=t.ref,e.return=t,t.child=e}function Jh(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(is(i,n)&&e.ref===t.ref)if(Re=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Re=!0);else return t.lanes=e.lanes,Et(e,t,s)}return Io(e,t,r,n,s)}function Gh(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},K(Yr,De),De|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,K(Yr,De),De|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,K(Yr,De),De|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,K(Yr,De),De|=n;return Ne(e,t,s,r),t.child}function Qh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Io(e,t,r,n,s){var i=Ie(r)?kr:ke.current;return i=on(t,i),nn(t,s),r=Vl(e,t,r,n,i,s),n=ql(),e!==null&&!Re?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Et(e,t,s)):(Y&&n&&Rl(t),t.flags|=1,Ne(e,t,r,s),t.child)}function hu(e,t,r,n,s){if(Ie(r)){var i=!0;wi(t)}else i=!1;if(nn(t,s),t.stateNode===null)ai(e,t),Wh(t,r,n),Ro(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Je(u):(u=Ie(r)?kr:ke.current,u=on(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&au(t,o,n,u),At=!1;var f=t.memoizedState;o.state=f,bi(t,n,o,s),c=t.memoizedState,l!==n||f!==c||Le.current||At?(typeof d=="function"&&(To(t,r,d,n),c=t.memoizedState),(l=At||iu(t,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Nh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:tt(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Je(c):(c=Ie(r)?kr:ke.current,c=on(t,c));var v=r.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&au(t,o,n,c),At=!1,f=t.memoizedState,o.state=f,bi(t,n,o,s);var p=t.memoizedState;l!==h||f!==p||Le.current||At?(typeof v=="function"&&(To(t,r,v,n),p=t.memoizedState),(u=At||iu(t,r,u,n,f,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Oo(e,t,r,n,i,s)}function Oo(e,t,r,n,s,i){Qh(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Yc(t,r,!1),Et(e,t,i);n=t.stateNode,x0.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=cn(t,e.child,null,i),t.child=cn(t,null,l,i)):Ne(e,t,l,i),t.memoizedState=n.state,s&&Yc(t,r,!0),t.child}function Yh(e){var t=e.stateNode;t.pendingContext?Qc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qc(e,t.context,!1),Ul(e,t.containerInfo)}function fu(e,t,r,n,s){return ln(),Il(s),t.flags|=256,Ne(e,t,r,n),t.child}var Ao={dehydrated:null,treeContext:null,retryLane:0};function $o(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xh(e,t,r){var n=t.pendingProps,s=X.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),K(X,s&1),e===null)return Co(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Gi(o,n,0,null),e=vr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=$o(r),t.memoizedState=Ao,e):Kl(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return y0(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Yt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Yt(l,i):(i=vr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?$o(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Ao,n}return i=e.child,e=i.sibling,n=Yt(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Kl(e,t){return t=Gi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vs(e,t,r,n){return n!==null&&Il(n),cn(t,e.child,null,r),e=Kl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function y0(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=za(Error(E(422))),Vs(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Gi({mode:"visible",children:n.children},s,0,null),i=vr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&cn(t,e.child,null,o),t.child.memoizedState=$o(o),t.memoizedState=Ao,i);if(!(t.mode&1))return Vs(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(E(419)),n=za(i,n,void 0),Vs(e,t,o,n)}if(l=(o&e.childLanes)!==0,Re||l){if(n=he,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,St(e,s),lt(n,e,s,-1))}return Zl(),n=za(Error(E(421))),Vs(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=R0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ze=Kt(s.nextSibling),Ue=t,Y=!0,st=null,e!==null&&(Ve[qe++]=wt,Ve[qe++]=jt,Ve[qe++]=_r,wt=e.id,jt=e.overflow,_r=t),t=Kl(t,n.children),t.flags|=4096,t)}function mu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Po(e.return,t,r)}function Ua(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Zh(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ne(e,t,n.children,r),n=X.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mu(e,r,t);else if(e.tag===19)mu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(K(X,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Si(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ua(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Si(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ua(t,!0,r,null,i);break;case"together":Ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ai(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Et(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),br|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(E(153));if(t.child!==null){for(e=t.child,r=Yt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Yt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function v0(e,t,r){switch(t.tag){case 3:Yh(t),ln();break;case 5:bh(t);break;case 1:Ie(t.type)&&wi(t);break;case 4:Ul(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;K(_i,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(K(X,X.current&1),t.flags|=128,null):r&t.child.childLanes?Xh(e,t,r):(K(X,X.current&1),e=Et(e,t,r),e!==null?e.sibling:null);K(X,X.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Zh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),K(X,X.current),n)break;return null;case 22:case 23:return t.lanes=0,Gh(e,t,r)}return Et(e,t,r)}var ef,Do,tf,rf;ef=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Do=function(){};tf=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,xr(mt.current);var i=null;switch(r){case"input":s=so(e,s),n=so(e,n),i=[];break;case"select":s=ee({},s,{value:void 0}),n=ee({},n,{value:void 0}),i=[];break;case"textarea":s=oo(e,s),n=oo(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=yi)}co(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&J("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};rf=function(e,t,r,n){r!==n&&(t.flags|=4)};function Tn(e,t){if(!Y)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ve(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function w0(e,t,r){var n=t.pendingProps;switch(Ll(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(t),null;case 1:return Ie(t.type)&&vi(),ve(t),null;case 3:return n=t.stateNode,un(),Q(Le),Q(ke),Bl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Bs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,st!==null&&(Wo(st),st=null))),Do(e,t),ve(t),null;case 5:Ml(t);var s=xr(us.current);if(r=t.type,e!==null&&t.stateNode!=null)tf(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(E(166));return ve(t),null}if(e=xr(mt.current),Bs(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ht]=t,n[ls]=i,e=(t.mode&1)!==0,r){case"dialog":J("cancel",n),J("close",n);break;case"iframe":case"object":case"embed":J("load",n);break;case"video":case"audio":for(s=0;s<$n.length;s++)J($n[s],n);break;case"source":J("error",n);break;case"img":case"image":case"link":J("error",n),J("load",n);break;case"details":J("toggle",n);break;case"input":_c(n,i),J("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},J("invalid",n);break;case"textarea":bc(n,i),J("invalid",n)}co(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ms(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ms(n.textContent,l,e),s=["children",""+l]):Xn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&J("scroll",n)}switch(r){case"input":Ls(n),Nc(n,i,!0);break;case"textarea":Ls(n),Sc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=yi)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Td(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ht]=t,e[ls]=n,ef(e,t,!1,!1),t.stateNode=e;e:{switch(o=uo(r,n),r){case"dialog":J("cancel",e),J("close",e),s=n;break;case"iframe":case"object":case"embed":J("load",e),s=n;break;case"video":case"audio":for(s=0;s<$n.length;s++)J($n[s],e);s=n;break;case"source":J("error",e),s=n;break;case"img":case"image":case"link":J("error",e),J("load",e),s=n;break;case"details":J("toggle",e),s=n;break;case"input":_c(e,n),s=so(e,n),J("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ee({},n,{value:void 0}),J("invalid",e);break;case"textarea":bc(e,n),s=oo(e,n),J("invalid",e);break;default:s=n}co(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Id(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Rd(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Zn(e,c):typeof c=="number"&&Zn(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&J("scroll",e):c!=null&&xl(e,i,c,o))}switch(r){case"input":Ls(e),Nc(e,n,!1);break;case"textarea":Ls(e),Sc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Zt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Zr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Zr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=yi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ve(t),null;case 6:if(e&&t.stateNode!=null)rf(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(E(166));if(r=xr(us.current),xr(mt.current),Bs(t)){if(n=t.stateNode,r=t.memoizedProps,n[ht]=t,(i=n.nodeValue!==r)&&(e=Ue,e!==null))switch(e.tag){case 3:Ms(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ms(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ht]=t,t.stateNode=n}return ve(t),null;case 13:if(Q(X),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Y&&ze!==null&&t.mode&1&&!(t.flags&128))wh(),ln(),t.flags|=98560,i=!1;else if(i=Bs(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(E(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[ht]=t}else ln(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ve(t),i=!1}else st!==null&&(Wo(st),st=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||X.current&1?le===0&&(le=3):Zl())),t.updateQueue!==null&&(t.flags|=4),ve(t),null);case 4:return un(),Do(e,t),e===null&&as(t.stateNode.containerInfo),ve(t),null;case 10:return $l(t.type._context),ve(t),null;case 17:return Ie(t.type)&&vi(),ve(t),null;case 19:if(Q(X),i=t.memoizedState,i===null)return ve(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Tn(i,!1);else{if(le!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Si(e),o!==null){for(t.flags|=128,Tn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return K(X,X.current&1|2),t.child}e=e.sibling}i.tail!==null&&se()>hn&&(t.flags|=128,n=!0,Tn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Si(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Tn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Y)return ve(t),null}else 2*se()-i.renderingStartTime>hn&&r!==1073741824&&(t.flags|=128,n=!0,Tn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=se(),t.sibling=null,r=X.current,K(X,n?r&1|2:r&1),t):(ve(t),null);case 22:case 23:return Xl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?De&1073741824&&(ve(t),t.subtreeFlags&6&&(t.flags|=8192)):ve(t),null;case 24:return null;case 25:return null}throw Error(E(156,t.tag))}function j0(e,t){switch(Ll(t),t.tag){case 1:return Ie(t.type)&&vi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return un(),Q(Le),Q(ke),Bl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ml(t),null;case 13:if(Q(X),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(E(340));ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Q(X),null;case 4:return un(),null;case 10:return $l(t.type._context),null;case 22:case 23:return Xl(),null;case 24:return null;default:return null}}var qs=!1,je=!1,k0=typeof WeakSet=="function"?WeakSet:Set,R=null;function Qr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){re(e,t,n)}else r.current=null}function zo(e,t,r){try{r()}catch(n){re(e,t,n)}}var pu=!1;function _0(e,t){if(jo=pi,e=oh(),Tl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var v;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)f=h,h=v;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===i&&++d===n&&(c=o),(v=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=v}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ko={focusedElem:e,selectionRange:r},pi=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,k=p.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?y:tt(t.type,y),k);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(w){re(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return p=pu,pu=!1,p}function qn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&zo(t,r,i)}s=s.next}while(s!==n)}}function Ki(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Uo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function nf(e){var t=e.alternate;t!==null&&(e.alternate=null,nf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ht],delete t[ls],delete t[bo],delete t[i0],delete t[a0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sf(e){return e.tag===5||e.tag===3||e.tag===4}function gu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yi));else if(n!==4&&(e=e.child,e!==null))for(Mo(e,t,r),e=e.sibling;e!==null;)Mo(e,t,r),e=e.sibling}function Bo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Bo(e,t,r),e=e.sibling;e!==null;)Bo(e,t,r),e=e.sibling}var me=null,rt=!1;function Lt(e,t,r){for(r=r.child;r!==null;)af(e,t,r),r=r.sibling}function af(e,t,r){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(Ui,r)}catch{}switch(r.tag){case 5:je||Qr(r,t);case 6:var n=me,s=rt;me=null,Lt(e,t,r),me=n,rt=s,me!==null&&(rt?(e=me,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):me.removeChild(r.stateNode));break;case 18:me!==null&&(rt?(e=me,r=r.stateNode,e.nodeType===8?La(e.parentNode,r):e.nodeType===1&&La(e,r),ns(e)):La(me,r.stateNode));break;case 4:n=me,s=rt,me=r.stateNode.containerInfo,rt=!0,Lt(e,t,r),me=n,rt=s;break;case 0:case 11:case 14:case 15:if(!je&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&zo(r,t,o),s=s.next}while(s!==n)}Lt(e,t,r);break;case 1:if(!je&&(Qr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){re(r,t,l)}Lt(e,t,r);break;case 21:Lt(e,t,r);break;case 22:r.mode&1?(je=(n=je)||r.memoizedState!==null,Lt(e,t,r),je=n):Lt(e,t,r);break;default:Lt(e,t,r)}}function xu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new k0),t.forEach(function(n){var s=L0.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ye(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:me=l.stateNode,rt=!1;break e;case 3:me=l.stateNode.containerInfo,rt=!0;break e;case 4:me=l.stateNode.containerInfo,rt=!0;break e}l=l.return}if(me===null)throw Error(E(160));af(i,o,s),me=null,rt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){re(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)of(t,e),t=t.sibling}function of(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ye(t,e),ut(e),n&4){try{qn(3,e,e.return),Ki(3,e)}catch(y){re(e,e.return,y)}try{qn(5,e,e.return)}catch(y){re(e,e.return,y)}}break;case 1:Ye(t,e),ut(e),n&512&&r!==null&&Qr(r,r.return);break;case 5:if(Ye(t,e),ut(e),n&512&&r!==null&&Qr(r,r.return),e.flags&32){var s=e.stateNode;try{Zn(s,"")}catch(y){re(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Cd(s,i),uo(l,o);var u=uo(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Id(s,h):d==="dangerouslySetInnerHTML"?Rd(s,h):d==="children"?Zn(s,h):xl(s,d,h,u)}switch(l){case"input":io(s,i);break;case"textarea":Pd(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Zr(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?Zr(s,!!i.multiple,i.defaultValue,!0):Zr(s,!!i.multiple,i.multiple?[]:"",!1))}s[ls]=i}catch(y){re(e,e.return,y)}}break;case 6:if(Ye(t,e),ut(e),n&4){if(e.stateNode===null)throw Error(E(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){re(e,e.return,y)}}break;case 3:if(Ye(t,e),ut(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ns(t.containerInfo)}catch(y){re(e,e.return,y)}break;case 4:Ye(t,e),ut(e);break;case 13:Ye(t,e),ut(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ql=se())),n&4&&xu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(je=(u=je)||d,Ye(t,e),je=u):Ye(t,e),ut(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(R=e,d=e.child;d!==null;){for(h=R=d;R!==null;){switch(f=R,v=f.child,f.tag){case 0:case 11:case 14:case 15:qn(4,f,f.return);break;case 1:Qr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){re(n,r,y)}}break;case 5:Qr(f,f.return);break;case 22:if(f.memoizedState!==null){vu(h);continue}}v!==null?(v.return=f,R=v):vu(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ld("display",o))}catch(y){re(e,e.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){re(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ye(t,e),ut(e),n&4&&xu(e);break;case 21:break;default:Ye(t,e),ut(e)}}function ut(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(sf(r)){var n=r;break e}r=r.return}throw Error(E(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Zn(s,""),n.flags&=-33);var i=gu(e);Bo(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=gu(e);Mo(e,l,o);break;default:throw Error(E(161))}}catch(c){re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function N0(e,t,r){R=e,lf(e)}function lf(e,t,r){for(var n=(e.mode&1)!==0;R!==null;){var s=R,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||qs;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||je;l=qs;var u=je;if(qs=o,(je=c)&&!u)for(R=s;R!==null;)o=R,c=o.child,o.tag===22&&o.memoizedState!==null?wu(s):c!==null?(c.return=o,R=c):wu(s);for(;i!==null;)R=i,lf(i),i=i.sibling;R=s,qs=l,je=u}yu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,R=i):yu(e)}}function yu(e){for(;R!==null;){var t=R;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:je||Ki(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!je)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&ru(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ru(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ns(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}je||t.flags&512&&Uo(t)}catch(f){re(t,t.return,f)}}if(t===e){R=null;break}if(r=t.sibling,r!==null){r.return=t.return,R=r;break}R=t.return}}function vu(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var r=t.sibling;if(r!==null){r.return=t.return,R=r;break}R=t.return}}function wu(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ki(4,t)}catch(c){re(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){re(t,s,c)}}var i=t.return;try{Uo(t)}catch(c){re(t,i,c)}break;case 5:var o=t.return;try{Uo(t)}catch(c){re(t,o,c)}}}catch(c){re(t,t.return,c)}if(t===e){R=null;break}var l=t.sibling;if(l!==null){l.return=t.return,R=l;break}R=t.return}}var b0=Math.ceil,Pi=Ct.ReactCurrentDispatcher,Jl=Ct.ReactCurrentOwner,He=Ct.ReactCurrentBatchConfig,V=0,he=null,ae=null,pe=0,De=0,Yr=rr(0),le=0,ms=null,br=0,Ji=0,Gl=0,Wn=null,Pe=null,Ql=0,hn=1/0,xt=null,Ti=!1,Fo=null,Gt=null,Ws=!1,Ft=null,Ri=0,Hn=0,Vo=null,oi=-1,li=0;function be(){return V&6?se():oi!==-1?oi:oi=se()}function Qt(e){return e.mode&1?V&2&&pe!==0?pe&-pe:l0.transition!==null?(li===0&&(li=Wd()),li):(e=W,e!==0||(e=window.event,e=e===void 0?16:Xd(e.type)),e):1}function lt(e,t,r,n){if(50<Hn)throw Hn=0,Vo=null,Error(E(185));ws(e,r,n),(!(V&2)||e!==he)&&(e===he&&(!(V&2)&&(Ji|=r),le===4&&Ut(e,pe)),Oe(e,n),r===1&&V===0&&!(t.mode&1)&&(hn=se()+500,qi&&nr()))}function Oe(e,t){var r=e.callbackNode;lp(e,t);var n=mi(e,e===he?pe:0);if(n===0)r!==null&&Pc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Pc(r),t===1)e.tag===0?o0(ju.bind(null,e)):xh(ju.bind(null,e)),n0(function(){!(V&6)&&nr()}),r=null;else{switch(Hd(n)){case 1:r=kl;break;case 4:r=Vd;break;case 16:r=fi;break;case 536870912:r=qd;break;default:r=fi}r=gf(r,cf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function cf(e,t){if(oi=-1,li=0,V&6)throw Error(E(327));var r=e.callbackNode;if(sn()&&e.callbackNode!==r)return null;var n=mi(e,e===he?pe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Li(e,n);else{t=n;var s=V;V|=2;var i=df();(he!==e||pe!==t)&&(xt=null,hn=se()+500,yr(e,t));do try{C0();break}catch(l){uf(e,l)}while(!0);Al(),Pi.current=i,V=s,ae!==null?t=0:(he=null,pe=0,t=le)}if(t!==0){if(t===2&&(s=go(e),s!==0&&(n=s,t=qo(e,s))),t===1)throw r=ms,yr(e,0),Ut(e,n),Oe(e,se()),r;if(t===6)Ut(e,n);else{if(s=e.current.alternate,!(n&30)&&!S0(s)&&(t=Li(e,n),t===2&&(i=go(e),i!==0&&(n=i,t=qo(e,i))),t===1))throw r=ms,yr(e,0),Ut(e,n),Oe(e,se()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(E(345));case 2:dr(e,Pe,xt);break;case 3:if(Ut(e,n),(n&130023424)===n&&(t=Ql+500-se(),10<t)){if(mi(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){be(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=No(dr.bind(null,e,Pe,xt),t);break}dr(e,Pe,xt);break;case 4:if(Ut(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ot(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=se()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*b0(n/1960))-n,10<n){e.timeoutHandle=No(dr.bind(null,e,Pe,xt),n);break}dr(e,Pe,xt);break;case 5:dr(e,Pe,xt);break;default:throw Error(E(329))}}}return Oe(e,se()),e.callbackNode===r?cf.bind(null,e):null}function qo(e,t){var r=Wn;return e.current.memoizedState.isDehydrated&&(yr(e,t).flags|=256),e=Li(e,t),e!==2&&(t=Pe,Pe=r,t!==null&&Wo(t)),e}function Wo(e){Pe===null?Pe=e:Pe.push.apply(Pe,e)}function S0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ct(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ut(e,t){for(t&=~Gl,t&=~Ji,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function ju(e){if(V&6)throw Error(E(327));sn();var t=mi(e,0);if(!(t&1))return Oe(e,se()),null;var r=Li(e,t);if(e.tag!==0&&r===2){var n=go(e);n!==0&&(t=n,r=qo(e,n))}if(r===1)throw r=ms,yr(e,0),Ut(e,t),Oe(e,se()),r;if(r===6)throw Error(E(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,dr(e,Pe,xt),Oe(e,se()),null}function Yl(e,t){var r=V;V|=1;try{return e(t)}finally{V=r,V===0&&(hn=se()+500,qi&&nr())}}function Sr(e){Ft!==null&&Ft.tag===0&&!(V&6)&&sn();var t=V;V|=1;var r=He.transition,n=W;try{if(He.transition=null,W=1,e)return e()}finally{W=n,He.transition=r,V=t,!(V&6)&&nr()}}function Xl(){De=Yr.current,Q(Yr)}function yr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,r0(r)),ae!==null)for(r=ae.return;r!==null;){var n=r;switch(Ll(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&vi();break;case 3:un(),Q(Le),Q(ke),Bl();break;case 5:Ml(n);break;case 4:un();break;case 13:Q(X);break;case 19:Q(X);break;case 10:$l(n.type._context);break;case 22:case 23:Xl()}r=r.return}if(he=e,ae=e=Yt(e.current,null),pe=De=t,le=0,ms=null,Gl=Ji=br=0,Pe=Wn=null,gr!==null){for(t=0;t<gr.length;t++)if(r=gr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}gr=null}return e}function uf(e,t){do{var r=ae;try{if(Al(),si.current=Ci,Ei){for(var n=Z.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ei=!1}if(Nr=0,de=oe=Z=null,Vn=!1,ds=0,Jl.current=null,r===null||r.return===null){le=1,ms=t,ae=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=pe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=lu(o);if(v!==null){v.flags&=-257,cu(v,o,l,i,t),v.mode&1&&ou(i,u,t),t=v,c=u;var p=t.updateQueue;if(p===null){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}else{if(!(t&1)){ou(i,u,t),Zl();break e}c=Error(E(426))}}else if(Y&&l.mode&1){var k=lu(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),cu(k,o,l,i,t),Il(dn(c,l));break e}}i=c=dn(c,l),le!==4&&(le=2),Wn===null?Wn=[i]:Wn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=Hh(i,c,t);tu(i,m);break e;case 1:l=c;var g=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Gt===null||!Gt.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Kh(i,l,t);tu(i,w);break e}}i=i.return}while(i!==null)}ff(r)}catch(N){t=N,ae===r&&r!==null&&(ae=r=r.return);continue}break}while(!0)}function df(){var e=Pi.current;return Pi.current=Ci,e===null?Ci:e}function Zl(){(le===0||le===3||le===2)&&(le=4),he===null||!(br&268435455)&&!(Ji&268435455)||Ut(he,pe)}function Li(e,t){var r=V;V|=2;var n=df();(he!==e||pe!==t)&&(xt=null,yr(e,t));do try{E0();break}catch(s){uf(e,s)}while(!0);if(Al(),V=r,Pi.current=n,ae!==null)throw Error(E(261));return he=null,pe=0,le}function E0(){for(;ae!==null;)hf(ae)}function C0(){for(;ae!==null&&!Zm();)hf(ae)}function hf(e){var t=pf(e.alternate,e,De);e.memoizedProps=e.pendingProps,t===null?ff(e):ae=t,Jl.current=null}function ff(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=j0(r,t),r!==null){r.flags&=32767,ae=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{le=6,ae=null;return}}else if(r=w0(r,t,De),r!==null){ae=r;return}if(t=t.sibling,t!==null){ae=t;return}ae=t=e}while(t!==null);le===0&&(le=5)}function dr(e,t,r){var n=W,s=He.transition;try{He.transition=null,W=1,P0(e,t,r,n)}finally{He.transition=s,W=n}return null}function P0(e,t,r,n){do sn();while(Ft!==null);if(V&6)throw Error(E(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(E(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(cp(e,i),e===he&&(ae=he=null,pe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ws||(Ws=!0,gf(fi,function(){return sn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=He.transition,He.transition=null;var o=W;W=1;var l=V;V|=4,Jl.current=null,_0(e,r),of(r,e),Gp(ko),pi=!!jo,ko=jo=null,e.current=r,N0(r),ep(),V=l,W=o,He.transition=i}else e.current=r;if(Ws&&(Ws=!1,Ft=e,Ri=s),i=e.pendingLanes,i===0&&(Gt=null),np(r.stateNode),Oe(e,se()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ti)throw Ti=!1,e=Fo,Fo=null,e;return Ri&1&&e.tag!==0&&sn(),i=e.pendingLanes,i&1?e===Vo?Hn++:(Hn=0,Vo=e):Hn=0,nr(),null}function sn(){if(Ft!==null){var e=Hd(Ri),t=He.transition,r=W;try{if(He.transition=null,W=16>e?16:e,Ft===null)var n=!1;else{if(e=Ft,Ft=null,Ri=0,V&6)throw Error(E(331));var s=V;for(V|=4,R=e.current;R!==null;){var i=R,o=i.child;if(R.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(R=u;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:qn(8,d,i)}var h=d.child;if(h!==null)h.return=d,R=h;else for(;R!==null;){d=R;var f=d.sibling,v=d.return;if(nf(d),d===u){R=null;break}if(f!==null){f.return=v,R=f;break}R=v}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var k=y.sibling;y.sibling=null,y=k}while(y!==null)}}R=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,R=o;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qn(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,R=m;break e}R=i.return}}var g=e.current;for(R=g;R!==null;){o=R;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,R=x;else e:for(o=g;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ki(9,l)}}catch(N){re(l,l.return,N)}if(l===o){R=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,R=w;break e}R=l.return}}if(V=s,nr(),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(Ui,e)}catch{}n=!0}return n}finally{W=r,He.transition=t}}return!1}function ku(e,t,r){t=dn(r,t),t=Hh(e,t,1),e=Jt(e,t,1),t=be(),e!==null&&(ws(e,1,t),Oe(e,t))}function re(e,t,r){if(e.tag===3)ku(e,e,r);else for(;t!==null;){if(t.tag===3){ku(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Gt===null||!Gt.has(n))){e=dn(r,e),e=Kh(t,e,1),t=Jt(t,e,1),e=be(),t!==null&&(ws(t,1,e),Oe(t,e));break}}t=t.return}}function T0(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=be(),e.pingedLanes|=e.suspendedLanes&r,he===e&&(pe&r)===r&&(le===4||le===3&&(pe&130023424)===pe&&500>se()-Ql?yr(e,0):Gl|=r),Oe(e,t)}function mf(e,t){t===0&&(e.mode&1?(t=As,As<<=1,!(As&130023424)&&(As=4194304)):t=1);var r=be();e=St(e,t),e!==null&&(ws(e,t,r),Oe(e,r))}function R0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),mf(e,r)}function L0(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(E(314))}n!==null&&n.delete(t),mf(e,r)}var pf;pf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Le.current)Re=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Re=!1,v0(e,t,r);Re=!!(e.flags&131072)}else Re=!1,Y&&t.flags&1048576&&yh(t,ki,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ai(e,t),e=t.pendingProps;var s=on(t,ke.current);nn(t,r),s=Vl(null,t,n,e,s,r);var i=ql();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ie(n)?(i=!0,wi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zl(t),s.updater=Hi,t.stateNode=s,s._reactInternals=t,Ro(t,n,e,r),t=Oo(null,t,n,!0,i,r)):(t.tag=0,Y&&i&&Rl(t),Ne(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ai(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=O0(n),e=tt(n,e),s){case 0:t=Io(null,t,n,e,r);break e;case 1:t=hu(null,t,n,e,r);break e;case 11:t=uu(null,t,n,e,r);break e;case 14:t=du(null,t,n,tt(n.type,e),r);break e}throw Error(E(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),Io(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),hu(e,t,n,s,r);case 3:e:{if(Yh(t),e===null)throw Error(E(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Nh(e,t),bi(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=dn(Error(E(423)),t),t=fu(e,t,n,r,s);break e}else if(n!==s){s=dn(Error(E(424)),t),t=fu(e,t,n,r,s);break e}else for(ze=Kt(t.stateNode.containerInfo.firstChild),Ue=t,Y=!0,st=null,r=kh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ln(),n===s){t=Et(e,t,r);break e}Ne(e,t,n,r)}t=t.child}return t;case 5:return bh(t),e===null&&Co(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,_o(n,s)?o=null:i!==null&&_o(n,i)&&(t.flags|=32),Qh(e,t),Ne(e,t,o,r),t.child;case 6:return e===null&&Co(t),null;case 13:return Xh(e,t,r);case 4:return Ul(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=cn(t,null,n,r):Ne(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),uu(e,t,n,s,r);case 7:return Ne(e,t,t.pendingProps,r),t.child;case 8:return Ne(e,t,t.pendingProps.children,r),t.child;case 12:return Ne(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,K(_i,n._currentValue),n._currentValue=o,i!==null)if(ct(i.value,o)){if(i.children===s.children&&!Le.current){t=Et(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=kt(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Po(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(E(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Po(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ne(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,nn(t,r),s=Je(s),n=n(s),t.flags|=1,Ne(e,t,n,r),t.child;case 14:return n=t.type,s=tt(n,t.pendingProps),s=tt(n.type,s),du(e,t,n,s,r);case 15:return Jh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),ai(e,t),t.tag=1,Ie(n)?(e=!0,wi(t)):e=!1,nn(t,r),Wh(t,n,s),Ro(t,n,s,r),Oo(null,t,n,!0,e,r);case 19:return Zh(e,t,r);case 22:return Gh(e,t,r)}throw Error(E(156,t.tag))};function gf(e,t){return Fd(e,t)}function I0(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function We(e,t,r,n){return new I0(e,t,r,n)}function ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function O0(e){if(typeof e=="function")return ec(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vl)return 11;if(e===wl)return 14}return 2}function Yt(e,t){var r=e.alternate;return r===null?(r=We(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ci(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")ec(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Br:return vr(r.children,s,i,t);case yl:o=8,s|=8;break;case eo:return e=We(12,r,t,s|2),e.elementType=eo,e.lanes=i,e;case to:return e=We(13,r,t,s),e.elementType=to,e.lanes=i,e;case ro:return e=We(19,r,t,s),e.elementType=ro,e.lanes=i,e;case bd:return Gi(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _d:o=10;break e;case Nd:o=9;break e;case vl:o=11;break e;case wl:o=14;break e;case Ot:o=16,n=null;break e}throw Error(E(130,e==null?e:typeof e,""))}return t=We(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function vr(e,t,r,n){return e=We(7,e,n,t),e.lanes=r,e}function Gi(e,t,r,n){return e=We(22,e,n,t),e.elementType=bd,e.lanes=r,e.stateNode={isHidden:!1},e}function Ma(e,t,r){return e=We(6,e,null,t),e.lanes=r,e}function Ba(e,t,r){return t=We(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function A0(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ja(0),this.expirationTimes=ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ja(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tc(e,t,r,n,s,i,o,l,c){return e=new A0(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=We(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zl(i),e}function $0(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function xf(e){if(!e)return er;e=e._reactInternals;e:{if(Rr(e)!==e||e.tag!==1)throw Error(E(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ie(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(E(171))}if(e.tag===1){var r=e.type;if(Ie(r))return gh(e,r,t)}return t}function yf(e,t,r,n,s,i,o,l,c){return e=tc(r,n,!0,e,s,i,o,l,c),e.context=xf(null),r=e.current,n=be(),s=Qt(r),i=kt(n,s),i.callback=t??null,Jt(r,i,s),e.current.lanes=s,ws(e,s,n),Oe(e,n),e}function Qi(e,t,r,n){var s=t.current,i=be(),o=Qt(s);return r=xf(r),t.context===null?t.context=r:t.pendingContext=r,t=kt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Jt(s,t,o),e!==null&&(lt(e,s,o,i),ni(e,s,o)),o}function Ii(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _u(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function rc(e,t){_u(e,t),(e=e.alternate)&&_u(e,t)}function D0(){return null}var vf=typeof reportError=="function"?reportError:function(e){console.error(e)};function nc(e){this._internalRoot=e}Yi.prototype.render=nc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(E(409));Qi(e,t,null,null)};Yi.prototype.unmount=nc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sr(function(){Qi(null,e,null,null)}),t[bt]=null}};function Yi(e){this._internalRoot=e}Yi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<zt.length&&t!==0&&t<zt[r].priority;r++);zt.splice(r,0,e),r===0&&Yd(e)}};function sc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nu(){}function z0(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Ii(o);i.call(u)}}var o=yf(t,n,e,0,null,!1,!1,"",Nu);return e._reactRootContainer=o,e[bt]=o.current,as(e.nodeType===8?e.parentNode:e),Sr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Ii(c);l.call(u)}}var c=tc(e,0,!1,null,null,!1,!1,"",Nu);return e._reactRootContainer=c,e[bt]=c.current,as(e.nodeType===8?e.parentNode:e),Sr(function(){Qi(t,c,r,n)}),c}function Zi(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ii(o);l.call(c)}}Qi(t,o,e,s)}else o=z0(r,t,e,s,n);return Ii(o)}Kd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=An(t.pendingLanes);r!==0&&(_l(t,r|1),Oe(t,se()),!(V&6)&&(hn=se()+500,nr()))}break;case 13:Sr(function(){var n=St(e,1);if(n!==null){var s=be();lt(n,e,1,s)}}),rc(e,1)}};Nl=function(e){if(e.tag===13){var t=St(e,134217728);if(t!==null){var r=be();lt(t,e,134217728,r)}rc(e,134217728)}};Jd=function(e){if(e.tag===13){var t=Qt(e),r=St(e,t);if(r!==null){var n=be();lt(r,e,t,n)}rc(e,t)}};Gd=function(){return W};Qd=function(e,t){var r=W;try{return W=e,t()}finally{W=r}};fo=function(e,t,r){switch(t){case"input":if(io(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Vi(n);if(!s)throw Error(E(90));Ed(n),io(n,s)}}}break;case"textarea":Pd(e,r);break;case"select":t=r.value,t!=null&&Zr(e,!!r.multiple,t,!1)}};$d=Yl;Dd=Sr;var U0={usingClientEntryPoint:!1,Events:[ks,Wr,Vi,Od,Ad,Yl]},Rn={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M0={bundleType:Rn.bundleType,version:Rn.version,rendererPackageName:Rn.rendererPackageName,rendererConfig:Rn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ct.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Md(e),e===null?null:e.stateNode},findFiberByHostInstance:Rn.findFiberByHostInstance||D0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hs.isDisabled&&Hs.supportsFiber)try{Ui=Hs.inject(M0),ft=Hs}catch{}}Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U0;Be.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sc(t))throw Error(E(200));return $0(e,t,null,r)};Be.createRoot=function(e,t){if(!sc(e))throw Error(E(299));var r=!1,n="",s=vf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=tc(e,1,!1,null,null,r,!1,n,s),e[bt]=t.current,as(e.nodeType===8?e.parentNode:e),new nc(t)};Be.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=Md(t),e=e===null?null:e.stateNode,e};Be.flushSync=function(e){return Sr(e)};Be.hydrate=function(e,t,r){if(!Xi(t))throw Error(E(200));return Zi(null,e,t,!0,r)};Be.hydrateRoot=function(e,t,r){if(!sc(e))throw Error(E(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=vf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=yf(t,null,e,1,r??null,s,!1,i,o),e[bt]=t.current,as(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Yi(t)};Be.render=function(e,t,r){if(!Xi(t))throw Error(E(200));return Zi(null,e,t,!1,r)};Be.unmountComponentAtNode=function(e){if(!Xi(e))throw Error(E(40));return e._reactRootContainer?(Sr(function(){Zi(null,null,e,!1,function(){e._reactRootContainer=null,e[bt]=null})}),!0):!1};Be.unstable_batchedUpdates=Yl;Be.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xi(r))throw Error(E(200));if(e==null||e._reactInternals===void 0)throw Error(E(38));return Zi(e,t,r,!1,n)};Be.version="18.3.1-next-f1338f8080-20240426";function wf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wf)}catch(e){console.error(e)}}wf(),vd.exports=Be;var B0=vd.exports,jf,bu=B0;jf=bu.createRoot,bu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ps(){return ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ps.apply(this,arguments)}var Vt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Vt||(Vt={}));const Su="popstate";function F0(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return Ho("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Oi(s)}return q0(t,r,null,e)}function ie(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function kf(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function V0(){return Math.random().toString(36).substr(2,8)}function Eu(e,t){return{usr:e.state,key:e.key,idx:t}}function Ho(e,t,r,n){return r===void 0&&(r=null),ps({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?vn(t):t,{state:r,key:t&&t.key||n||V0()})}function Oi(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function vn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function q0(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Vt.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(ps({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Vt.Pop;let k=d(),m=k==null?null:k-u;u=k,c&&c({action:l,location:y.location,delta:m})}function f(k,m){l=Vt.Push;let g=Ho(y.location,k,m);u=d()+1;let x=Eu(g,u),w=y.createHref(g);try{o.pushState(x,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(w)}i&&c&&c({action:l,location:y.location,delta:1})}function v(k,m){l=Vt.Replace;let g=Ho(y.location,k,m);u=d();let x=Eu(g,u),w=y.createHref(g);o.replaceState(x,"",w),i&&c&&c({action:l,location:y.location,delta:0})}function p(k){let m=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof k=="string"?k:Oi(k);return g=g.replace(/ $/,"%20"),ie(m,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,m)}let y={get action(){return l},get location(){return e(s,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Su,h),c=k,()=>{s.removeEventListener(Su,h),c=null}},createHref(k){return t(s,k)},createURL:p,encodeLocation(k){let m=p(k);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:v,go(k){return o.go(k)}};return y}var Cu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Cu||(Cu={}));function W0(e,t,r){return r===void 0&&(r="/"),H0(e,t,r,!1)}function H0(e,t,r,n){let s=typeof t=="string"?vn(t):t,i=ic(s.pathname||"/",r);if(i==null)return null;let o=_f(e);K0(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=sg(i);l=rg(o[c],u,n)}return l}function _f(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ie(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Xt([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(ie(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),_f(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:eg(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Nf(i.path))s(i,o,c)}),t}function Nf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Nf(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function K0(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:tg(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const J0=/^:[\w-]+$/,G0=3,Q0=2,Y0=1,X0=10,Z0=-2,Pu=e=>e==="*";function eg(e,t){let r=e.split("/"),n=r.length;return r.some(Pu)&&(n+=Z0),t&&(n+=Q0),r.filter(s=>!Pu(s)).reduce((s,i)=>s+(J0.test(i)?G0:i===""?Y0:X0),n)}function tg(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function rg(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Tu({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Tu({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Xt([i,h.pathname]),pathnameBase:lg(Xt([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Xt([i,h.pathnameBase]))}return o}function Tu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ng(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:v}=d;if(f==="*"){let y=l[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const p=l[h];return v&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function ng(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),kf(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function sg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return kf(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ic(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function ig(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?vn(e):e;return{pathname:r?r.startsWith("/")?r:ag(r,t):t,search:cg(n),hash:ug(s)}}function ag(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Fa(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function og(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ac(e,t){let r=og(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function oc(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=vn(e):(s=ps({},e),ie(!s.pathname||!s.pathname.includes("?"),Fa("?","pathname","search",s)),ie(!s.pathname||!s.pathname.includes("#"),Fa("#","pathname","hash",s)),ie(!s.search||!s.search.includes("#"),Fa("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=ig(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Xt=e=>e.join("/").replace(/\/\/+/g,"/"),lg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),cg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ug=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const bf=["post","put","patch","delete"];new Set(bf);const hg=["get",...bf];new Set(hg);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gs(){return gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gs.apply(this,arguments)}const lc=_.createContext(null),fg=_.createContext(null),sr=_.createContext(null),ea=_.createContext(null),Pt=_.createContext({outlet:null,matches:[],isDataRoute:!1}),Sf=_.createContext(null);function mg(e,t){let{relative:r}=t===void 0?{}:t;wn()||ie(!1);let{basename:n,navigator:s}=_.useContext(sr),{hash:i,pathname:o,search:l}=Pf(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Xt([n,o])),s.createHref({pathname:c,search:l,hash:i})}function wn(){return _.useContext(ea)!=null}function ir(){return wn()||ie(!1),_.useContext(ea).location}function Ef(e){_.useContext(sr).static||_.useLayoutEffect(e)}function Tt(){let{isDataRoute:e}=_.useContext(Pt);return e?Eg():pg()}function pg(){wn()||ie(!1);let e=_.useContext(lc),{basename:t,future:r,navigator:n}=_.useContext(sr),{matches:s}=_.useContext(Pt),{pathname:i}=ir(),o=JSON.stringify(ac(s,r.v7_relativeSplatPath)),l=_.useRef(!1);return Ef(()=>{l.current=!0}),_.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=oc(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Xt([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,i,e])}function Cf(){let{matches:e}=_.useContext(Pt),t=e[e.length-1];return t?t.params:{}}function Pf(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=_.useContext(sr),{matches:s}=_.useContext(Pt),{pathname:i}=ir(),o=JSON.stringify(ac(s,n.v7_relativeSplatPath));return _.useMemo(()=>oc(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function gg(e,t){return xg(e,t)}function xg(e,t,r,n){wn()||ie(!1);let{navigator:s}=_.useContext(sr),{matches:i}=_.useContext(Pt),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ir(),d;if(t){var h;let k=typeof t=="string"?vn(t):t;c==="/"||(h=k.pathname)!=null&&h.startsWith(c)||ie(!1),d=k}else d=u;let f=d.pathname||"/",v=f;if(c!=="/"){let k=c.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(k.length).join("/")}let p=W0(e,{pathname:v}),y=kg(p&&p.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Xt([c,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:Xt([c,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,r,n);return t&&y?_.createElement(ea.Provider,{value:{location:gs({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Vt.Pop}},y):y}function yg(){let e=Sg(),t=dg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:s},r):null,null)}const vg=_.createElement(yg,null);class wg extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?_.createElement(Pt.Provider,{value:this.props.routeContext},_.createElement(Sf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jg(e){let{routeContext:t,match:r,children:n}=e,s=_.useContext(lc);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(Pt.Provider,{value:t},n)}function kg(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||ie(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:v}=r,p=h.route.loader&&f[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let v,p=!1,y=null,k=null;r&&(v=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||vg,c&&(u<0&&f===0?(p=!0,k=null):u===f&&(p=!0,k=h.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,f+1)),g=()=>{let x;return v?x=y:p?x=k:h.route.Component?x=_.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=d,_.createElement(jg,{match:h,routeContext:{outlet:d,matches:m,isDataRoute:r!=null},children:x})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(wg,{location:r.location,revalidation:r.revalidation,component:y,error:v,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var Tf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Tf||{}),Ai=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ai||{});function _g(e){let t=_.useContext(lc);return t||ie(!1),t}function Ng(e){let t=_.useContext(fg);return t||ie(!1),t}function bg(e){let t=_.useContext(Pt);return t||ie(!1),t}function Rf(e){let t=bg(),r=t.matches[t.matches.length-1];return r.route.id||ie(!1),r.route.id}function Sg(){var e;let t=_.useContext(Sf),r=Ng(Ai.UseRouteError),n=Rf(Ai.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Eg(){let{router:e}=_g(Tf.UseNavigateStable),t=Rf(Ai.UseNavigateStable),r=_.useRef(!1);return Ef(()=>{r.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,gs({fromRouteId:t},i)))},[e,t])}function Cg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function $t(e){let{to:t,replace:r,state:n,relative:s}=e;wn()||ie(!1);let{future:i,static:o}=_.useContext(sr),{matches:l}=_.useContext(Pt),{pathname:c}=ir(),u=Tt(),d=oc(t,ac(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return _.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function fe(e){ie(!1)}function Pg(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Vt.Pop,navigator:i,static:o=!1,future:l}=e;wn()&&ie(!1);let c=t.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:i,static:o,future:gs({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=vn(n));let{pathname:d="/",search:h="",hash:f="",state:v=null,key:p="default"}=n,y=_.useMemo(()=>{let k=ic(d,c);return k==null?null:{location:{pathname:k,search:h,hash:f,state:v,key:p},navigationType:s}},[c,d,h,f,v,p,s]);return y==null?null:_.createElement(sr.Provider,{value:u},_.createElement(ea.Provider,{children:r,value:y}))}function Tg(e){let{children:t,location:r}=e;return gg(Ko(t),r)}new Promise(()=>{});function Ko(e,t){t===void 0&&(t=[]);let r=[];return _.Children.forEach(e,(n,s)=>{if(!_.isValidElement(n))return;let i=[...t,s];if(n.type===_.Fragment){r.push.apply(r,Ko(n.props.children,i));return}n.type!==fe&&ie(!1),!n.props.index||!n.props.children||ie(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ko(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jo(){return Jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jo.apply(this,arguments)}function Rg(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Lg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ig(e,t){return e.button===0&&(!t||t==="_self")&&!Lg(e)}const Og=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ag="6";try{window.__reactRouterVersion=Ag}catch{}const $g="startTransition",Ru=Tm[$g];function Dg(e){let{basename:t,children:r,future:n,window:s}=e,i=_.useRef();i.current==null&&(i.current=F0({window:s,v5Compat:!0}));let o=i.current,[l,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=_.useCallback(h=>{u&&Ru?Ru(()=>c(h)):c(h)},[c,u]);return _.useLayoutEffect(()=>o.listen(d),[o,d]),_.useEffect(()=>Cg(n),[n]),_.createElement(Pg,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const zg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ug=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,te=_.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=Rg(t,Og),{basename:v}=_.useContext(sr),p,y=!1;if(typeof u=="string"&&Ug.test(u)&&(p=u,zg))try{let x=new URL(window.location.href),w=u.startsWith("//")?new URL(x.protocol+u):new URL(u),N=ic(w.pathname,v);w.origin===x.origin&&N!=null?u=N+w.search+w.hash:y=!0}catch{}let k=mg(u,{relative:s}),m=Mg(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function g(x){n&&n(x),x.defaultPrevented||m(x)}return _.createElement("a",Jo({},f,{href:p||k,onClick:y||i?n:g,ref:r,target:c}))});var Lu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Lu||(Lu={}));var Iu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Iu||(Iu={}));function Mg(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Tt(),u=ir(),d=Pf(e,{relative:o});return _.useCallback(h=>{if(Ig(h,r)){h.preventDefault();let f=n!==void 0?n:Oi(u)===Oi(d);c(e,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),U=(e,t)=>{const r=_.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>_.createElement("svg",{ref:d,...Bg,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Fg(e)}`,l].join(" "),...u},[...t.map(([h,f])=>_.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=U("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=U("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=U("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=U("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=U("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=U("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=U("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=U("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=U("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=U("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=U("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=U("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=U("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=U("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=U("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=U("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=U("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=U("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=U("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=U("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=U("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=U("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=U("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=U("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=U("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=U("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=U("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=U("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=U("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=U("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=U("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=U("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=U("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=U("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=U("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=U("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=U("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=U("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=U("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),tx={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5pb21kcGlpZ3NiaXlsc2ZqdWZ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE1MzY5MzcsImV4cCI6MjA2NzExMjkzN30.R311THlEgmgJVeYatxCaWX9wUJr4jJm4kPUK_7l1QKs",VITE_SUPABASE_URL:"https://niomdpiigsbiylsfjufv.supabase.co"},Ou=e=>{let t;const r=new Set,n=(d,h)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const v=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(p=>p(t,v))}},s=()=>t,c={setState:n,getState:s,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(tx?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,s,c);return c},rx=e=>e?Ou(e):Ou;var $f={exports:{}},Df={},zf={exports:{}},Uf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fn=_;function nx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sx=typeof Object.is=="function"?Object.is:nx,ix=fn.useState,ax=fn.useEffect,ox=fn.useLayoutEffect,lx=fn.useDebugValue;function cx(e,t){var r=t(),n=ix({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return ox(function(){s.value=r,s.getSnapshot=t,Va(s)&&i({inst:s})},[e,r,t]),ax(function(){return Va(s)&&i({inst:s}),e(function(){Va(s)&&i({inst:s})})},[e]),lx(r),r}function Va(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sx(e,r)}catch{return!0}}function ux(e,t){return t()}var dx=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ux:cx;Uf.useSyncExternalStore=fn.useSyncExternalStore!==void 0?fn.useSyncExternalStore:dx;zf.exports=Uf;var hx=zf.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=_,fx=hx;function mx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var px=typeof Object.is=="function"?Object.is:mx,gx=fx.useSyncExternalStore,xx=ra.useRef,yx=ra.useEffect,vx=ra.useMemo,wx=ra.useDebugValue;Df.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=xx(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=vx(function(){function c(v){if(!u){if(u=!0,d=v,v=n(v),s!==void 0&&o.hasValue){var p=o.value;if(s(p,v))return h=p}return h=v}if(p=h,px(d,v))return p;var y=n(v);return s!==void 0&&s(p,y)?(d=v,p):(d=v,h=y)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,s]);var l=gx(e,i[0],i[1]);return yx(function(){o.hasValue=!0,o.value=l},[l]),wx(l),l};$f.exports=Df;var jx=$f.exports;const kx=od(jx),Mf={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5pb21kcGlpZ3NiaXlsc2ZqdWZ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE1MzY5MzcsImV4cCI6MjA2NzExMjkzN30.R311THlEgmgJVeYatxCaWX9wUJr4jJm4kPUK_7l1QKs",VITE_SUPABASE_URL:"https://niomdpiigsbiylsfjufv.supabase.co"},{useDebugValue:_x}=ml,{useSyncExternalStoreWithSelector:Nx}=kx;let Au=!1;const bx=e=>e;function Sx(e,t=bx,r){(Mf?"production":void 0)!=="production"&&r&&!Au&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Au=!0);const n=Nx(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return _x(n),n}const $u=e=>{(Mf?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?rx(e):e,r=(n,s)=>Sx(t,n,s);return Object.assign(r,t),r},na=e=>e?$u(e):$u,Pr=[{id:1,name:"1er - Louvre"},{id:2,name:"2e - Bourse"},{id:3,name:"3e - Temple"},{id:4,name:"4e - Htel-de-Ville"},{id:5,name:"5e - Panthon"},{id:6,name:"6e - Luxembourg"},{id:7,name:"7e - Palais-Bourbon"},{id:8,name:"8e - lyse"},{id:9,name:"9e - Opra"},{id:10,name:"10e - Entrept"},{id:11,name:"11e - Popincourt"},{id:12,name:"12e - Reuilly"},{id:13,name:"13e - Gobelins"},{id:14,name:"14e - Observatoire"},{id:15,name:"15e - Vaugirard"},{id:16,name:"16e - Passy"},{id:17,name:"17e - Batignolles-Monceau"},{id:18,name:"18e - Butte-Montmartre"},{id:19,name:"19e - Buttes-Chaumont"},{id:20,name:"20e - Mnilmontant"}],sa=["Plomberie","lectricit","Serrurerie","Couverture","Chauffage","Menuiserie","Maonnerie","Peinture","Vitrerie","Climatisation"],mn=[{value:"low",label:"Faible",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},{value:"medium",label:"Moyenne",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},{value:"high",label:"leve",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},{value:"critical",label:"Critique",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}],at=e=>({id:e.id,email:e.email,firstName:e.first_name,lastName:e.last_name,phone:e.phone,company:e.company,role:e.role,isVerified:e.is_verified,isCertified:e.is_certified??void 0,createdAt:new Date(e.created_at),arrondissements:e.arrondissements??void 0,trades:e.trades??void 0,rating:e.rating??void 0,completedProjects:e.completed_projects??void 0,avatar:e.avatar??void 0,bankDetails:e.bank_details_iban?{iban:e.bank_details_iban,bic:e.bank_details_bic||"",accountHolder:e.bank_details_account_holder||""}:void 0}),qa=e=>({id:e.id,title:e.title,description:e.description,address:e.address,arrondissement:e.arrondissement,trade:e.trade,maxBudget:e.max_budget,status:e.status,createdBy:e.created_by,createdAt:new Date(e.created_at),photos:e.photos||[],urgencyLevel:e.urgency_level,acceptedProposalId:e.accepted_proposal_id??void 0}),Wa=e=>({id:e.id,emergencyId:e.emergency_id,artisanId:e.artisan_id,artisanName:e.artisan_name,artisanCompany:e.artisan_company,artisanRating:e.artisan_rating||0,price:e.price,description:e.description,estimatedDuration:e.estimated_duration,status:e.status,createdAt:new Date(e.created_at)}),Du=e=>({id:e.id,emergencyId:e.emergency_id,proposalId:e.proposal_id,gestionnaire:e.gestionnaire?at(e.gestionnaire):{},artisan:e.artisan?at(e.artisan):{},title:e.title,description:e.description,address:e.address,price:e.price,status:e.status,startDate:e.start_date?new Date(e.start_date):void 0,completedDate:e.completed_date?new Date(e.completed_date):void 0,photos:{before:e.photos_before||[],during:e.photos_during||[],after:e.photos_after||[]},timeline:[],rating:e.rating??void 0,review:e.review??void 0}),zu=e=>({id:e.id,type:e.type,message:e.message,author:e.author,timestamp:new Date(e.timestamp),photos:e.photos??void 0}),Uu=e=>({id:e.id,projectId:e.project_id,senderId:e.sender_id,senderName:e.sender_name,message:e.message,timestamp:new Date(e.timestamp),photos:e.photos??void 0,isRead:e.is_read}),Mu=e=>({id:e.id,projectId:e.project_id,artisanId:e.artisan_id,gestionnaireId:e.gestionnaire_id,amount:e.amount,status:e.status,invoiceUrl:e.invoice_url??void 0,createdAt:new Date(e.created_at),processedAt:e.processed_at?new Date(e.processed_at):void 0,description:e.description}),Ex="modulepreload",Cx=function(e){return"/"+e},Bu={},Ns=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Cx(c),c in Bu)return;Bu[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Ex,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,v)=>{h.addEventListener("load",f),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Px=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ns(async()=>{const{default:n}=await Promise.resolve().then(()=>jn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class hc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Tx extends hc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Fu extends hc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Vu extends hc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var rl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(rl||(rl={}));var Rx=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Lx{constructor(t,{headers:r={},customFetch:n,region:s=rl.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Px(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Rx(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(y=>{throw new Tx(y)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Fu(h);if(!h.ok)throw new Vu(h);let v=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return v==="application/json"?p=yield h.json():v==="application/octet-stream"?p=yield h.blob():v==="text/event-stream"?p=h:v==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof Vu||s instanceof Fu?s.context:void 0}}})}}var Te={},fc={},ia={},bs={},aa={},oa={},Ix=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pn=Ix();const Ox=pn.fetch,Bf=pn.fetch.bind(pn),Ff=pn.Headers,Ax=pn.Request,$x=pn.Response,jn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ff,Request:Ax,Response:$x,default:Bf,fetch:Ox},Symbol.toStringTag,{value:"Module"})),Dx=mm(jn);var la={};Object.defineProperty(la,"__esModule",{value:!0});let zx=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};la.default=zx;var Vf=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oa,"__esModule",{value:!0});const Ux=Vf(Dx),Mx=Vf(la);let Bx=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Ux.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,h=null,f=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=m:d=JSON.parse(m))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),k=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&k&&k.length>1&&(h=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,v="OK")}catch{i.status===404&&y===""?(f=204,v="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,v="OK"),u&&this.shouldThrowOnError)throw new Mx.default(u)}return{error:u,data:d,count:h,status:f,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};oa.default=Bx;var Fx=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(aa,"__esModule",{value:!0});const Vx=Fx(oa);let qx=class extends Vx.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};aa.default=qx;var Wx=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bs,"__esModule",{value:!0});const Hx=Wx(aa);let Kx=class extends Hx.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};bs.default=Kx;var Jx=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ia,"__esModule",{value:!0});const Ln=Jx(bs);let Gx=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Ln.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ln.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ln.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Ln.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ln.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ia.default=Gx;var ca={},ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.version=void 0;ua.version="0.0.0-automated";Object.defineProperty(ca,"__esModule",{value:!0});ca.DEFAULT_HEADERS=void 0;const Qx=ua;ca.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Qx.version}`};var qf=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fc,"__esModule",{value:!0});const Yx=qf(ia),Xx=qf(bs),Zx=ca;let ey=class Wf{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Zx.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new Yx.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Wf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Xx.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};fc.default=ey;var kn=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Te,"__esModule",{value:!0});Te.PostgrestError=Te.PostgrestBuilder=Te.PostgrestTransformBuilder=Te.PostgrestFilterBuilder=Te.PostgrestQueryBuilder=Te.PostgrestClient=void 0;const Hf=kn(fc);Te.PostgrestClient=Hf.default;const Kf=kn(ia);Te.PostgrestQueryBuilder=Kf.default;const Jf=kn(bs);Te.PostgrestFilterBuilder=Jf.default;const Gf=kn(aa);Te.PostgrestTransformBuilder=Gf.default;const Qf=kn(oa);Te.PostgrestBuilder=Qf.default;const Yf=kn(la);Te.PostgrestError=Yf.default;var ty=Te.default={PostgrestClient:Hf.default,PostgrestQueryBuilder:Kf.default,PostgrestFilterBuilder:Jf.default,PostgrestTransformBuilder:Gf.default,PostgrestBuilder:Qf.default,PostgrestError:Yf.default};const{PostgrestClient:ry,PostgrestQueryBuilder:mw,PostgrestFilterBuilder:pw,PostgrestTransformBuilder:gw,PostgrestBuilder:xw,PostgrestError:yw}=ty;function ny(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const sy=ny(),iy="2.11.15",ay=`realtime-js/${iy}`,oy="1.0.0",Xf=1e4,ly=1e3;var Jn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Jn||(Jn={}));var we;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(we||(we={}));var nt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(nt||(nt={}));var nl;(function(e){e.websocket="websocket"})(nl||(nl={}));var mr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(mr||(mr={}));class cy{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Zf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var H;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(H||(H={}));const qu=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=uy(o,e,t,s),i),{})},uy=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?em(i,o):sl(o)},em=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return my(t,r)}switch(e){case H.bool:return dy(t);case H.float4:case H.float8:case H.int2:case H.int4:case H.int8:case H.numeric:case H.oid:return hy(t);case H.json:case H.jsonb:return fy(t);case H.timestamp:return py(t);case H.abstime:case H.date:case H.daterange:case H.int4range:case H.int8range:case H.money:case H.reltime:case H.text:case H.time:case H.timestamptz:case H.timetz:case H.tsrange:case H.tstzrange:return sl(t);default:return sl(t)}},sl=e=>e,dy=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},hy=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},fy=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},my=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>em(t,l))}return e},py=e=>typeof e=="string"?e.replace(" ","T"):e,tm=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Ha{constructor(t,r,n={},s=Xf){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Wu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Wu||(Wu={}));class Gn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Gn.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Gn.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(k=>k.presence_ref),v=h.map(k=>k.presence_ref),p=d.filter(k=>v.indexOf(k.presence_ref)<0),y=h.filter(k=>f.indexOf(k.presence_ref)<0);p.length>0&&(l[u]=p),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(v=>v.presence_ref),f=d.filter(v=>h.indexOf(v.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Hu||(Hu={}));var Ku;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ku||(Ku={}));var yt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yt||(yt={}));class mc{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=we.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ha(this,nt.join,this.params,this.timeout),this.rejoinTimer=new Zf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=we.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=we.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Gn(this),this.broadcastEndpointURL=tm(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==we.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(yt.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(yt.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(yt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,v=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,p=[];for(let y=0;y<v;y++){const k=f[y],{filter:{event:m,schema:g,table:x,filter:w}}=k,N=d&&d[y];if(N&&N.event===m&&N.schema===g&&N.table===x&&N.filter===w)p.push(Object.assign(Object.assign({},k),{id:N.id}));else{this.unsubscribe(),this.state=we.errored,t==null||t(yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(yt.SUBSCRIBED);return}}).receive("error",d=>{this.state=we.errored,t==null||t(yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=we.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Ha(this,nt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ha(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=nt;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var p,y,k;return((p=v.filter)===null||p===void 0?void 0:p.event)==="*"||((k=(y=v.filter)===null||y===void 0?void 0:y.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(v=>v.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var p,y,k,m,g,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const w=v.id,N=(p=v.filter)===null||p===void 0?void 0:p.event;return w&&((y=r.ids)===null||y===void 0?void 0:y.includes(w))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const w=(g=(m=v==null?void 0:v.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:y,table:k,commit_timestamp:m,type:g,errors:x}=p;f=Object.assign(Object.assign({},{schema:y,table:k,commit_timestamp:m,eventType:g,new:{},old:{},errors:x}),this._getPayloadRecords(p))}v.callback(f,n)})}_isClosed(){return this.state===we.closed}_isJoined(){return this.state===we.joined}_isJoining(){return this.state===we.joining}_isLeaving(){return this.state===we.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&mc.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(nt.close,{},t)}_onError(t){this._on(nt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=we.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=qu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=qu(t.columns,t.old_record)),r}}const Ju=()=>{},gy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xy{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xf,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ju,this.ref=0,this.logger=Ju,this.conn=null,this.sendBuffer=[],this.serializer=new cy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Ns(async()=>{const{default:c}=await Promise.resolve().then(()=>jn);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${nl.websocket}`,this.httpEndpoint=tm(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Zf(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=sy),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:oy}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Jn.connecting:return mr.Connecting;case Jn.open:return mr.Open;case Jn.closing:return mr.Closing;default:return mr.Closed}}isConnected(){return this.connectionState()===mr.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new mc(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:ay};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(nt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(ly,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(nt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([gy],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class pc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ue(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class yy extends pc{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class il extends pc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var vy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const rm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ns(async()=>{const{default:n}=await Promise.resolve().then(()=>jn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},wy=()=>vy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ns(()=>Promise.resolve().then(()=>jn),void 0)).Response:Response}),al=e=>{if(Array.isArray(e))return e.map(r=>al(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=al(n)}),t};var Lr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ka=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jy=(e,t,r)=>Lr(void 0,void 0,void 0,function*(){const n=yield wy();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new yy(Ka(s),e.status||500))}).catch(s=>{t(new il(Ka(s),s))}):t(new il(Ka(e),e))}),ky=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function Ss(e,t,r,n,s,i){return Lr(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,ky(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>jy(c,l,n))})})}function $i(e,t,r,n){return Lr(this,void 0,void 0,function*(){return Ss(e,"GET",t,r,n)})}function Dt(e,t,r,n,s){return Lr(this,void 0,void 0,function*(){return Ss(e,"POST",t,n,s,r)})}function _y(e,t,r,n,s){return Lr(this,void 0,void 0,function*(){return Ss(e,"PUT",t,n,s,r)})}function Ny(e,t,r,n){return Lr(this,void 0,void 0,function*(){return Ss(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function nm(e,t,r,n,s){return Lr(this,void 0,void 0,function*(){return Ss(e,"DELETE",t,n,s,r)})}var Ce=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const by={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sy{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=rm(s)}uploadOrUpdate(t,r,n,s){return Ce(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Gu),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(ue(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Ce(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Gu.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(ue(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ce(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Dt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new pc("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ce(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Ce(this,void 0,void 0,function*(){try{return{data:{path:(yield Dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Ce(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Dt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Ce(this,void 0,void 0,function*(){try{const s=yield Dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}download(t,r){return Ce(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield $i(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ue(l))return{data:null,error:l};throw l}})}info(t){return Ce(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield $i(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:al(n),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}exists(t){return Ce(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Ny(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ue(n)&&n instanceof il){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield nm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ce(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},by),r),{prefix:t||""});return{data:yield Dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Ey="2.7.1",Cy={"X-Client-Info":`storage-js/${Ey}`};var Ar=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Py{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},Cy),r),this.fetch=rm(n)}listBuckets(){return Ar(this,void 0,void 0,function*(){try{return{data:yield $i(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ue(t))return{data:null,error:t};throw t}})}getBucket(t){return Ar(this,void 0,void 0,function*(){try{return{data:yield $i(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Ar(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Ar(this,void 0,void 0,function*(){try{return{data:yield _y(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ar(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ar(this,void 0,void 0,function*(){try{return{data:yield nm(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}}class Ty extends Py{constructor(t,r={},n){super(t,r,n)}from(t){return new Sy(this.url,this.headers,t,this.fetch)}}const Ry="2.50.3";let Dn="";typeof Deno<"u"?Dn="deno":typeof document<"u"?Dn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dn="react-native":Dn="node";const Ly={"X-Client-Info":`supabase-js-${Dn}/${Ry}`},Iy={headers:Ly},Oy={schema:"public"},Ay={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$y={};var Dy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const zy=e=>{let t;return e?t=e:typeof fetch>"u"?t=Bf:t=fetch,(...r)=>t(...r)},Uy=()=>typeof Headers>"u"?Ff:Headers,My=(e,t,r)=>{const n=zy(r),s=Uy();return(i,o)=>Dy(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var By=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function Fy(e){return e.endsWith("/")?e:e+"/"}function Vy(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>By(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const sm="2.70.0",Ur=30*1e3,ol=3,Ja=ol*Ur,qy="http://localhost:9999",Wy="supabase.auth.token",Hy={"X-Client-Info":`gotrue-js/${sm}`},ll="X-Supabase-Api-Version",im={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ky=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jy=6e5;class gc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function D(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Gy extends gc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Qy(e){return D(e)&&e.name==="AuthApiError"}class am extends gc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ar extends gc{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class It extends ar{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yy(e){return D(e)&&e.name==="AuthSessionMissingError"}class Ks extends ar{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Js extends ar{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Gs extends ar{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Xy(e){return D(e)&&e.name==="AuthImplicitGrantRedirectError"}class Qu extends ar{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cl extends ar{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ga(e){return D(e)&&e.name==="AuthRetryableFetchError"}class Yu extends ar{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Qn extends ar{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xu=` 	
\r=`.split(""),Zy=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xu.length;t+=1)e[Xu[t].charCodeAt(0)]=-2;for(let t=0;t<Di.length;t+=1)e[Di[t].charCodeAt(0)]=t;return e})();function Zu(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Di[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Di[n]),t.queuedBits-=6}}function om(e,t,r){const n=Zy[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ed(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{rv(o,n,r)};for(let o=0;o<e.length;o+=1)om(e.charCodeAt(o),s,i);return t.join("")}function ev(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function tv(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}ev(n,t)}}function rv(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function nv(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)om(e.charCodeAt(s),r,n);return new Uint8Array(t)}function sv(e){const t=[];return tv(e,r=>t.push(r)),new Uint8Array(t)}function iv(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Zu(s,r,n)),Zu(null,r,n),t.join("")}function av(e){return Math.round(Date.now()/1e3)+e}function ov(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const et=()=>typeof window<"u"&&typeof document<"u",cr={tested:!1,writable:!1},Yn=()=>{if(!et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cr.tested)return cr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),cr.tested=!0,cr.writable=!0}catch{cr.tested=!0,cr.writable=!1}return cr.writable};function lv(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const lm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ns(async()=>{const{default:n}=await Promise.resolve().then(()=>jn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},cv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",cm=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Qs=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ys=async(e,t)=>{await e.removeItem(t)};class da{constructor(){this.promise=new da.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}da.promiseConstructor=Promise;function Qa(e){const t=e.split(".");if(t.length!==3)throw new Qn("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Ky.test(t[n]))throw new Qn("JWT not in base64url format");return{header:JSON.parse(ed(t[0])),payload:JSON.parse(ed(t[1])),signature:nv(t[2]),raw:{header:t[0],payload:t[1]}}}async function uv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function dv(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function hv(e){return("0"+e.toString(16)).substr(-2)}function fv(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,hv).join("")}async function mv(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function pv(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await mv(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $r(e,t,r=!1){const n=fv();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await cm(e,`${t}-code-verifier`,s);const i=await pv(n);return[i,n===i?"plain":"s256"]}const gv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xv(e){const t=e.headers.get(ll);if(!t||!t.match(gv))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function yv(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function vv(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Dr(e){if(!wv.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var jv=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const hr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kv=[502,503,504];async function td(e){var t;if(!cv(e))throw new cl(hr(e),0);if(kv.includes(e.status))throw new cl(hr(e),e.status);let r;try{r=await e.json()}catch(i){throw new am(hr(i),i)}let n;const s=xv(e);if(s&&s.getTime()>=im["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Yu(hr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new It}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Yu(hr(r),e.status,r.weak_password.reasons);throw new Gy(hr(r),e.status||500,n)}const _v=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function M(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[ll]||(i[ll]=im["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Nv(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Nv(e,t,r,n,s,i){const o=_v(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new cl(hr(c),0)}if(l.ok||await td(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await td(c)}}function gt(e){var t;let r=null;Cv(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=av(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function rd(e){const t=gt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Mt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function bv(e){return{data:e,error:null}}function Sv(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=jv(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Ev(e){return e}function Cv(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ya=["global","local","others"];var Pv=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Tv{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=lm(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Ya[0]){if(Ya.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ya.join(", ")}`);try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Mt})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Pv(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Sv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(D(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Mt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ev});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(p.split(";")[1].split("=")[1]);u[`${k}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(D(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Dr(t);try{return await M(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Mt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Dr(t);try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Mt})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Dr(t);try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Mt})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Dr(t.userId);try{const{data:r,error:n}=await M(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(D(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Dr(t.userId),Dr(t.id);try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}}const Rv={getItem:e=>Yn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Yn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Yn()&&globalThis.localStorage.removeItem(e)}};function nd(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Lv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zr={debug:!!(globalThis&&Yn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class um extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Iv extends um{}async function Ov(e,t,r){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),zr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Iv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(zr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Lv();const Av={url:qy,storageKey:Wy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Hy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function sd(e,t,r){return await r()}class ys{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ys.nextInstanceID,ys.nextInstanceID+=1,this.instanceID>0&&et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Av),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Tv({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=lm(s.fetch),this.lock=s.lock||sd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:et()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Ov:this.lock=sd,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Yn()?this.storage=Rv:(this.memoryStorage={},this.storage=nd(this.memoryStorage)):(this.memoryStorage={},this.storage=nd(this.memoryStorage)),et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${sm}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=lv(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),et()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Xy(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return D(r)?{error:r}:{error:new am("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:gt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let v=null,p=null;this.flowType==="pkce"&&([v,p]=await $r(this.storage,this.storageKey)),i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:p},xform:gt})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:gt})}else throw new Js("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:rd})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:rd})}else throw new Js("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ks}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,f,v;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:k,wallet:m,statement:g,options:x}=t;let w;if(et())if(typeof m=="object")w=m;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))w=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=m}const N=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const j=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),g?{statement:g}:null));let S;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")S=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)S=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),y=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${N.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const j=await w.signMessage(new TextEncoder().encode(p),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=j}}try{const{data:k,error:m}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:iv(y)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:gt});if(m)throw m;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Ks}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:m})}catch(k){if(D(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const r=await Qs(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:gt});if(await Ys(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ks}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(D(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:gt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ks}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await $r(this.storage,this.storageKey));const{error:h}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Js("You must provide either an email or phone number.")}catch(l){if(D(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:gt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(D(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await $r(this.storage,this.storageKey)),await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:bv})}catch(i){if(D(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new It;const{error:s}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await M(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await M(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Js("You must provide either an email or phone number and a type")}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Qs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ja:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Mt}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new It}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Mt})})}catch(r){if(D(r))return Yy(r)&&(await this._removeSession(),await Ys(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new It;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await $r(this.storage,this.storageKey));const{data:u,error:d}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Mt});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new It;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Qa(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(D(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new It;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!et())throw new Gs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Gs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Qu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Qu("No code detected.");const{data:g,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Gs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const v=f-d;v*1e3<=Ur&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const p=f-h;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,d);const{data:y,error:k}=await this._getUser(i);if(k)throw k;const m={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(n){if(D(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Qs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Qy(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ys(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=ov(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await $r(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(D(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return et()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(D(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await dv(async s=>(s>0&&await uv(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:gt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Ga(i)&&Date.now()+o-n<Ur})}catch(n){if(this._debug(r,"error",n),D(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),et()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Qs(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ja;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Ja}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Ga(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new It;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new da;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new It;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),D(i)){const o={session:null,error:i};return Ga(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await cm(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Ys(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ur);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Ur);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ur}ms, refresh threshold is ${ol} ticks`),s<=ol&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof um)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await $r(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await M(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await M(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await M(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(D(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await M(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(D(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Qa(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+Jy>Date.now()))return n;const{data:s,error:i}=await M(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Qn("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===t),!n)throw new Qn("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:v,error:p}=await this.getSession();if(p||!v.session)return{data:null,error:p};n=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Qa(n);if(yv(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const u=vv(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,sv(`${l}.${c}`)))throw new Qn("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}}ys.nextInstanceID=0;const $v=ys;class Dv extends $v{constructor(t){super(t)}}var zv=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Uv{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Fy(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Oy,realtime:$y,auth:Object.assign(Object.assign({},Ay),{storageKey:u}),global:Iy},h=Vy(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=My(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new ry(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Lx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ty(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return zv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dv({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new xy(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Mv=(e,t,r)=>new Uv(e,t,r),Bv="https://niomdpiigsbiylsfjufv.supabase.co",Fv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5pb21kcGlpZ3NiaXlsc2ZqdWZ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE1MzY5MzcsImV4cCI6MjA2NzExMjkzN30.R311THlEgmgJVeYatxCaWX9wUJr4jJm4kPUK_7l1QKs",I=Mv(Bv,Fv,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Xa=async e=>{const{data:t,error:r}=await I.from("users").select("*").eq("id",e).single();if(r)throw r;return t},xe=na((e,t)=>({user:null,isAuthenticated:!1,isLoading:!1,login:async(r,n)=>{e({isLoading:!0});try{const{data:s,error:i}=await I.auth.signInWithPassword({email:r,password:n});if(i)return console.error("Login error:",i),e({isLoading:!1}),!1;if(!s.user)return e({isLoading:!1}),!1;try{const o=await Xa(s.user.id),l=at(o);return e({user:l,isAuthenticated:!0,isLoading:!1}),localStorage.setItem("mano-pro-user",JSON.stringify(l)),!0}catch(o){return console.error("Error fetching user profile:",o),e({isLoading:!1}),!1}}catch(s){return console.error("Login error:",s),e({isLoading:!1}),!1}},logout:async()=>{try{await I.auth.signOut()}catch(r){console.error("Logout error:",r)}e({user:null,isAuthenticated:!1}),localStorage.removeItem("mano-pro-user")},register:async r=>{e({isLoading:!0});try{const{data:n,error:s}=await I.auth.signUp({email:r.email,password:r.password});if(s||!n.user)return console.error("Erreur cration auth.user :",s),e({isLoading:!1}),!1;const i=n.user.id,{error:o}=await I.from("users").upsert({id:i,email:r.email,first_name:r.firstName,last_name:r.lastName,phone:r.phone,company:r.company,role:r.role,is_verified:!1,is_certified:r.role==="artisan"?!1:null,created_at:new Date().toISOString(),arrondissements:r.arrondissements||[],trades:r.trades||[],completed_projects:0});if(o)return console.error("Erreur insertion dans `users` :",o),await I.auth.signOut(),e({isLoading:!1}),!1;const l=await Xa(i),c=at(l);return e({user:c,isAuthenticated:!0,isLoading:!1}),localStorage.setItem("mano-pro-user",JSON.stringify(c)),!0}catch(n){return console.error("Erreur gnrale register :",n),e({isLoading:!1}),!1}},updateUser:async r=>{e({isLoading:!0});const n=t().user;if(!n)return e({isLoading:!1}),!1;try{const s={};r.firstName&&(s.first_name=r.firstName),r.lastName&&(s.last_name=r.lastName),r.phone&&(s.phone=r.phone),r.company&&(s.company=r.company),r.arrondissements&&(s.arrondissements=r.arrondissements),r.trades&&(s.trades=r.trades),r.bankDetails&&(s.bank_details_iban=r.bankDetails.iban,s.bank_details_bic=r.bankDetails.bic,s.bank_details_account_holder=r.bankDetails.accountHolder);const{error:i}=await I.from("users").update(s).eq("id",n.id);if(i)return console.error("Update user error:",i),e({isLoading:!1}),!1;const o={...n,...r};return e({user:o,isLoading:!1}),localStorage.setItem("mano-pro-user",JSON.stringify(o)),!0}catch(s){return console.error("Update user error:",s),e({isLoading:!1}),!1}},setUser:r=>{e({user:r,isAuthenticated:!!r})},initializeAuth:async()=>{try{const{data:{session:r}}=await I.auth.getSession();if(r!=null&&r.user){const n=await Xa(r.user.id),s=at(n);e({user:s,isAuthenticated:!0}),localStorage.setItem("mano-pro-user",JSON.stringify(s))}}catch(r){console.error("Initialize auth error:",r),localStorage.removeItem("mano-pro-user"),e({user:null,isAuthenticated:!1})}}}));I.auth.onAuthStateChange(async(e,t)=>{e==="SIGNED_OUT"||!t?(xe.getState().setUser(null),localStorage.removeItem("mano-pro-user")):e==="SIGNED_IN"&&t.user});xe.getState().initializeAuth();const dm=na(e=>({isDark:!0,toggleTheme:()=>e(t=>{const r=!t.isDark;return localStorage.setItem("mano-pro-theme",r?"dark":"light"),document.documentElement.classList.toggle("dark",r),{isDark:r}}),setTheme:t=>{localStorage.setItem("mano-pro-theme",t?"dark":"light"),document.documentElement.classList.toggle("dark",t),e({isDark:t})}})),id=localStorage.getItem("mano-pro-theme"),Vv=id?id==="dark":!0;dm.getState().setTheme(Vv);function hm(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=hm(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Es(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=hm(e))&&(n&&(n+=" "),n+=t);return n}const L=({variant:e="primary",size:t="md",isLoading:r=!1,className:n,children:s,disabled:i,...o})=>{const l="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500 dark:bg-blue-500 dark:hover:bg-blue-600",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-900 focus:ring-gray-500 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-100",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500 dark:bg-red-500 dark:hover:bg-red-600",ghost:"hover:bg-gray-100 text-gray-700 focus:ring-gray-500 dark:hover:bg-gray-800 dark:text-gray-300"},u={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return a.jsxs("button",{className:Es(l,c[e],u[t],n),disabled:i||r,...o,children:[r&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]})},qv=()=>{const{user:e,logout:t}=xe(),{isDark:r,toggleTheme:n}=dm(),s=Tt(),[i,o]=ml.useState(!1),l=()=>{t(),s("/login")},c=u=>{switch(u){case"admin":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"artisan":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"gestionnaire":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return a.jsx("header",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs(te,{to:"/",className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-teal-600 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"MP"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Mano-Pro"})]}),a.jsx("nav",{className:"hidden md:flex items-center space-x-6",children:e&&a.jsxs(a.Fragment,{children:[a.jsx(te,{to:"/dashboard",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Dashboard"}),e.role==="gestionnaire"&&a.jsxs(a.Fragment,{children:[a.jsx(te,{to:"/emergencies",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Mes Urgences"}),a.jsx(te,{to:"/create-emergency",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Nouvelle Urgence"})]}),e.role==="artisan"&&a.jsxs(a.Fragment,{children:[a.jsx(te,{to:"/projects",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Mes Projets"}),a.jsx(te,{to:"/opportunities",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Opportunits"}),a.jsx(te,{to:"/payments",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Paiements"})]}),e.role==="admin"&&a.jsxs(a.Fragment,{children:[a.jsx(te,{to:"/admin/users",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Utilisateurs"}),a.jsx(te,{to:"/admin/certifications",className:"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Certifications"})]})]})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(L,{variant:"ghost",size:"sm",onClick:n,className:"p-2",children:r?a.jsx(Xg,{className:"h-5 w-5"}):a.jsx(Jg,{className:"h-5 w-5"})}),e?a.jsxs("div",{className:"relative",children:[a.jsxs(L,{variant:"ghost",onClick:()=>o(!i),className:"flex items-center space-x-2",children:[a.jsx(pt,{className:"h-5 w-5"}),a.jsx("span",{className:"hidden sm:block",children:e.firstName}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c(e.role)}`,children:e.role})]}),i&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50",children:[a.jsxs(te,{to:"/profile",className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>o(!1),children:[a.jsx(Qg,{className:"h-4 w-4 mr-2"}),"Profil"]}),a.jsxs("button",{onClick:l,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx(Hg,{className:"h-4 w-4 mr-2"}),"Dconnexion"]})]})]}):a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(te,{to:"/login",children:a.jsx(L,{variant:"ghost",size:"sm",children:"Connexion"})}),a.jsx(te,{to:"/register",children:a.jsx(L,{size:"sm",children:"Inscription"})})]}),a.jsx(L,{variant:"ghost",size:"sm",className:"md:hidden p-2",onClick:()=>o(!i),children:a.jsx(Kg,{className:"h-5 w-5"})})]})]})})})},Xe=({children:e})=>a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[a.jsx(qv,{}),a.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]}),Ze=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,user:n}=xe(),s=ir();return r?t&&n&&!t.includes(n.role)?a.jsx($t,{to:"/dashboard",replace:!0}):a.jsx(a.Fragment,{children:e}):a.jsx($t,{to:"/login",state:{from:s},replace:!0})},z=({children:e,className:t,padding:r="md",hover:n=!1})=>{const s={none:"",sm:"p-4",md:"p-6",lg:"p-8"};return a.jsx("div",{className:Es("bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",n&&"hover:shadow-md transition-shadow duration-200",s[r],t),children:e})},Wv=()=>{const e=Tt(),t=n=>{console.log("Role selected:",n),e("/register",{state:{selectedRole:n}})},r=[{id:"gestionnaire",title:"Je suis un Gestionnaire",description:"Grez les urgences de votre coproprit et trouvez des artisans qualifis",icon:Go,color:"from-blue-500 to-blue-600",features:["Publier des urgences","Recevoir des propositions","Grer les interventions","Suivre les factures"]},{id:"artisan",title:"Je suis un Artisan",description:"Trouvez des missions prs de chez vous et dveloppez votre activit",icon:fr,color:"from-orange-500 to-orange-600",features:["Recevoir des alertes","Proposer vos services","Grer vos projets","Facturer vos prestations"]},{id:"admin",title:"Administration",description:"Accs administrateur pour la gestion de la plateforme",icon:Xr,color:"from-purple-500 to-purple-600",features:["Grer les utilisateurs","Valider les certifications","Superviser les projets","Analyser les donnes"]}];return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-teal-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-6xl w-full",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-teal-600 rounded-2xl flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-2xl",children:"MP"})})}),a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Bienvenue sur Mano-Pro"}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"La plateforme qui connecte les gestionnaires de coproprit avec des artisans qualifis  Paris"})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:r.map(n=>{const s=n.icon;return a.jsx("div",{className:"cursor-pointer transform hover:scale-105 transition-all duration-300",onClick:()=>t(n.id),children:a.jsx(z,{className:"h-full border-2 hover:border-blue-200 dark:hover:border-blue-700 hover:shadow-xl transition-all duration-300",children:a.jsxs("div",{className:"text-center h-full flex flex-col",children:[a.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${n.color} rounded-2xl flex items-center justify-center mx-auto mb-6`,children:a.jsx(s,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:n.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:n.description}),a.jsx("ul",{className:"space-y-2 text-left flex-1",children:n.features.map((i,o)=>a.jsxs("li",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3 flex-shrink-0"}),i]},o))}),a.jsx("div",{className:`mt-6 px-6 py-3 bg-gradient-to-r ${n.color} text-white rounded-lg font-medium hover:opacity-90 transition-opacity`,children:"Choisir ce rle"})]})})},n.id)})}),a.jsx("div",{className:"text-center mt-12",children:a.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Vous avez dj un compte ?"," ",a.jsx("button",{onClick:()=>e("/login"),className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:"Se connecter"})]})})]})})},G=({label:e,error:t,helperText:r,className:n,id:s,...i})=>{const o=s||`input-${Math.random().toString(36).substr(2,9)}`;return a.jsxs("div",{className:"w-full",children:[e&&a.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e}),a.jsx("input",{id:o,className:Es("w-full px-3 py-2 border rounded-lg shadow-sm transition-colors duration-200","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","placeholder-gray-400 dark:placeholder-gray-500",t?"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800","text-gray-900 dark:text-gray-100",n),...i}),t&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:t}),r&&!t&&a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:r})]})},Hv=()=>{var p,y;const[e,t]=_.useState(""),[r,n]=_.useState(""),[s,i]=_.useState(!1),[o,l]=_.useState(""),{login:c,isLoading:u}=xe(),d=Tt(),f=((y=(p=ir().state)==null?void 0:p.from)==null?void 0:y.pathname)||"/dashboard",v=async k=>{if(k.preventDefault(),l(""),!e||!r){l("Veuillez remplir tous les champs");return}await c(e,r)?d(f,{replace:!0}):l("Email ou mot de passe incorrect")};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-teal-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-teal-600 rounded-2xl flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-2xl",children:"MP"})})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Connexion"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Accdez  votre espace Mano-Pro"})]}),a.jsxs(z,{children:[a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[o&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:o})}),a.jsxs("div",{className:"relative",children:[a.jsx(ta,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),a.jsx(G,{label:"Email",type:"email",value:e,onChange:k=>t(k.target.value),className:"pl-10",placeholder:"votre@email.com",required:!0})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Zo,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),a.jsx(G,{label:"Mot de passe",type:s?"text":"password",value:r,onChange:k=>n(k.target.value),className:"pl-10 pr-10",placeholder:"",required:!0}),a.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-9 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s?a.jsx(Yo,{className:"h-5 w-5"}):a.jsx(Cr,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-300",children:"Se souvenir de moi"})]}),a.jsx(te,{to:"/forgot-password",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Mot de passe oubli ?"})]}),a.jsx(L,{type:"submit",className:"w-full",isLoading:u,children:"Se connecter"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Pas encore de compte ?"," ",a.jsx(te,{to:"/role-selection",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:"S'inscrire"})]})}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center mb-4",children:"Comptes de dmonstration :"}),a.jsxs("div",{className:"space-y-2 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Gestionnaire:"}),a.jsx("span",{className:"text-gray-500",children:"gestionnaire@test.com / password123"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Artisan:"}),a.jsx("span",{className:"text-gray-500",children:"artisan@test.com / password123"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Admin:"}),a.jsx("span",{className:"text-gray-500",children:"admin@mano-pro.com / admin123"})]})]})]})]})]})})},Kv=()=>{var x;const t=(x=ir().state)==null?void 0:x.selectedRole,[r,n]=_.useState({firstName:"",lastName:"",email:"",phone:"",company:"",password:"",confirmPassword:"",role:t||"gestionnaire",arrondissements:[],trades:[]}),[s,i]=_.useState(!1),[o,l]=_.useState(!1),[c,u]=_.useState(""),[d,h]=_.useState([]),{register:f,isLoading:v}=xe(),p=Tt(),y=(w,N)=>{n(j=>({...j,[w]:N}))},k=(w,N)=>{n(j=>({...j,[w]:j[w].includes(N)?j[w].filter(S=>S!==N):[...j[w],N]}))},m=w=>{w.target.files&&h(Array.from(w.target.files))},g=async w=>{if(w.preventDefault(),u(""),!r.firstName||!r.lastName||!r.email||!r.phone||!r.company||!r.password){u("Veuillez remplir tous les champs obligatoires");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){u("Veuillez entrer une adresse email valide");return}if(r.password!==r.confirmPassword){u("Les mots de passe ne correspondent pas");return}if(r.password.length<8){u("Le mot de passe doit contenir au moins 8 caractres");return}if(r.role==="artisan"&&r.arrondissements.length===0){u("Veuillez slectionner au moins un arrondissement");return}if(r.role==="artisan"&&r.trades.length===0){u("Veuillez slectionner au moins un corps de mtier");return}try{await f(r)?p("/dashboard"):u("Erreur lors de l'inscription. Veuillez vrifier vos informations et ressayer.")}catch(j){console.error("Registration submission error:",j),u("Une erreur inattendue s'est produite. Veuillez ressayer dans quelques instants.")}};return t?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-teal-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 py-8 px-4",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-teal-600 rounded-2xl flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-2xl",children:"MP"})})}),a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:["Inscription ",r.role==="gestionnaire"?"Gestionnaire":r.role==="artisan"?"Artisan":"Admin"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Crez votre compte pour accder  Mano-Pro"})]}),a.jsxs(z,{children:[a.jsxs("form",{onSubmit:g,className:"space-y-6",children:[c&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:c})}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(pt,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),a.jsx(G,{label:"Prnom *",value:r.firstName,onChange:w=>y("firstName",w.target.value),className:"pl-10",placeholder:"Jean",required:!0})]}),a.jsxs("div",{className:"relative",children:[a.jsx(pt,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),a.jsx(G,{label:"Nom *",value:r.lastName,onChange:w=>y("lastName",w.target.value),className:"pl-10",placeholder:"Dupont",required:!0})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ta,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),a.jsx(G,{label:"Email *",type:"email",value:r.email,onChange:w=>y("email",w.target.value),className:"pl-10",placeholder:"jean.dupont@email.com",required:!0})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(dc,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),a.jsx(G,{label:"Tlphone *",type:"tel",value:r.phone,onChange:w=>y("phone",w.target.value),className:"pl-10",placeholder:"01 23 45 67 89",required:!0})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Qo,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),a.jsx(G,{label:"Entreprise *",value:r.company,onChange:w=>y("company",w.target.value),className:"pl-10",placeholder:"Nom de votre entreprise",required:!0})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Zo,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),a.jsx(G,{label:"Mot de passe *",type:s?"text":"password",value:r.password,onChange:w=>y("password",w.target.value),className:"pl-10 pr-10",placeholder:"",required:!0}),a.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-9 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s?a.jsx(Yo,{className:"h-5 w-5"}):a.jsx(Cr,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Zo,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),a.jsx(G,{label:"Confirmer le mot de passe *",type:o?"text":"password",value:r.confirmPassword,onChange:w=>y("confirmPassword",w.target.value),className:"pl-10 pr-10",placeholder:"",required:!0}),a.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-9 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o?a.jsx(Yo,{className:"h-5 w-5"}):a.jsx(Cr,{className:"h-5 w-5"})})]})]}),r.role==="artisan"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Zones d'intervention * (Arrondissements de Paris)"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:Pr.map(w=>a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:r.arrondissements.includes(w.id),onChange:()=>k("arrondissements",w.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:w.name})]},w.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Corps de mtier * (Spcialits)"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:sa.map(w=>a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:r.trades.includes(w),onChange:()=>k("trades",w),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:w})]},w))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Documents (Diplmes, Assurance professionnelle)"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center",children:[a.jsx(Of,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:m,className:"hidden",id:"documents"}),a.jsxs("label",{htmlFor:"documents",className:"cursor-pointer",children:[a.jsx("span",{className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Cliquez pour slectionner des fichiers"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"PDF, JPG, PNG (max 10MB par fichier)"})]}),d.length>0&&a.jsxs("div",{className:"mt-3 text-left",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Fichiers slectionns :"}),d.map((w,N)=>a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.name},N))]})]})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",required:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-300",children:["J'accepte les"," ",a.jsx(te,{to:"/terms",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"conditions d'utilisation"})," ","et la"," ",a.jsx(te,{to:"/privacy",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"politique de confidentialit"})]})]}),a.jsx(L,{type:"submit",className:"w-full",isLoading:v,children:"Crer mon compte"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Vous avez dj un compte ?"," ",a.jsx(te,{to:"/login",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:"Se connecter"})]})})]})]})}):(p("/role-selection"),null)},Jv=()=>{const{user:e}=xe();if(!e)return null;const t=()=>{switch(e.role){case"gestionnaire":return Go;case"artisan":return fr;case"admin":return Xr;default:return Go}},r=()=>{switch(e.role){case"gestionnaire":return"from-blue-500 to-blue-600";case"artisan":return"from-orange-500 to-orange-600";case"admin":return"from-purple-500 to-purple-600";default:return"from-gray-500 to-gray-600"}},n=t();return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 dark:from-blue-700 dark:to-teal-700 rounded-2xl p-8 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${r()} rounded-2xl flex items-center justify-center bg-white/20`,children:a.jsx(n,{className:"h-8 w-8 text-white"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold",children:["Bonjour, ",e.firstName," !"]}),a.jsxs("p",{className:"text-blue-100 text-lg",children:[e.role==="gestionnaire"&&"Grez vos urgences de coproprit",e.role==="artisan"&&"Trouvez de nouvelles opportunits",e.role==="admin"&&"Supervisez la plateforme Mano-Pro"]})]})]}),e.role==="gestionnaire"&&a.jsx(te,{to:"/create-emergency",children:a.jsxs(L,{variant:"secondary",size:"lg",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[a.jsx(Lf,{className:"h-5 w-5 mr-2"}),"Nouvelle Urgence"]})})]})}),e.role==="gestionnaire"&&a.jsx(Gv,{}),e.role==="artisan"&&a.jsx(Qv,{}),e.role==="admin"&&a.jsx(Yv,{})]})},Gv=()=>{const e=[{label:"Urgences ouvertes",value:"3",icon:Ae,color:"text-orange-600"},{label:"En cours",value:"2",icon:$e,color:"text-blue-600"},{label:"Termines",value:"12",icon:it,color:"text-green-600"},{label:"Budget mensuel",value:"2,450",icon:Qe,color:"text-purple-600"}];return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((t,r)=>{const n=t.icon;return a.jsx(z,{className:"hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.label}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.value})]}),a.jsx(n,{className:`h-8 w-8 ${t.color}`})]})},r)})}),a.jsxs(z,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Urgences rcentes"}),a.jsx(L,{variant:"ghost",size:"sm",children:"Voir tout"})]}),a.jsx("div",{className:"space-y-4",children:[{title:"Fuite d'eau - 15e arrondissement",status:"En cours",date:"2 heures",proposals:3},{title:"Panne lectrique - 8e arrondissement",status:"Ouvert",date:"1 jour",proposals:1},{title:"Serrure casse - 11e arrondissement",status:"Termin",date:"3 jours",proposals:5}].map((t,r)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:t.title}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Il y a ",t.date]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.proposals," proposition",t.proposals>1?"s":""]}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.status==="En cours"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":t.status==="Ouvert"?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:t.status})]})]},r))})]})]})},Qv=()=>{const e=[{label:"Projets en cours",value:"2",icon:$e,color:"text-blue-600"},{label:"Nouvelles opportunits",value:"5",icon:Ae,color:"text-orange-600"},{label:"CA ce mois",value:"1,850",icon:Qe,color:"text-green-600"},{label:"Note moyenne",value:"4.8",icon:Zg,color:"text-purple-600"}];return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((t,r)=>{const n=t.icon;return a.jsx(z,{className:"hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.label}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.value})]}),a.jsx(n,{className:`h-8 w-8 ${t.color}`})]})},r)})}),a.jsxs(z,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Nouvelles opportunits"}),a.jsx(L,{variant:"ghost",size:"sm",children:"Voir tout"})]}),a.jsx("div",{className:"space-y-4",children:[{title:"Rparation plomberie - 12e",budget:"150-200",distance:"2.3 km",time:"30 min"},{title:"Installation lectrique - 7e",budget:"300-400",distance:"4.1 km",time:"1h"},{title:"Dpannage serrurerie - 15e",budget:"80-120",distance:"1.8 km",time:"45 min"}].map((t,r)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:t.title}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.distance,"  Dure estime: ",t.time]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:t.budget}),a.jsx(L,{size:"sm",children:"Proposer"})]})]},r))})]})]})},Yv=()=>{const e=[{label:"Utilisateurs actifs",value:"247",icon:ex,color:"text-blue-600"},{label:"Projets ce mois",value:"89",icon:Xo,color:"text-green-600"},{label:"CA plateforme",value:"12,450",icon:Qe,color:"text-purple-600"},{label:"Certifications en attente",value:"8",icon:Ae,color:"text-orange-600"}];return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((t,r)=>{const n=t.icon;return a.jsx(z,{className:"hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.label}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.value})]}),a.jsx(n,{className:`h-8 w-8 ${t.color}`})]})},r)})}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs(z,{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Certifications en attente"}),a.jsx("div",{className:"space-y-3",children:[{name:"Pierre Martin",trade:"Plomberie",date:"2 jours"},{name:"Sophie Dubois",trade:"lectricit",date:"1 jour"},{name:"Marc Leroy",trade:"Serrurerie",date:"3 heures"}].map((t,r)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.trade,"  Il y a ",t.date]})]}),a.jsx(L,{size:"sm",children:"Examiner"})]},r))})]}),a.jsxs(z,{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Activit rcente"}),a.jsx("div",{className:"space-y-3",children:[{action:"Nouveau gestionnaire inscrit",time:"5 min"},{action:"Projet termin - 11e arr.",time:"1h"},{action:"Paiement valid - 250",time:"2h"}].map((t,r)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("p",{className:"text-gray-900 dark:text-white",children:t.action}),a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Il y a ",t.time]})]},r))})]})]})]})},ha=na((e,t)=>({emergencies:[],proposals:[],projects:[],isLoading:!1,createEmergency:async r=>{e({isLoading:!0});try{const{data:n,error:s}=await I.from("emergencies").insert({title:r.title,description:r.description,address:r.address,arrondissement:r.arrondissement,trade:r.trade,max_budget:r.maxBudget,urgency_level:r.urgencyLevel,created_by:r.createdBy,photos:r.photos||[]}).select().single();if(s)throw console.error("Create emergency error:",s),s;const i=qa(n);return e(o=>({emergencies:[i,...o.emergencies],isLoading:!1})),i.id}catch(n){throw console.error("Create emergency error:",n),e({isLoading:!1}),n}},updateEmergencyStatus:async(r,n)=>{try{const{error:s}=await I.from("emergencies").update({status:n}).eq("id",r);if(s)throw console.error("Update emergency status error:",s),s;e(i=>({emergencies:i.emergencies.map(o=>o.id===r?{...o,status:n}:o)}))}catch(s){throw console.error("Update emergency status error:",s),s}},getEmergenciesByUser:r=>t().emergencies.filter(n=>n.createdBy===r),getEmergencyById:r=>t().emergencies.find(n=>n.id===r),loadEmergenciesByUser:async r=>{e({isLoading:!0});try{const{data:n,error:s}=await I.from("emergencies").select("*").eq("created_by",r).order("created_at",{ascending:!1});if(s)throw console.error("Load emergencies error:",s),s;const i=n.map(qa);e(o=>({emergencies:i,isLoading:!1}))}catch(n){throw console.error("Load emergencies error:",n),e({isLoading:!1}),n}},loadEmergencyById:async r=>{e({isLoading:!0});try{const{data:n,error:s}=await I.from("emergencies").select("*").eq("id",r).single();if(s)throw console.error("Load emergency error:",s),s;const i=qa(n);e(o=>({emergencies:o.emergencies.some(l=>l.id===r)?o.emergencies.map(l=>l.id===r?i:l):[...o.emergencies,i],isLoading:!1}))}catch(n){throw console.error("Load emergency error:",n),e({isLoading:!1}),n}},createProposal:async r=>{e({isLoading:!0});try{const{data:n,error:s}=await I.from("proposals").insert({emergency_id:r.emergencyId,artisan_id:r.artisanId,artisan_name:r.artisanName,artisan_company:r.artisanCompany,artisan_rating:r.artisanRating,price:r.price,description:r.description,estimated_duration:r.estimatedDuration}).select().single();if(s)throw console.error("Create proposal error:",s),s;const i=Wa(n);return e(o=>({proposals:[i,...o.proposals],isLoading:!1})),i.id}catch(n){throw console.error("Create proposal error:",n),e({isLoading:!1}),n}},updateProposalStatus:async(r,n)=>{try{const{error:s}=await I.from("proposals").update({status:n}).eq("id",r);if(s)throw console.error("Update proposal status error:",s),s;if(e(i=>({proposals:i.proposals.map(o=>o.id===r?{...o,status:n}:o)})),n==="accepted"){const i=t().proposals.find(o=>o.id===r);i&&(await t().updateEmergencyStatus(i.emergencyId,"in_progress"),await t().createProject(i.emergencyId,r))}}catch(s){throw console.error("Update proposal status error:",s),s}},getProposalsByEmergency:r=>t().proposals.filter(n=>n.emergencyId===r),getProposalsByArtisan:r=>t().proposals.filter(n=>n.artisanId===r),loadProposalsByEmergency:async r=>{e({isLoading:!0});try{const{data:n,error:s}=await I.from("proposals").select("*").eq("emergency_id",r).order("created_at",{ascending:!1});if(s)throw console.error("Load proposals error:",s),s;const i=n.map(Wa);e(o=>({proposals:[...o.proposals.filter(l=>l.emergencyId!==r),...i],isLoading:!1}))}catch(n){throw console.error("Load proposals error:",n),e({isLoading:!1}),n}},loadProposalsByArtisan:async r=>{e({isLoading:!0});try{const{data:n,error:s}=await I.from("proposals").select("*").eq("artisan_id",r).order("created_at",{ascending:!1});if(s)throw console.error("Load proposals error:",s),s;const i=n.map(Wa);e(o=>({proposals:[...o.proposals.filter(l=>l.artisanId!==r),...i],isLoading:!1}))}catch(n){throw console.error("Load proposals error:",n),e({isLoading:!1}),n}},createProject:async(r,n)=>{try{const{data:s,error:i}=await I.from("emergencies").select("*").eq("id",r).single();if(i)throw console.error("Error fetching emergency:",i),i;const{data:o,error:l}=await I.from("proposals").select("*").eq("id",n).single();if(l)throw console.error("Error fetching proposal:",l),l;const{data:c,error:u}=await I.from("users").select("*").eq("id",s.created_by).single();if(u)throw console.error("Error fetching gestionnaire:",u),u;const{data:d,error:h}=await I.from("users").select("*").eq("id",o.artisan_id).single();if(h)throw console.error("Error fetching artisan:",h),h;const{data:f,error:v}=await I.from("projects").insert({emergency_id:r,proposal_id:n,gestionnaire_id:s.created_by,artisan_id:o.artisan_id,title:s.title,description:s.description,address:s.address,price:o.price,status:"accepted"}).select().single();if(v)throw console.error("Error creating project:",v),v;await I.from("project_timeline_entries").insert({project_id:f.id,type:"status_change",message:"Projet accept et dmarr",author:"System"});const p=at(c),y=at(d),k={id:f.id,emergencyId:r,proposalId:n,gestionnaire:p,artisan:y,title:f.title,description:f.description,address:f.address,price:f.price,status:f.status,startDate:f.start_date?new Date(f.start_date):void 0,completedDate:f.completed_date?new Date(f.completed_date):void 0,photos:{before:f.photos_before||[],during:f.photos_during||[],after:f.photos_after||[]},timeline:[{id:Date.now().toString(),type:"status_change",message:"Projet accept et dmarr",author:"System",timestamp:new Date}],rating:f.rating,review:f.review};return e(m=>({projects:[k,...m.projects]})),k.id}catch(s){throw console.error("Create project error:",s),s}},updateProjectStatus:async(r,n)=>{try{const s={status:n};n==="completed"&&(s.completed_date=new Date().toISOString());const{error:i}=await I.from("projects").update(s).eq("id",r);if(i)throw console.error("Update project status error:",i),i;await I.from("project_timeline_entries").insert({project_id:r,type:"status_change",message:`Statut chang vers: ${n}`,author:"System"}),e(o=>({projects:o.projects.map(l=>{if(l.id===r){const c={...l,status:n};n==="completed"&&(c.completedDate=new Date);const u={id:Date.now().toString(),type:"status_change",message:`Statut chang vers: ${n}`,author:"System",timestamp:new Date};return c.timeline=[...l.timeline,u],c}return l})}))}catch(s){throw console.error("Update project status error:",s),s}},getProjectsByUser:(r,n)=>t().projects.filter(s=>n==="gestionnaire"?s.gestionnaire.id===r:s.artisan.id===r),loadProjectsByUser:async(r,n)=>{e({isLoading:!0});try{const s=n==="gestionnaire"?"gestionnaire_id":"artisan_id",{data:i,error:o}=await I.from("projects").select(`
          *,
          gestionnaire:gestionnaire_id(*),
          artisan:artisan_id(*)
        `).eq(s,r).order("start_date",{ascending:!1});if(o)throw console.error("Load projects error:",o),o;const l=i.map(c=>({id:c.id,emergencyId:c.emergency_id,proposalId:c.proposal_id,gestionnaire:at(c.gestionnaire),artisan:at(c.artisan),title:c.title,description:c.description,address:c.address,price:c.price,status:c.status,startDate:c.start_date?new Date(c.start_date):void 0,completedDate:c.completed_date?new Date(c.completed_date):void 0,photos:{before:c.photos_before||[],during:c.photos_during||[],after:c.photos_after||[]},timeline:[],rating:c.rating,review:c.review}));e(c=>({projects:l,isLoading:!1}))}catch(s){throw console.error("Load projects error:",s),e({isLoading:!1}),s}}})),Xv=()=>{const e=Tt(),{createEmergency:t,isLoading:r}=ha(),{user:n}=xe(),[s,i]=_.useState({title:"",description:"",address:"",arrondissement:0,trade:"",maxBudget:"",urgencyLevel:"medium"}),[o,l]=_.useState([]),[c,u]=_.useState(""),d=(p,y)=>{i(k=>({...k,[p]:y}))},h=p=>{if(p.target.files){const y=Array.from(p.target.files);l(k=>[...k,...y].slice(0,5))}},f=p=>{l(y=>y.filter((k,m)=>m!==p))},v=async p=>{if(p.preventDefault(),u(""),!s.title||!s.description||!s.address||!s.arrondissement||!s.trade||!s.maxBudget){u("Veuillez remplir tous les champs obligatoires");return}if(parseInt(s.maxBudget)<50){u("Le budget minimum est de 50");return}try{const y=o.map(m=>URL.createObjectURL(m)),k=await t({title:s.title,description:s.description,address:s.address,arrondissement:s.arrondissement,trade:s.trade,maxBudget:parseInt(s.maxBudget),urgencyLevel:s.urgencyLevel,createdBy:n.id,photos:y});e("/emergencies")}catch{u("Erreur lors de la cration de l'urgence")}};return mn.find(p=>p.value===s.urgencyLevel),a.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Nouvelle Urgence"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Dcrivez votre urgence pour recevoir des propositions d'artisans qualifis"})]}),a.jsx(z,{children:a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:c})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(G,{label:"Titre de l'urgence *",value:s.title,onChange:p=>d("title",p.target.value),placeholder:"Ex: Fuite d'eau dans la cuisine",required:!0}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description dtaille *"}),a.jsx("textarea",{value:s.description,onChange:p=>d("description",p.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Dcrivez prcisment le problme, sa localisation, et tout dtail utile pour l'artisan...",required:!0})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(_t,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),a.jsx(G,{label:"Adresse complte *",value:s.address,onChange:p=>d("address",p.target.value),className:"pl-10",placeholder:"15 Rue de Rivoli, 75001 Paris",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Arrondissement *"}),a.jsxs("select",{value:s.arrondissement,onChange:p=>d("arrondissement",parseInt(p.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",required:!0,children:[a.jsx("option",{value:0,children:"Slectionner un arrondissement"}),Pr.map(p=>a.jsx("option",{value:p.id,children:p.name},p.id))]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Corps de mtier *"}),a.jsxs("select",{value:s.trade,onChange:p=>d("trade",p.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",required:!0,children:[a.jsx("option",{value:"",children:"Slectionner un mtier"}),sa.map(p=>a.jsx("option",{value:p,children:p},p))]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Qe,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),a.jsx(G,{label:"Budget maximum *",type:"number",value:s.maxBudget,onChange:p=>d("maxBudget",p.target.value),className:"pl-10",placeholder:"300",min:"50",required:!0}),a.jsx("span",{className:"absolute right-3 top-9 text-gray-400",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Niveau d'urgence *"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:mn.map(p=>a.jsx("button",{type:"button",onClick:()=>d("urgencyLevel",p.value),className:`p-3 rounded-lg border-2 transition-all ${s.urgencyLevel===p.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ae,{className:`h-4 w-4 ${p.value==="critical"?"text-red-500":p.value==="high"?"text-orange-500":p.value==="medium"?"text-yellow-500":"text-green-500"}`}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.label})]})},p.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Photos (optionnel)"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Er,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:h,className:"hidden",id:"photos"}),a.jsxs("label",{htmlFor:"photos",className:"cursor-pointer",children:[a.jsx("span",{className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Ajouter des photos"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"JPG, PNG (max 5 photos, 10MB chacune)"})]})]}),o.length>0&&a.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-4",children:o.map((p,y)=>a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:URL.createObjectURL(p),alt:`Photo ${y+1}`,className:"w-full h-24 object-cover rounded-lg"}),a.jsx("button",{type:"button",onClick:()=>f(y),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:""})]},y))})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx(L,{type:"button",variant:"secondary",onClick:()=>e("/emergencies"),children:"Annuler"}),a.jsx(L,{type:"submit",isLoading:r,className:"px-8",children:"Publier l'urgence"})]})]})})]})},F=({children:e,variant:t="default",size:r="md",className:n})=>{const s={default:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",info:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},i={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"};return a.jsx("span",{className:Es("inline-flex items-center font-medium rounded-full",s[t],i[r],n),children:e})},Zv=()=>{const{emergencies:e,getEmergenciesByUser:t,getProposalsByEmergency:r}=ha(),{user:n}=xe(),[s,i]=_.useState(""),[o,l]=_.useState("all"),[c,u]=_.useState("all"),h=(n?t(n.id):[]).filter(y=>{const k=y.title.toLowerCase().includes(s.toLowerCase())||y.description.toLowerCase().includes(s.toLowerCase()),m=o==="all"||y.status===o,g=c==="all"||y.trade===c;return k&&m&&g}),f=y=>{switch(y){case"open":return a.jsx(F,{variant:"warning",children:"Ouvert"});case"in_progress":return a.jsx(F,{variant:"info",children:"En cours"});case"completed":return a.jsx(F,{variant:"success",children:"Termin"});case"closed":return a.jsx(F,{variant:"default",children:"Ferm"});default:return a.jsx(F,{variant:"default",children:y})}},v=y=>{const k=mn.find(m=>m.value===y);return k?a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ae,{className:`h-4 w-4 ${y==="critical"?"text-red-500":y==="high"?"text-orange-500":y==="medium"?"text-yellow-500":"text-green-500"}`}),a.jsx("span",{className:`text-sm ${k.color.replace("bg-","text-").replace("dark:bg-","dark:text-")}`,children:k.label})]}):null},p=y=>{const m=Math.floor((new Date().getTime()-y.getTime())/(1e3*60*60));if(m<1)return"Il y a moins d'1h";if(m<24)return`Il y a ${m}h`;const g=Math.floor(m/24);return`Il y a ${g} jour${g>1?"s":""}`};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Mes Urgences"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Grez vos demandes d'intervention et suivez leur avancement"})]}),a.jsx(te,{to:"/create-emergency",children:a.jsxs(L,{className:"flex items-center space-x-2",children:[a.jsx(Lf,{className:"h-5 w-5"}),a.jsx("span",{children:"Nouvelle Urgence"})]})})]}),a.jsx(z,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(If,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(G,{placeholder:"Rechercher...",value:s,onChange:y=>i(y.target.value),className:"pl-10"})]}),a.jsxs("select",{value:o,onChange:y=>l(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"open",children:"Ouvert"}),a.jsx("option",{value:"in_progress",children:"En cours"}),a.jsx("option",{value:"completed",children:"Termin"}),a.jsx("option",{value:"closed",children:"Ferm"})]}),a.jsxs("select",{value:c,onChange:y=>u(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[a.jsx("option",{value:"all",children:"Tous les mtiers"}),sa.map(y=>a.jsx("option",{value:y,children:y},y))]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(cc,{className:"h-4 w-4 mr-2"}),h.length," rsultat",h.length>1?"s":""]})]})}),a.jsx("div",{className:"space-y-4",children:h.length===0?a.jsxs(z,{className:"text-center py-12",children:[a.jsx(Ae,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucune urgence trouve"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:s||o!=="all"||c!=="all"?"Aucune urgence ne correspond  vos critres de recherche.":"Vous n'avez pas encore cr d'urgence."}),!s&&o==="all"&&c==="all"&&a.jsx(te,{to:"/create-emergency",children:a.jsx(L,{children:"Crer ma premire urgence"})})]}):h.map(y=>{const k=r(y.id),m=Pr.find(g=>g.id===y.arrondissement);return a.jsx(z,{hover:!0,className:"p-6",children:a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:y.title}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(_t,{className:"h-4 w-4"}),a.jsx("span",{children:m==null?void 0:m.name})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx($e,{className:"h-4 w-4"}),a.jsx("span",{children:p(y.createdAt)})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Qe,{className:"h-4 w-4"}),a.jsxs("span",{children:["Budget: ",y.maxBudget,""]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[v(y.urgencyLevel),f(y.status)]})]}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3 line-clamp-2",children:y.description}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[a.jsx("span",{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded-full",children:y.trade}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[k.length," proposition",k.length>1?"s":""]})]}),a.jsx(te,{to:`/emergencies/${y.id}`,children:a.jsxs(L,{variant:"ghost",size:"sm",className:"flex items-center space-x-1",children:[a.jsx(Cr,{className:"h-4 w-4"}),a.jsx("span",{children:"Voir dtails"})]})})]})]})})},y.id)})})]})},jr=({isOpen:e,onClose:t,title:r,children:n,size:s="md",showCloseButton:i=!0})=>{if(_.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),_.useEffect(()=>{const l=c=>{c.key==="Escape"&&t()};return e&&document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[e,t]),!e)return null;const o={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),a.jsxs("div",{className:Es("relative w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl transform transition-all",o[s]),children:[(r||i)&&a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[r&&a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r}),i&&a.jsx(L,{variant:"ghost",size:"sm",onClick:t,className:"p-2",children:a.jsx(Af,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"p-6",children:n})]})]})})},ew=()=>{const{id:e}=Cf(),t=Tt(),{user:r}=xe(),{getEmergencyById:n,getProposalsByEmergency:s,updateProposalStatus:i,updateEmergencyStatus:o,isLoading:l}=ha(),[c,u]=_.useState(null),[d,h]=_.useState(!1),[f,v]=_.useState(null),p=e?n(e):void 0,y=e?s(e):[];if(!p)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ae,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Urgence non trouve"}),a.jsxs(L,{onClick:()=>t("/emergencies"),className:"mt-4",children:[a.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Retour aux urgences"]})]});if(!((r==null?void 0:r.id)===p.createdBy))return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ae,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Accs non autoris"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Vous n'avez pas l'autorisation de voir cette urgence."}),a.jsxs(L,{onClick:()=>t("/emergencies"),className:"mt-4",children:[a.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Retour aux urgences"]})]});const m=Pr.find(b=>b.id===p.arrondissement),g=mn.find(b=>b.value===p.urgencyLevel),x=async b=>{await i(b,"accepted"),await o(p.id,"in_progress"),u(null)},w=async b=>{await i(b,"rejected"),u(null)},N=b=>{v(b),h(!0)},j=b=>{switch(b){case"open":return a.jsx(F,{variant:"warning",children:"Ouvert"});case"in_progress":return a.jsx(F,{variant:"info",children:"En cours"});case"completed":return a.jsx(F,{variant:"success",children:"Termin"});case"closed":return a.jsx(F,{variant:"default",children:"Ferm"});default:return a.jsx(F,{variant:"default",children:b})}},S=b=>{switch(b){case"pending":return a.jsx(F,{variant:"warning",children:"En attente"});case"accepted":return a.jsx(F,{variant:"success",children:"Accepte"});case"rejected":return a.jsx(F,{variant:"danger",children:"Refuse"});default:return a.jsx(F,{variant:"default",children:b})}},C=b=>{const _e=Math.floor((new Date().getTime()-b.getTime())/(1e3*60*60));if(_e<1)return"Il y a moins d'1h";if(_e<24)return`Il y a ${_e}h`;const Rt=Math.floor(_e/24);return`Il y a ${Rt} jour${Rt>1?"s":""}`},A=y.filter(b=>b.status==="pending"),O=y.find(b=>b.status==="accepted");return a.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(L,{variant:"ghost",onClick:()=>t("/emergencies"),children:[a.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Retour"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p.title}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx($e,{className:"h-4 w-4"}),a.jsx("span",{children:C(p.createdAt)})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(_t,{className:"h-4 w-4"}),a.jsx("span",{children:m==null?void 0:m.name})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Qe,{className:"h-4 w-4"}),a.jsxs("span",{children:["Budget max: ",p.maxBudget,""]})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[g&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ae,{className:`h-4 w-4 ${p.urgencyLevel==="critical"?"text-red-500":p.urgencyLevel==="high"?"text-orange-500":p.urgencyLevel==="medium"?"text-yellow-500":"text-green-500"}`}),a.jsx("span",{className:"text-sm font-medium",children:g.label})]}),j(p.status)]})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(z,{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Dtails de l'urgence"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Description"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.description})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Adresse"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p.address})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Corps de mtier"}),a.jsx(F,{variant:"info",children:p.trade})]})]})]})]}),p.photos.length>0&&a.jsxs(z,{children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Photos (",p.photos.length,")"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:p.photos.map((b,ce)=>a.jsx("img",{src:b,alt:`Photo ${ce+1}`,className:"w-full h-32 object-cover rounded-lg border cursor-pointer hover:opacity-80 transition-opacity"},ce))})]}),a.jsxs(z,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Propositions reues (",y.length,")"]}),p.status==="open"&&A.length>0&&a.jsxs(F,{variant:"warning",children:[A.length," en attente"]})]}),y.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucune proposition"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Aucun artisan n'a encore propos ses services pour cette urgence."})]}):a.jsx("div",{className:"space-y-4",children:y.map(b=>a.jsxs("div",{className:`border rounded-lg p-6 transition-all ${b.status==="accepted"?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20":b.status==="rejected"?"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center",children:a.jsx(pt,{className:"h-6 w-6 text-orange-600 dark:text-orange-300"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:b.artisanName}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.artisanCompany}),a.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[a.jsx(wr,{className:"h-3 w-3 text-yellow-400 fill-current"}),a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[b.artisanRating,"/5"]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[S(b.status),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:C(b.createdAt)})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-1 text-green-600 dark:text-green-400 font-semibold",children:[a.jsx(Qe,{className:"h-4 w-4"}),a.jsxs("span",{children:[b.price,""]})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prix propos"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-1 text-blue-600 dark:text-blue-400 font-semibold",children:[a.jsx($e,{className:"h-4 w-4"}),a.jsx("span",{children:b.estimatedDuration})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Dure estime"})]})]}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:b.description}),b.status==="pending"&&p.status==="open"&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(L,{onClick:()=>u(b.id),size:"sm",className:"flex items-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4"}),a.jsx("span",{children:"Accepter"})]}),a.jsxs(L,{onClick:()=>w(b.id),variant:"danger",size:"sm",className:"flex items-center space-x-1",children:[a.jsx(Af,{className:"h-4 w-4"}),a.jsx("span",{children:"Refuser"})]}),a.jsxs(L,{onClick:()=>N(b.id),variant:"ghost",size:"sm",className:"flex items-center space-x-1",children:[a.jsx(el,{className:"h-4 w-4"}),a.jsx("span",{children:"Contacter"})]})]}),b.status==="accepted"&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 dark:text-green-400",children:[a.jsx(it,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Proposition accepte"})]})]},b.id))})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(z,{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Rsum"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Statut"}),j(p.status)]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Propositions"}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:y.length})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Budget max"}),a.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:[p.maxBudget,""]})]}),y.length>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prix moyen"}),a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(y.reduce((b,ce)=>b+ce.price,0)/y.length),""]})]})]})]}),a.jsxs(z,{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Actions"}),a.jsxs("div",{className:"space-y-3",children:[p.status==="open"&&a.jsxs(L,{variant:"secondary",className:"w-full justify-start",onClick:()=>t(`/emergencies/${p.id}/edit`),children:[a.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Modifier l'urgence"]}),O&&a.jsxs(L,{className:"w-full justify-start",onClick:()=>t(`/projects/${p.id}`),children:[a.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Voir le projet"]}),a.jsxs(L,{variant:"ghost",className:"w-full justify-start",onClick:()=>window.print(),children:[a.jsx(Er,{className:"h-4 w-4 mr-2"}),"Imprimer"]})]})]}),a.jsxs(z,{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Historique"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Urgence cre"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:C(p.createdAt)})]})]}),y.map(b=>a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${b.status==="accepted"?"bg-green-500":b.status==="rejected"?"bg-red-500":"bg-yellow-500"}`}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Proposition de ",b.artisanName]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:C(b.createdAt)})]})]},b.id))]})]})]})]}),a.jsx(jr,{isOpen:!!c,onClose:()=>u(null),title:"Accepter la proposition",children:c&&a.jsx("div",{className:"space-y-4",children:(()=>{const b=y.find(ce=>ce.id===c);return b?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Vous tes sur le point d'accepter cette proposition :"}),a.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Artisan :"})," ",b.artisanName," (",b.artisanCompany,")"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Prix :"})," ",b.price,""]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Dure :"})," ",b.estimatedDuration]})]})]}),a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[a.jsx("strong",{children:"Important :"}),` En acceptant cette proposition, vous crez automatiquement un projet et l'urgence passera en statut "En cours". Les autres propositions seront refuses.`]})}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(L,{variant:"secondary",onClick:()=>u(null),children:"Annuler"}),a.jsx(L,{onClick:()=>x(c),isLoading:l,children:"Confirmer l'acceptation"})]})]}):null})()})}),a.jsx(jr,{isOpen:d,onClose:()=>h(!1),title:"Contacter l'artisan",children:f&&a.jsx("div",{className:"space-y-4",children:(()=>{const b=y.find(ce=>ce.id===f);return b?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(pt,{className:"h-8 w-8 text-orange-600 dark:text-orange-300"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:b.artisanName}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:b.artisanCompany})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(L,{variant:"secondary",className:"w-full justify-start",onClick:()=>window.open("tel:+33123456789"),children:[a.jsx(dc,{className:"h-4 w-4 mr-2"}),"Appeler l'artisan"]}),a.jsxs(L,{variant:"secondary",className:"w-full justify-start",onClick:()=>window.open("mailto:artisan@example.com"),children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),"Envoyer un email"]}),a.jsxs(L,{variant:"secondary",className:"w-full justify-start",children:[a.jsx(el,{className:"h-4 w-4 mr-2"}),"Envoyer un message"]})]}),a.jsx("div",{className:"text-center",children:a.jsx(L,{variant:"ghost",onClick:()=>h(!1),children:"Fermer"})})]}):null})()})})]})},tw=()=>{const{emergencies:e,createProposal:t,isLoading:r}=ha(),{user:n}=xe(),[s,i]=_.useState(null),[o,l]=_.useState({price:"",description:"",estimatedDuration:""}),[c,u]=_.useState("all"),[d,h]=_.useState(""),f=e.filter(m=>{if(m.status!=="open"||n!=null&&n.trades&&!n.trades.includes(m.trade)||n!=null&&n.arrondissements&&!n.arrondissements.includes(m.arrondissement))return!1;const g=m.title.toLowerCase().includes(d.toLowerCase())||m.description.toLowerCase().includes(d.toLowerCase()),x=c==="all"||m.urgencyLevel===c;return g&&x}),v=async()=>{if(!(!s||!n)){if(!o.price||!o.description||!o.estimatedDuration){alert("Veuillez remplir tous les champs");return}try{await t({emergencyId:s,artisanId:n.id,artisanName:`${n.firstName} ${n.lastName}`,artisanCompany:n.company,artisanRating:n.rating||4.5,price:parseInt(o.price),description:o.description,estimatedDuration:o.estimatedDuration}),i(null),l({price:"",description:"",estimatedDuration:""})}catch{alert("Erreur lors de l'envoi de la proposition")}}},p=m=>{const g=mn.find(x=>x.value===m);return g?a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ae,{className:`h-4 w-4 ${m==="critical"?"text-red-500":m==="high"?"text-orange-500":m==="medium"?"text-yellow-500":"text-green-500"}`}),a.jsx("span",{className:"text-sm font-medium",children:g.label})]}):null},y=m=>{const x=Math.floor((new Date().getTime()-m.getTime())/(1e3*60*60));if(x<1)return"Il y a moins d'1h";if(x<24)return`Il y a ${x}h`;const w=Math.floor(x/24);return`Il y a ${w} jour${w>1?"s":""}`},k=m=>(Math.random()*5+.5).toFixed(1);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Opportunits"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Trouvez de nouvelles missions prs de chez vous"})]}),a.jsx(z,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(G,{placeholder:"Rechercher une urgence...",value:d,onChange:m=>h(m.target.value)}),a.jsxs("select",{value:c,onChange:m=>u(m.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[a.jsx("option",{value:"all",children:"Toutes les urgences"}),mn.map(m=>a.jsx("option",{value:m.value,children:m.label},m.value))]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(cc,{className:"h-4 w-4 mr-2"}),f.length," opportunit",f.length>1?"s":""]})]})}),a.jsx("div",{className:"space-y-4",children:f.length===0?a.jsxs(z,{className:"text-center py-12",children:[a.jsx(Ae,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucune opportunit disponible"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d||c!=="all"?"Aucune urgence ne correspond  vos critres.":"Aucune nouvelle urgence dans vos zones d'intervention pour le moment."})]}):f.map(m=>{const g=Pr.find(w=>w.id===m.arrondissement),x=k(m.arrondissement);return a.jsx(z,{hover:!0,className:"p-6",children:a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:m.title}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(_t,{className:"h-4 w-4"}),a.jsxs("span",{children:[g==null?void 0:g.name,"  ",x," km"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx($e,{className:"h-4 w-4"}),a.jsx("span",{children:y(m.createdAt)})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[p(m.urgencyLevel),a.jsx(F,{variant:"info",children:m.trade})]})]}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:m.description}),m.photos.length>0&&a.jsxs("div",{className:"flex space-x-2 mb-4",children:[m.photos.slice(0,3).map((w,N)=>a.jsx("img",{src:w,alt:`Photo ${N+1}`,className:"w-16 h-16 object-cover rounded-lg"},N)),m.photos.length>3&&a.jsxs("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center text-sm text-gray-600 dark:text-gray-400",children:["+",m.photos.length-3]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-1 text-green-600 dark:text-green-400 font-semibold",children:[a.jsx(Qe,{className:"h-4 w-4"}),a.jsxs("span",{children:["Budget: jusqu' ",m.maxBudget,""]})]}),a.jsxs(L,{onClick:()=>i(m.id),className:"flex items-center space-x-2",children:[a.jsx(tl,{className:"h-4 w-4"}),a.jsx("span",{children:"Proposer mes services"})]})]})]})})},m.id)})}),a.jsx(jr,{isOpen:!!s,onClose:()=>i(null),title:"Proposer mes services",size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Conseils pour une proposition russie"}),a.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[a.jsx("li",{children:" Soyez prcis sur votre intervention"}),a.jsx("li",{children:" Proposez un prix comptitif mais juste"}),a.jsx("li",{children:" Indiquez un dlai raliste"}),a.jsx("li",{children:" Mettez en avant votre exprience"})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Qe,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(G,{label:"Prix propos () *",type:"number",value:o.price,onChange:m=>l(g=>({...g,price:m.target.value})),className:"pl-10",placeholder:"250",min:"1"})]}),a.jsxs("div",{className:"relative",children:[a.jsx($e,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(G,{label:"Dlai estim *",value:o.estimatedDuration,onChange:m=>l(g=>({...g,estimatedDuration:m.target.value})),className:"pl-10",placeholder:"2 heures"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description de votre intervention *"}),a.jsx("textarea",{value:o.description,onChange:m=>l(g=>({...g,description:m.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Dcrivez prcisment comment vous comptez rsoudre le problme, les matriaux ncessaires, et votre mthode d'intervention..."})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(L,{variant:"secondary",onClick:()=>i(null),children:"Annuler"}),a.jsx(L,{onClick:v,isLoading:r,children:"Envoyer la proposition"})]})]})})]})},ad=async(e,t,r)=>{const n=e.map(async s=>{const i=s.name.split(".").pop(),o=`${Date.now()}-${Math.random().toString(36).substring(2)}.${i}`,l=`${r}/${o}`,{data:c,error:u}=await I.storage.from(t).upload(l,s);if(u)throw console.error("Upload error:",u),u;const{data:{publicUrl:d}}=I.storage.from(t).getPublicUrl(l);return d});return Promise.all(n)},fa=na((e,t)=>({projects:[],messages:[],payments:[],invoices:[],isLoading:!1,createProject:async(r,n)=>{e({isLoading:!0});try{const{data:s,error:i}=await I.from("emergencies").select("*").eq("id",r).single();if(i)throw i;const{data:o,error:l}=await I.from("proposals").select("*").eq("id",n).single();if(l)throw l;const{data:c,error:u}=await I.from("users").select("*").eq("id",s.created_by).single();if(u)throw u;const{data:d,error:h}=await I.from("users").select("*").eq("id",o.artisan_id).single();if(h)throw h;const{data:f,error:v}=await I.from("projects").insert({emergency_id:r,proposal_id:n,gestionnaire_id:s.created_by,artisan_id:o.artisan_id,title:s.title,description:s.description,address:s.address,price:o.price,status:"accepted"}).select().single();if(v)throw v;await I.from("project_timeline_entries").insert({project_id:f.id,type:"status_change",message:"Projet cr et accept",author:"System"});const p={id:f.id,emergencyId:r,proposalId:n,gestionnaire:at(c),artisan:at(d),title:f.title,description:f.description,address:f.address,price:f.price,status:f.status,photos:{before:[],during:[],after:[]},timeline:[{id:Date.now().toString(),type:"status_change",message:"Projet cr et accept",author:"System",timestamp:new Date}]};return e(y=>({projects:[p,...y.projects],isLoading:!1})),p.id}catch(s){throw console.error("Create project error:",s),e({isLoading:!1}),s}},updateProjectStatus:(r,n)=>t().addTimelineEntry(r,{type:"status_change",message:`Statut chang vers: ${n}`,author:"System",timestamp:new Date}).then(async()=>{const s={status:n};n==="completed"&&(s.completed_date=new Date().toISOString());const{error:i}=await I.from("projects").update(s).eq("id",r);if(i)throw i;e(o=>({projects:o.projects.map(l=>{if(l.id===r){const c={...l,status:n};return n==="completed"&&(c.completedDate=new Date),c}return l})}))}),getProjectsByUser:(r,n)=>t().projects.filter(s=>n==="gestionnaire"?s.gestionnaire.id===r:s.artisan.id===r),getProjectById:r=>t().projects.find(n=>n.id===r),loadProjectsByUser:async(r,n)=>{e({isLoading:!0});try{const s=n==="gestionnaire"?"gestionnaire_id":"artisan_id",{data:i,error:o}=await I.from("projects").select(`
          *,
          gestionnaire:gestionnaire_id(*),
          artisan:artisan_id(*)
        `).eq(s,r).order("start_date",{ascending:!1});if(o)throw o;const l=i.map(Du);e({projects:l,isLoading:!1})}catch(s){throw console.error("Load projects error:",s),e({isLoading:!1}),s}},loadProjectById:async r=>{e({isLoading:!0});try{const{data:n,error:s}=await I.from("projects").select(`
          *,
          gestionnaire:gestionnaire_id(*),
          artisan:artisan_id(*)
        `).eq("id",r).single();if(s)throw s;const i=Du(n);e(o=>({projects:o.projects.some(l=>l.id===r)?o.projects.map(l=>l.id===r?i:l):[...o.projects,i],isLoading:!1})),await t().loadProjectTimeline(r)}catch(n){throw console.error("Load project error:",n),e({isLoading:!1}),n}},addTimelineEntry:async(r,n)=>{try{const{data:s,error:i}=await I.from("project_timeline_entries").insert({project_id:r,type:n.type,message:n.message,author:n.author,photos:n.photos||[]}).select().single();if(i)throw i;const o=zu(s);e(l=>({projects:l.projects.map(c=>c.id===r?{...c,timeline:[...c.timeline,o]}:c)}))}catch(s){throw console.error("Add timeline entry error:",s),s}},uploadProjectPhotos:async(r,n,s)=>{e({isLoading:!0});try{const i=await ad(s,"project-photos",`${r}/${n}`),{data:o,error:l}=await I.from("projects").select(`photos_${n}`).eq("id",r).single();if(l)throw l;const u=[...o[`photos_${n}`]||[],...i],{error:d}=await I.from("projects").update({[`photos_${n}`]:u}).eq("id",r);if(d)throw d;e(h=>({projects:h.projects.map(f=>f.id===r?{...f,photos:{...f.photos,[n]:[...f.photos[n],...i]}}:f),isLoading:!1})),await t().addTimelineEntry(r,{type:"photo_upload",message:`Photos ${n} ajoutes`,author:"User",timestamp:new Date,photos:i})}catch(i){throw console.error("Upload photos error:",i),e({isLoading:!1}),i}},loadProjectTimeline:async r=>{try{const{data:n,error:s}=await I.from("project_timeline_entries").select("*").eq("project_id",r).order("timestamp",{ascending:!0});if(s)throw s;const i=n.map(zu);e(o=>({projects:o.projects.map(l=>l.id===r?{...l,timeline:i}:l)}))}catch(n){throw console.error("Load timeline error:",n),n}},sendMessage:async(r,n,s,i,o)=>{e({isLoading:!0});try{let l=[];o&&o.length>0&&(l=await ad(o,"chat-photos",`${r}/messages`));const{data:c,error:u}=await I.from("chat_messages").insert({project_id:r,sender_id:n,sender_name:s,message:i,photos:l.length>0?l:null}).select().single();if(u)throw u;const d=Uu(c);return e(h=>({messages:[d,...h.messages],isLoading:!1})),d.id}catch(l){throw console.error("Send message error:",l),e({isLoading:!1}),l}},getMessagesByProject:r=>t().messages.filter(n=>n.projectId===r).sort((n,s)=>n.timestamp.getTime()-s.timestamp.getTime()),loadMessagesByProject:async r=>{e({isLoading:!0});try{const{data:n,error:s}=await I.from("chat_messages").select("*").eq("project_id",r).order("timestamp",{ascending:!0});if(s)throw s;const i=n.map(Uu);e(o=>({messages:[...o.messages.filter(l=>l.projectId!==r),...i],isLoading:!1}))}catch(n){console.error("Load messages error:",n),e({isLoading:!1})}},markMessagesAsRead:async(r,n)=>{try{const{error:s}=await I.from("chat_messages").update({is_read:!0}).eq("project_id",r).neq("sender_id",n);if(s)throw s;e(i=>({messages:i.messages.map(o=>o.projectId===r&&o.senderId!==n?{...o,isRead:!0}:o)}))}catch(s){throw console.error("Mark messages as read error:",s),s}},createPaymentRequest:async(r,n,s,i)=>{e({isLoading:!0});try{const{data:o,error:l}=await I.from("projects").select("gestionnaire_id").eq("id",r).single();if(l)throw l;const{data:c,error:u}=await I.from("payments").insert({project_id:r,artisan_id:n,gestionnaire_id:o.gestionnaire_id,amount:s,description:i}).select().single();if(u)throw u;const d=Mu(c);return e(h=>({payments:[d,...h.payments],isLoading:!1})),d.id}catch(o){throw console.error("Create payment request error:",o),e({isLoading:!1}),o}},processPayment:async r=>{e({isLoading:!0});try{const{error:n}=await I.from("payments").update({status:"completed",processed_at:new Date().toISOString()}).eq("id",r);if(n)throw n;return e(s=>({payments:s.payments.map(i=>i.id===r?{...i,status:"completed",processedAt:new Date}:i),isLoading:!1})),!0}catch(n){return console.error("Process payment error:",n),e({isLoading:!1}),!1}},getPaymentsByUser:(r,n)=>t().payments.filter(s=>n==="gestionnaire"?s.gestionnaireId===r:s.artisanId===r),loadPaymentsByUser:async(r,n)=>{e({isLoading:!0});try{const s=n==="gestionnaire"?"gestionnaire_id":"artisan_id",{data:i,error:o}=await I.from("payments").select("*").eq(s,r).order("created_at",{ascending:!1});if(o)throw o;const l=i.map(Mu);e({payments:l,isLoading:!1})}catch(s){throw console.error("Load payments error:",s),e({isLoading:!1}),s}},generateInvoice:async r=>{e({isLoading:!0});try{const n=t().payments.find(d=>d.id===r);if(!n)throw new Error("Payment not found");const s=`INV-${Date.now()}`,i=Math.round(n.amount*.2),o=n.amount+i,{data:l,error:c}=await I.from("invoices").insert({project_id:n.projectId,payment_id:r,invoice_number:s,amount:n.amount,tax_amount:i,total_amount:o,due_date:new Date(Date.now()+30*24*60*60*1e3).toISOString(),status:"sent"}).select().single();if(c)throw c;const u={id:l.id,projectId:l.project_id,paymentId:l.payment_id,invoiceNumber:l.invoice_number,amount:l.amount,taxAmount:l.tax_amount,totalAmount:l.total_amount,issueDate:new Date(l.issue_date),dueDate:new Date(l.due_date),status:l.status,pdfUrl:l.pdf_url};return e(d=>({invoices:[u,...d.invoices],isLoading:!1})),u.id}catch(n){throw console.error("Generate invoice error:",n),e({isLoading:!1}),n}}})),rw=()=>{const{getProjectsByUser:e}=fa(),{user:t}=xe(),[r,n]=_.useState(""),[s,i]=_.useState("all"),l=(t?e(t.id,t.role):[]).filter(d=>{const h=d.title.toLowerCase().includes(r.toLowerCase())||d.description.toLowerCase().includes(r.toLowerCase()),f=s==="all"||d.status===s;return h&&f}),c=d=>{switch(d){case"accepted":return a.jsx(F,{variant:"info",children:"Accept"});case"in_progress":return a.jsx(F,{variant:"warning",children:"En cours"});case"completed":return a.jsx(F,{variant:"success",children:"Termin"});case"paid":return a.jsx(F,{variant:"success",children:"Pay"});default:return a.jsx(F,{variant:"default",children:d})}},u=d=>{if(!d)return"";const f=Math.floor((new Date().getTime()-d.getTime())/(1e3*60*60));if(f<1)return"Il y a moins d'1h";if(f<24)return`Il y a ${f}h`;const v=Math.floor(f/24);return`Il y a ${v} jour${v>1?"s":""}`};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Mes Projets"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:(t==null?void 0:t.role)==="gestionnaire"?"Suivez l'avancement de vos projets en cours":"Grez vos interventions et projets"})]}),a.jsx(z,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(If,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(G,{placeholder:"Rechercher un projet...",value:r,onChange:d=>n(d.target.value),className:"pl-10"})]}),a.jsxs("select",{value:s,onChange:d=>i(d.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"accepted",children:"Accept"}),a.jsx("option",{value:"in_progress",children:"En cours"}),a.jsx("option",{value:"completed",children:"Termin"}),a.jsx("option",{value:"paid",children:"Pay"})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(cc,{className:"h-4 w-4 mr-2"}),l.length," projet",l.length>1?"s":""]})]})}),a.jsx("div",{className:"space-y-4",children:l.length===0?a.jsxs(z,{className:"text-center py-12",children:[a.jsx($e,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucun projet trouv"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r||s!=="all"?"Aucun projet ne correspond  vos critres de recherche.":"Vous n'avez pas encore de projet en cours."})]}):l.map(d=>a.jsx(z,{hover:!0,className:"p-6",children:a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:d.title}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(_t,{className:"h-4 w-4"}),a.jsx("span",{children:d.address})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Qe,{className:"h-4 w-4"}),a.jsxs("span",{children:[d.price,""]})]}),d.startDate&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx($e,{className:"h-4 w-4"}),a.jsx("span",{children:u(d.startDate)})]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:c(d.status)})]}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3 line-clamp-2",children:d.description}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:(t==null?void 0:t.role)==="gestionnaire"?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-orange-600 dark:text-orange-300 text-sm font-medium",children:d.artisan.firstName[0]})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[d.artisan.firstName," ",d.artisan.lastName]}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:d.artisan.company})]}),d.artisan.rating&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(wr,{className:"h-3 w-3 text-yellow-400 fill-current"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:d.artisan.rating})]})]}):a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 dark:text-blue-300 text-sm font-medium",children:d.gestionnaire.firstName[0]})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[d.gestionnaire.firstName," ",d.gestionnaire.lastName]}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:d.gestionnaire.company})]})]})}),a.jsx(te,{to:`/projects/${d.id}`,children:a.jsxs(L,{variant:"ghost",size:"sm",className:"flex items-center space-x-1",children:[a.jsx(Cr,{className:"h-4 w-4"}),a.jsx("span",{children:"Voir dtails"})]})})]})]})})},d.id))})]})},nw=({projectId:e,className:t})=>{const{user:r}=xe(),{sendMessage:n,getMessagesByProject:s,markMessagesAsRead:i,loadMessagesByProject:o,isLoading:l}=fa(),[c,u]=_.useState(""),[d,h]=_.useState([]),[f,v]=_.useState(!0),p=_.useRef(null),y=s(e);_.useEffect(()=>{(async()=>{v(!0);try{await o(e)}catch(S){console.error("Error loading messages:",S)}finally{v(!1)}})()},[e,o]),_.useEffect(()=>{r&&i(e,r.id)},[e,r,i]),_.useEffect(()=>{var j;(j=p.current)==null||j.scrollIntoView({behavior:"smooth"})},[y]);const k=async()=>{!c.trim()&&d.length===0||r&&(await n(e,r.id,`${r.firstName} ${r.lastName}`,c,d.length>0?d:void 0),u(""),h([]))},m=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),k())},g=j=>{j.target.files&&h(Array.from(j.target.files))},x=j=>new Intl.DateTimeFormat("fr-FR",{hour:"2-digit",minute:"2-digit"}).format(j),w=j=>{const S=new Date,C=new Date(j);if(C.toDateString()===S.toDateString())return"Aujourd'hui";const A=new Date(S);return A.setDate(A.getDate()-1),C.toDateString()===A.toDateString()?"Hier":new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long"}).format(C)};let N="";return a.jsxs("div",{className:`flex flex-col h-96 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 ${t}`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Discussion du projet"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Communication en temps rel"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[f?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[a.jsx(uc,{className:"h-8 w-8 animate-spin text-blue-500"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Chargement des messages..."})]}):y.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(tl,{className:"h-8 w-8 text-gray-400"})}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Aucun message pour le moment"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Commencez la conversation !"})]}):y.map(j=>{const S=w(j.timestamp),C=S!==N;N=S;const A=(r==null?void 0:r.id)===j.senderId;return a.jsxs("div",{children:[C&&a.jsx("div",{className:"flex items-center justify-center my-4",children:a.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full",children:a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:S})})}),a.jsx("div",{className:`flex ${A?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-xs lg:max-w-md ${A?"order-2":"order-1"}`,children:[!A&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 px-3",children:j.senderName}),a.jsxs("div",{className:`rounded-lg px-3 py-2 ${A?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[j.message&&a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:j.message}),j.photos&&j.photos.length>0&&a.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:j.photos.map((O,b)=>a.jsx("img",{src:O,alt:`Photo ${b+1}`,className:"w-full h-20 object-cover rounded"},b))})]}),a.jsxs("div",{className:`flex items-center mt-1 space-x-1 ${A?"justify-end":"justify-start"}`,children:[a.jsx($e,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:x(j.timestamp)}),!j.isRead&&!A&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})})]},j.id)}),a.jsx("div",{ref:p})]}),a.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[d.length>0&&a.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:d.map((j,S)=>a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:URL.createObjectURL(j),alt:`Attachment ${S+1}`,className:"w-16 h-16 object-cover rounded border"}),a.jsx("button",{onClick:()=>h(C=>C.filter((A,O)=>O!==S)),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:""})]},S))}),a.jsxs("div",{className:"flex items-end space-x-2",children:[a.jsx("div",{className:"flex-1",children:a.jsx("textarea",{value:c,onChange:j=>u(j.target.value),onKeyPress:m,placeholder:"Tapez votre message...",rows:1,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:g,className:"hidden",id:"chat-file-input"}),a.jsx("label",{htmlFor:"chat-file-input",children:a.jsx(L,{variant:"ghost",size:"sm",className:"p-2",type:"button",children:a.jsx(Wg,{className:"h-4 w-4"})})}),a.jsx(L,{onClick:k,disabled:!c.trim()&&d.length===0,isLoading:l,size:"sm",className:"p-2",children:a.jsx(tl,{className:"h-4 w-4"})})]})]})]})]})},sw=({project:e,className:t,isLoading:r=!1})=>{const n=o=>{switch(o){case"status_change":return it;case"message":return el;case"photo_upload":return Er;case"payment":return xs;default:return $e}},s=o=>{switch(o){case"status_change":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300";case"message":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300";case"photo_upload":return"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-300";case"payment":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-300";default:return"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300"}},i=o=>{const c=Math.floor((new Date().getTime()-o.getTime())/(1e3*60*60));if(c<1)return"Il y a moins d'1h";if(c<24)return`Il y a ${c}h`;const u=Math.floor(c/24);return u===1?"Hier":u<7?`Il y a ${u} jours`:new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(o)};return a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${t}`,children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Historique du projet"}),a.jsx("div",{className:"space-y-6",children:r?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[a.jsx(uc,{className:"h-8 w-8 animate-spin text-blue-500"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Chargement de l'historique..."})]}):e.timeline.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx($e,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Aucun vnement pour le moment"})]}):e.timeline.sort((o,l)=>l.timestamp.getTime()-o.timestamp.getTime()).map((o,l)=>{const c=n(o.type),u=s(o.type);return a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${u}`,children:a.jsx(c,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.message}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:i(o.timestamp)})]}),a.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[a.jsx(pt,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:o.author})]}),o.photos&&o.photos.length>0&&a.jsx("div",{className:"mt-3 grid grid-cols-3 gap-2",children:o.photos.map((d,h)=>a.jsx("img",{src:d,alt:`Photo ${h+1}`,className:"w-full h-20 object-cover rounded border"},h))})]}),l<e.timeline.length-1&&a.jsx("div",{className:"absolute left-5 mt-10 w-px h-6 bg-gray-200 dark:bg-gray-600"})]},o.id)})})]})},iw=()=>{const{id:e}=Cf(),t=Tt(),{user:r}=xe(),{getProjectById:n,updateProjectStatus:s,uploadProjectPhotos:i,createPaymentRequest:o,loadProjectById:l,loadMessagesByProject:c,loadProjectTimeline:u,isLoading:d}=fa(),[h,f]=_.useState(!1),[v,p]=_.useState(!1),[y,k]=_.useState(!1),[m,g]=_.useState("before"),[x,w]=_.useState([]),[N,j]=_.useState(5),[S,C]=_.useState(""),[A,O]=_.useState(!0),b=e?n(e):void 0;if(_.useEffect(()=>{(async()=>{if(e){O(!0);try{await Promise.all([l(e),c(e),u(e)])}catch(q){console.error("Error loading project data:",q)}finally{O(!1)}}})()},[e,l,c,u]),A)return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen space-y-4",children:[a.jsx(uc,{className:"h-12 w-12 animate-spin text-blue-500"}),a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Chargement du projet"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Rcupration des donnes du projet..."})]})]});if(!b)return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:a.jsx($e,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Projet non trouv"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Le projet demand n'existe pas ou vous n'avez pas l'autorisation de le voir."}),a.jsxs(L,{onClick:()=>t(-1),children:[a.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Retour"]})]})]});const ce=(r==null?void 0:r.role)==="gestionnaire",_e=(r==null?void 0:r.role)==="artisan",Rt=ce&&b.gestionnaire.id===(r==null?void 0:r.id)||_e&&b.artisan.id===(r==null?void 0:r.id),ma=P=>{switch(P){case"accepted":return a.jsx(F,{variant:"info",children:"Accept"});case"in_progress":return a.jsx(F,{variant:"warning",children:"En cours"});case"completed":return a.jsx(F,{variant:"success",children:"Termin"});case"paid":return a.jsx(F,{variant:"success",children:"Pay"});default:return a.jsx(F,{variant:"default",children:P})}},Ir=P=>{s(b.id,P)},_n=()=>{if(x.length===0)return;const P=x.map(q=>URL.createObjectURL(q));i(b.id,m,P),w([]),f(!1)},T=()=>{o(b.id,b.artisan.id,b.price,`Paiement pour: ${b.title}`),p(!1)},$=()=>{console.log("Rating:",N,"Review:",S),k(!1)};return a.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(L,{variant:"ghost",onClick:()=>t(-1),children:[a.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Retour"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.title}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(_t,{className:"h-4 w-4"}),a.jsx("span",{children:b.address})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Qe,{className:"h-4 w-4"}),a.jsxs("span",{children:[b.price,""]})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[ma(b.status),Rt&&a.jsxs("div",{className:"flex space-x-2",children:[_e&&b.status==="accepted"&&a.jsx(L,{onClick:()=>Ir("in_progress"),size:"sm",children:"Dmarrer"}),_e&&b.status==="in_progress"&&a.jsx(L,{onClick:()=>Ir("completed"),size:"sm",variant:"secondary",children:"Marquer termin"}),_e&&b.status==="completed"&&a.jsxs(L,{onClick:()=>p(!0),size:"sm",children:[a.jsx(xs,{className:"h-4 w-4 mr-2"}),"Demander paiement"]}),ce&&b.status==="completed"&&!b.rating&&a.jsxs(L,{onClick:()=>k(!0),size:"sm",children:[a.jsx(wr,{className:"h-4 w-4 mr-2"}),"Noter l'artisan"]})]})]})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(z,{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Dtails du projet"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:b.description}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Gestionnaire"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 dark:text-blue-300 font-medium",children:b.gestionnaire.firstName[0]})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[b.gestionnaire.firstName," ",b.gestionnaire.lastName]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.gestionnaire.company})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Artisan"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-orange-600 dark:text-orange-300 font-medium",children:b.artisan.firstName[0]})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[b.artisan.firstName," ",b.artisan.lastName]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.artisan.company}),b.artisan.rating&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(wr,{className:"h-3 w-3 text-yellow-400 fill-current"}),a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[b.artisan.rating,"/5"]})]})]})]})]})]})]}),a.jsxs(z,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Photos du projet"}),Rt&&a.jsxs(L,{onClick:()=>f(!0),size:"sm",variant:"secondary",children:[a.jsx(Er,{className:"h-4 w-4 mr-2"}),"Ajouter photos"]})]}),a.jsx("div",{className:"space-y-4",children:["before","during","after"].map(P=>a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white mb-2 capitalize",children:[P==="before"?"Avant":P==="during"?"En cours":"Aprs",a.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",b.photos[P].length," photo",b.photos[P].length>1?"s":"",")"]})]}),b.photos[P].length>0?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:b.photos[P].map((q,ne)=>a.jsx("img",{src:q,alt:`${P} ${ne+1}`,className:"w-full h-24 object-cover rounded border cursor-pointer hover:opacity-80 transition-opacity"},ne))}):a.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center",children:[a.jsx(Er,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aucune photo pour cette phase"})]})]},P))})]}),a.jsx(nw,{projectId:b.id})]}),a.jsx("div",{children:a.jsx(sw,{project:b,isLoading:d})})]}),a.jsx(jr,{isOpen:h,onClose:()=>f(!1),title:"Ajouter des photos",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phase du projet"}),a.jsxs("select",{value:m,onChange:P=>g(P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[a.jsx("option",{value:"before",children:"Avant intervention"}),a.jsx("option",{value:"during",children:"En cours d'intervention"}),a.jsx("option",{value:"after",children:"Aprs intervention"})]})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:P=>P.target.files&&w(Array.from(P.target.files)),className:"hidden",id:"photo-upload"}),a.jsxs("label",{htmlFor:"photo-upload",className:"block w-full border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500",children:[a.jsx(Of,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cliquez pour slectionner des photos"})]})]}),x.length>0&&a.jsx("div",{className:"grid grid-cols-3 gap-2",children:x.map((P,q)=>a.jsx("img",{src:URL.createObjectURL(P),alt:`Upload ${q+1}`,className:"w-full h-20 object-cover rounded"},q))}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(L,{variant:"secondary",onClick:()=>f(!1),children:"Annuler"}),a.jsx(L,{onClick:_n,disabled:x.length===0,children:"Ajouter photos"})]})]})}),a.jsx(jr,{isOpen:v,onClose:()=>p(!1),title:"Demander le paiement",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Rcapitulatif du projet"}),a.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:b.title}),a.jsxs("p",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mt-2",children:["Montant: ",b.price,""]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Une demande de paiement sera envoye  l'administrateur pour validation. Une facture sera automatiquement gnre."}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(L,{variant:"secondary",onClick:()=>p(!1),children:"Annuler"}),a.jsx(L,{onClick:T,isLoading:d,children:"Demander le paiement"})]})]})}),a.jsx(jr,{isOpen:y,onClose:()=>k(!1),title:"Noter l'artisan",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Note (1  5 toiles)"}),a.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(P=>a.jsx("button",{onClick:()=>j(P),className:`p-1 ${P<=N?"text-yellow-400":"text-gray-300"}`,children:a.jsx(wr,{className:"h-6 w-6 fill-current"})},P))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Commentaire (optionnel)"}),a.jsx("textarea",{value:S,onChange:P=>C(P.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Partagez votre exprience avec cet artisan..."})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(L,{variant:"secondary",onClick:()=>k(!1),children:"Annuler"}),a.jsx(L,{onClick:$,children:"Publier l'avis"})]})]})})]})},aw=()=>{const{getPaymentsByUser:e,generateInvoice:t,isLoading:r}=fa(),{user:n}=xe(),[s,i]=_.useState("payments"),o=n?e(n.id,n.role):[],l=o.filter(p=>p.status==="pending"),u=o.filter(p=>p.status==="completed").reduce((p,y)=>p+y.amount,0),d=l.reduce((p,y)=>p+y.amount,0),h=p=>{switch(p){case"pending":return a.jsx(F,{variant:"warning",children:"En attente"});case"processing":return a.jsx(F,{variant:"info",children:"En cours"});case"completed":return a.jsx(F,{variant:"success",children:"Pay"});case"failed":return a.jsx(F,{variant:"danger",children:"chec"});default:return a.jsx(F,{variant:"default",children:p})}},f=p=>new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(p),v=async p=>{await t(p)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:(n==null?void 0:n.role)==="artisan"?"Mes Paiements":"Factures & Paiements"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:(n==null?void 0:n.role)==="artisan"?"Grez vos revenus et demandes de paiement":"Suivez vos factures et paiements"})]}),(n==null?void 0:n.role)==="artisan"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(z,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revenus totaux"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[u,""]})]}),a.jsx(it,{className:"h-8 w-8 text-green-600"})]})}),a.jsx(z,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"En attente"}),a.jsxs("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[d,""]})]}),a.jsx($e,{className:"h-8 w-8 text-orange-600"})]})}),a.jsx(z,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Paiements"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.length})]}),a.jsx(xs,{className:"h-8 w-8 text-blue-600"})]})})]}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>i("payments"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="payments"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Paiements"}),a.jsx("button",{onClick:()=>i("invoices"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="invoices"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Factures"})]})}),s==="payments"&&a.jsx("div",{className:"space-y-4",children:o.length===0?a.jsxs(z,{className:"text-center py-12",children:[a.jsx(xs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucun paiement"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:(n==null?void 0:n.role)==="artisan"?"Vous n'avez pas encore de demande de paiement.":"Aucun paiement  traiter pour le moment."})]}):o.map(p=>a.jsx(z,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:p.description}),h(p.status)]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Qe,{className:"h-4 w-4"}),a.jsxs("span",{className:"font-medium",children:[p.amount,""]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Vg,{className:"h-4 w-4"}),a.jsx("span",{children:f(p.createdAt)})]}),p.processedAt&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-green-500"}),a.jsxs("span",{children:["Pay le ",f(p.processedAt)]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[p.status==="completed"&&a.jsxs(L,{onClick:()=>v(p.id),size:"sm",variant:"secondary",isLoading:r,children:[a.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Facture"]}),p.invoiceUrl&&a.jsxs(L,{onClick:()=>window.open(p.invoiceUrl,"_blank"),size:"sm",variant:"ghost",children:[a.jsx(qg,{className:"h-4 w-4 mr-2"}),"Tlcharger"]})]})]})},p.id))}),s==="invoices"&&a.jsxs(z,{className:"text-center py-12",children:[a.jsx(Xo,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Gestion des factures"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Cette section sera disponible prochainement pour grer toutes vos factures."})]})]})},ow=()=>{var x,w,N;const{user:e,updateUser:t,isLoading:r}=xe(),[n,s]=_.useState(!1),[i,o]=_.useState(!1),[l,c]=_.useState([]),[u,d]=_.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",company:(e==null?void 0:e.company)||"",arrondissements:(e==null?void 0:e.arrondissements)||[],trades:(e==null?void 0:e.trades)||[],bankDetails:{iban:((x=e==null?void 0:e.bankDetails)==null?void 0:x.iban)||"",bic:((w=e==null?void 0:e.bankDetails)==null?void 0:w.bic)||"",accountHolder:((N=e==null?void 0:e.bankDetails)==null?void 0:N.accountHolder)||""}});if(!e)return null;const h=(j,S)=>{if(j.startsWith("bankDetails.")){const C=j.split(".")[1];d(A=>({...A,bankDetails:{...A.bankDetails,[C]:S}}))}else d(C=>({...C,[j]:S}))},f=(j,S)=>{d(C=>({...C,[j]:C[j].includes(S)?C[j].filter(A=>A!==S):[...C[j],S]}))},v=async()=>{await t(u)&&s(!1)},p=()=>{var j,S,C;d({firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,company:e.company,arrondissements:e.arrondissements||[],trades:e.trades||[],bankDetails:{iban:((j=e.bankDetails)==null?void 0:j.iban)||"",bic:((S=e.bankDetails)==null?void 0:S.bic)||"",accountHolder:((C=e.bankDetails)==null?void 0:C.accountHolder)||""}}),s(!1)},y=()=>{console.log("Uploading documents:",l),c([]),o(!1)},k=()=>{switch(e.role){case"gestionnaire":return Qo;case"artisan":return fr;case"admin":return Xr;default:return pt}},m=()=>{switch(e.role){case"gestionnaire":return"from-blue-500 to-blue-600";case"artisan":return"from-orange-500 to-orange-600";case"admin":return"from-purple-500 to-purple-600";default:return"from-gray-500 to-gray-600"}},g=k();return a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 dark:from-blue-700 dark:to-teal-700 rounded-2xl p-8 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsx("div",{className:`w-20 h-20 bg-gradient-to-r ${m()} rounded-2xl flex items-center justify-center bg-white/20`,children:e.avatar?a.jsx("img",{src:e.avatar,alt:"Profile",className:"w-full h-full rounded-2xl object-cover"}):a.jsx(g,{className:"h-10 w-10 text-white"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold",children:[e.firstName," ",e.lastName]}),a.jsx("p",{className:"text-blue-100 text-lg capitalize",children:e.role}),a.jsx("p",{className:"text-blue-100",children:e.company}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.isVerified?a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm text-green-300",children:"Vrifi"})]}):a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ae,{className:"h-4 w-4 text-yellow-300"}),a.jsx("span",{className:"text-sm text-yellow-300",children:"Non vrifi"})]}),e.role==="artisan"&&a.jsxs(a.Fragment,{children:[e.isCertified?a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Xr,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm text-green-300",children:"Certifi"})]}):a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Xr,{className:"h-4 w-4 text-yellow-300"}),a.jsx("span",{className:"text-sm text-yellow-300",children:"En attente de certification"})]}),e.rating&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(wr,{className:"h-4 w-4 text-yellow-300 fill-current"}),a.jsxs("span",{className:"text-sm text-yellow-300",children:[e.rating,"/5"]})]})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(L,{variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[a.jsx(Er,{className:"h-4 w-4 mr-2"}),"Changer photo"]}),n?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(L,{onClick:p,variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:"Annuler"}),a.jsxs(L,{onClick:v,isLoading:r,className:"bg-white text-blue-600 hover:bg-gray-100",children:[a.jsx(Gg,{className:"h-4 w-4 mr-2"}),"Sauvegarder"]})]}):a.jsxs(L,{onClick:()=>s(!0),variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[a.jsx(Yg,{className:"h-4 w-4 mr-2"}),"Modifier"]})]})]})}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(z,{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Informations personnelles"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(pt,{className:"absolute left-3 top-9 h-4 w-4 text-gray-400"}),a.jsx(G,{label:"Prnom",value:u.firstName,onChange:j=>h("firstName",j.target.value),className:"pl-10",disabled:!n})]}),a.jsxs("div",{className:"relative",children:[a.jsx(pt,{className:"absolute left-3 top-9 h-4 w-4 text-gray-400"}),a.jsx(G,{label:"Nom",value:u.lastName,onChange:j=>h("lastName",j.target.value),className:"pl-10",disabled:!n})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ta,{className:"absolute left-3 top-9 h-4 w-4 text-gray-400"}),a.jsx(G,{label:"Email",type:"email",value:u.email,onChange:j=>h("email",j.target.value),className:"pl-10",disabled:!n})]}),a.jsxs("div",{className:"relative",children:[a.jsx(dc,{className:"absolute left-3 top-9 h-4 w-4 text-gray-400"}),a.jsx(G,{label:"Tlphone",value:u.phone,onChange:j=>h("phone",j.target.value),className:"pl-10",disabled:!n})]})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(Qo,{className:"absolute left-3 top-9 h-4 w-4 text-gray-400"}),a.jsx(G,{label:"Entreprise",value:u.company,onChange:j=>h("company",j.target.value),className:"pl-10",disabled:!n})]})})]}),e.role==="artisan"&&a.jsxs(a.Fragment,{children:[a.jsxs(z,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(_t,{className:"h-5 w-5 mr-2 text-blue-600 dark:text-blue-400"}),"Zones d'intervention"]}),a.jsxs(F,{variant:"info",children:[u.arrondissements.length," zone",u.arrondissements.length>1?"s":""]})]}),a.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[a.jsx("strong",{children:"Conseil :"})," Slectionnez les arrondissements o vous souhaitez intervenir. Plus vous couvrez de zones, plus vous recevrez d'opportunits !"]})}),n?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:Pr.map(j=>a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:u.arrondissements.includes(j.id),onChange:()=>f("arrondissements",j.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 focus:ring-2"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:j.name})]},j.id))}):a.jsx("div",{children:e.arrondissements&&e.arrondissements.length>0?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:e.arrondissements.map(j=>{const S=Pr.find(C=>C.id===j);return S?a.jsxs("div",{className:"flex items-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsx(_t,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 mr-2 flex-shrink-0"}),a.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:S.name})]},j):null})}):a.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[a.jsx(_t,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Aucune zone d'intervention dfinie"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:'Cliquez sur "Modifier" pour ajouter vos zones'})]})})]}),a.jsxs(z,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(fr,{className:"h-5 w-5 mr-2 text-orange-600 dark:text-orange-400"}),"Corps de mtier"]}),a.jsxs(F,{variant:"warning",children:[u.trades.length," spcialit",u.trades.length>1?"s":""]})]}),a.jsx("div",{className:"mb-4 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:[a.jsx("strong",{children:"Important :"})," Slectionnez uniquement les mtiers que vous matrisez parfaitement. Votre rputation dpend de la qualit de vos interventions !"]})}),n?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:sa.map(j=>a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:u.trades.includes(j),onChange:()=>f("trades",j),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500 focus:ring-2"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(fr,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:j})]})]},j))}):a.jsx("div",{children:e.trades&&e.trades.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.trades.map(j=>a.jsxs("div",{className:"flex items-center p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[a.jsx(fr,{className:"h-4 w-4 text-orange-600 dark:text-orange-400 mr-3 flex-shrink-0"}),a.jsx("span",{className:"text-sm font-medium text-orange-800 dark:text-orange-200",children:j})]},j))}):a.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[a.jsx(fr,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Aucun corps de mtier dfini"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:'Cliquez sur "Modifier" pour ajouter vos spcialits'})]})})]}),a.jsxs(z,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Informations bancaires"}),a.jsx(xs,{className:"h-5 w-5 text-gray-400"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(G,{label:"IBAN",value:u.bankDetails.iban,onChange:j=>h("bankDetails.iban",j.target.value),placeholder:"FR76 1234 5678 9012 3456 7890 123",disabled:!n}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsx(G,{label:"BIC/SWIFT",value:u.bankDetails.bic,onChange:j=>h("bankDetails.bic",j.target.value),placeholder:"BNPAFRPP",disabled:!n}),a.jsx(G,{label:"Titulaire du compte",value:u.bankDetails.accountHolder,onChange:j=>h("bankDetails.accountHolder",j.target.value),placeholder:"Nom du titulaire",disabled:!n})]})]})]}),a.jsxs(z,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Documents et certifications"}),a.jsx(L,{onClick:()=>o(!0),size:"sm",variant:"secondary",children:"Ajouter document"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded flex items-center justify-center",children:a.jsx(Xr,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Assurance professionnelle"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valide jusqu'au 31/12/2024"})]})]}),a.jsx(F,{variant:"success",children:"Valid"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900 rounded flex items-center justify-center",children:a.jsx(it,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Qualification RGE"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"lectricit gnrale"})]})]}),a.jsx(F,{variant:"success",children:"Valid"})]})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(z,{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Statut du compte"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email vrifi"}),e.isVerified?a.jsx(it,{className:"h-4 w-4 text-green-500"}):a.jsx(Ae,{className:"h-4 w-4 text-orange-500"})]}),e.role==="artisan"&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Certifi"}),e.isCertified?a.jsx(it,{className:"h-4 w-4 text-green-500"}):a.jsx(Ae,{className:"h-4 w-4 text-orange-500"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Profil complet"}),a.jsx(it,{className:"h-4 w-4 text-green-500"})]})]})]}),e.role==="artisan"&&a.jsxs(z,{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Statistiques"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.rating||"4.8"}),a.jsx("div",{className:"flex items-center justify-center space-x-1 mt-1",children:[1,2,3,4,5].map(j=>a.jsx(wr,{className:`h-4 w-4 ${j<=(e.rating||4.8)?"text-yellow-400 fill-current":"text-gray-300"}`},j))}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Note moyenne"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.completedProjects||12}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Projets termins"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"98%"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Taux de satisfaction"})]})]})]})]}),a.jsxs(z,{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Actions rapides"}),a.jsxs("div",{className:"space-y-2",children:[e.role==="gestionnaire"&&a.jsx(L,{variant:"ghost",className:"w-full justify-start",children:"Crer une urgence"}),e.role==="artisan"&&a.jsxs(a.Fragment,{children:[a.jsx(L,{variant:"ghost",className:"w-full justify-start",children:"Voir les opportunits"}),a.jsx(L,{variant:"ghost",className:"w-full justify-start",children:"Mes projets en cours"})]}),a.jsx(L,{variant:"ghost",className:"w-full justify-start",children:"Paramtres de notification"}),a.jsx(L,{variant:"ghost",className:"w-full justify-start",children:"Centre d'aide"})]})]})]})]}),a.jsx(jr,{isOpen:i,onClose:()=>o(!1),title:"Ajouter un document",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type de document"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[a.jsx("option",{children:"Assurance professionnelle"}),a.jsx("option",{children:"Certification RGE"}),a.jsx("option",{children:"Diplme professionnel"}),a.jsx("option",{children:"Attestation de formation"}),a.jsx("option",{children:"Autre"})]})]}),a.jsxs("div",{children:[a.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:j=>j.target.files&&c(Array.from(j.target.files)),className:"hidden",id:"document-upload"}),a.jsxs("label",{htmlFor:"document-upload",className:"block w-full border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500",children:[a.jsx(Er,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cliquez pour slectionner des fichiers"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"PDF, JPG, PNG (max 10MB par fichier)"})]})]}),l.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fichiers slectionns :"}),l.map((j,S)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:j.name}),a.jsx("button",{onClick:()=>c(C=>C.filter((A,O)=>O!==S)),className:"text-red-500 hover:text-red-700",children:""})]},S))]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(L,{variant:"secondary",onClick:()=>o(!1),children:"Annuler"}),a.jsx(L,{onClick:y,disabled:l.length===0,children:"Tlcharger"})]})]})})]})};function lw(){const{isAuthenticated:e}=xe();return a.jsx(Dg,{children:a.jsxs(Tg,{children:[a.jsx(fe,{path:"/role-selection",element:e?a.jsx($t,{to:"/dashboard"}):a.jsx(Wv,{})}),a.jsx(fe,{path:"/login",element:e?a.jsx($t,{to:"/dashboard"}):a.jsx(Hv,{})}),a.jsx(fe,{path:"/register",element:e?a.jsx($t,{to:"/dashboard"}):a.jsx(Kv,{})}),a.jsx(fe,{path:"/dashboard",element:a.jsx(Ze,{children:a.jsx(Xe,{children:a.jsx(Jv,{})})})}),a.jsx(fe,{path:"/emergencies",element:a.jsx(Ze,{allowedRoles:["gestionnaire"],children:a.jsx(Xe,{children:a.jsx(Zv,{})})})}),a.jsx(fe,{path:"/create-emergency",element:a.jsx(Ze,{allowedRoles:["gestionnaire"],children:a.jsx(Xe,{children:a.jsx(Xv,{})})})}),a.jsx(fe,{path:"/emergencies/:id",element:a.jsx(Ze,{allowedRoles:["gestionnaire"],children:a.jsx(Xe,{children:a.jsx(ew,{})})})}),a.jsx(fe,{path:"/projects",element:a.jsx(Ze,{allowedRoles:["artisan"],children:a.jsx(Xe,{children:a.jsx(rw,{})})})}),a.jsx(fe,{path:"/projects/:id",element:a.jsx(Ze,{children:a.jsx(Xe,{children:a.jsx(iw,{})})})}),a.jsx(fe,{path:"/opportunities",element:a.jsx(Ze,{allowedRoles:["artisan"],children:a.jsx(Xe,{children:a.jsx(tw,{})})})}),a.jsx(fe,{path:"/payments",element:a.jsx(Ze,{children:a.jsx(Xe,{children:a.jsx(aw,{})})})}),a.jsx(fe,{path:"/admin/users",element:a.jsx(Ze,{allowedRoles:["admin"],children:a.jsx(Xe,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestion Utilisateurs"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Page en cours de dveloppement"})]})})})}),a.jsx(fe,{path:"/admin/certifications",element:a.jsx(Ze,{allowedRoles:["admin"],children:a.jsx(Xe,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Certifications"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Page en cours de dveloppement"})]})})})}),a.jsx(fe,{path:"/profile",element:a.jsx(Ze,{children:a.jsx(Xe,{children:a.jsx(ow,{})})})}),a.jsx(fe,{path:"/",element:e?a.jsx($t,{to:"/dashboard"}):a.jsx($t,{to:"/role-selection"})}),a.jsx(fe,{path:"*",element:a.jsx($t,{to:"/"})})]})})}jf(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(lw,{})}));
